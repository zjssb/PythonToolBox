WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/dropdown/Dropdown.js' */
define("jira/dropdown",["require"],function(i){"use strict";function o(){try{return Boolean(n.require("jira/dialog/dialog").current)}catch(i){}return!1}var n=i("jira/util/top-same-origin-window")(window),t=i("jira/ajs/layer/layer-interactions"),e=i("jquery"),d=i("jira/util/key-code"),r=[],s={current:null,addInstance:function(){r.push(this)},hideInstances:function(){var i=this;e(r).each(function(){i!==this&&this.hideDropdown()})},getHash:function(){return this.hash||(this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}),this.hash},displayDropdown:function(){if(this.current!==this){this.hideInstances(),this.current=this,this.dropdown.css({display:"block"}),this.displayed=!0;var i=this.dropdown;o()||setTimeout(function(){var o=e(window),n=i.offset().top+i.prop("offsetHeight")-o.height()+10;o.scrollTop()<n&&e("html,body").animate({scrollTop:n},300,"linear")},100)}},hideDropdown:function(){!1!==this.displayed&&(this.current=null,this.dropdown.css({display:"none"}),this.displayed=!1)},init:function(i,o){var n=this;this.addInstance(this),this.dropdown=e(o),this.dropdown.css({display:"none"}),e(document).keydown(function(i){i.keyCode===d.TAB&&n.hideDropdown()}),i.target?e.aop.before(i,function(){n.displayed||n.displayDropdown()}):(n.dropdown.css("top",e(i).outerHeight()+"px"),i.click(function(i){n.displayed?n.hideDropdown():(n.displayDropdown(),i.stopPropagation()),i.preventDefault()})),e(document.body).click(function(){n.displayed&&n.hideDropdown()})}};return t.preventDialogHide(s),t.hideBeforeDialogShown(s),s}),AJS.namespace("JIRA.Dropdown",null,require("jira/dropdown")),AJS.namespace("jira.widget.dropdown",null,require("jira/dropdown"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/AutoComplete.js' */
define("jira/autocomplete/autocomplete",["jira/ajs/ajax/smart-ajax","jira/util/key-code","jira/util/objects","jquery"],function(e,t,o,n){"use strict";return function(){var i,s=function e(t,o){e.t&&(clearTimeout(e.t),e.t=void 0),e.t=setTimeout(t,1e3*o)},r={9:!0,13:!0,14:!0,25:!0,27:!0,38:!0,40:!0,224:!0};return{dispatcher:function(){},getSavedResponse:function(){},saveResponse:function(){},renderSuggestions:function(){},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},set:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},completeField:function(e){e&&(this.field.val(e).focus(),this.field.trigger("change"))},textToSuggestionCursorPosition:function(){return this.field.val()},_makeRequest:function(t){var n=this,i=o.copyObject(t);return this.pendingRequest&&this.pendingRequest.abort(),i.complete=function(){n.pendingRequest=null},i.error=function(e){!e.aborted&&0!==e.status&&t.error&&t.error.apply(this,arguments)},this.pendingRequest=e.makeRequest(i),this.pendingRequest},addSuggestionControls:function(e){function o(e){d.dropdownController.displayed&&a(e.data.index)}function s(e){0===e.data.index&&(d.selectedIndex=-1),n(this).removeClass("active")}function r(e){d.completeField(d.suggestionNodes[e.data.index][1])}var d=this,l=function(e,t){var o=!1===d.autoSelectFirst?-1:0;return d.allowArrowCarousel?e>t?o:e<o?t:e:e>t?t:e<o?(d.responseContainer.scrollTop(0),o):e},a=function(e){void 0!==d.selectedIndex&&d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].removeClass("active"),d.selectedIndex=l(e,d.suggestionNodes.length-1),d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].addClass("active")},u=function(){return d.suggestionNodes&&d.suggestionNodes[d.selectedIndex]&&d.suggestionNodes[d.selectedIndex][0].hasClass("active")},p=function(e){d.responseContainer.is(":visible")&&e.keyCode===t.ENTER&&(u()&&!d.pendingRequest&&d.completeField(d.suggestionNodes[d.selectedIndex][1]),e.preventDefault(),e.stopPropagation())},c=function(e){if(d.responseContainer.is(":visible"))if(d.field[0]!==document.activeElement&&d.field.focus(),e.keyCode===t.DOWN){if(a(d.selectedIndex+1),d.selectedIndex>=0){var o=d.responseContainer.height(),n=d.suggestionNodes[d.selectedIndex][0].position().top+d.suggestionNodes[d.selectedIndex][0].outerHeight();n-o>0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+n-o+2)}else d.responseContainer.scrollTop(0);e.preventDefault()}else if(e.keyCode===t.UP){if(a(d.selectedIndex-1),d.selectedIndex>=0){var i=d.suggestionNodes[d.selectedIndex][0].position().top;i<0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+i-2)}e.preventDefault()}else e.keyCode===t.TAB&&(u()?(d.completeField(d.suggestionNodes[d.selectedIndex][1]),e.preventDefault()):d.dropdownController.hideDropdown())};if(e.length){this.selectedIndex=0,this.suggestionNodes=e;for(var h=0;h<d.suggestionNodes.length;h++){var f={instance:this,index:h};this.suggestionNodes[h][0].bind("mouseover",f,o).bind("mouseout",f,s).bind("click",f,r).bind("mousedown",function(e){e.preventDefault()})}this.keyboardHandlerBinded||(n(this.field).keypress(p),n(this.field).keydown(c),this.keyboardHandlerBinded=!0),a(!1===d.autoSelectFirst?-1:0),i=this}},clearResponseContainer:function(){this.responseContainer.empty(),this.suggestionNodes=void 0},delay:s,buildResponseContainer:function(){var e=this.field.parent().addClass("atlassian-autocomplete");this.responseContainer=n(document.createElement("div")),this.responseContainer.addClass("suggestions"),this.positionResponseContainer(),this.responseContainer.appendTo(e)},positionResponseContainer:function(){this.responseContainer.css({top:this.field.outerHeight()})},keyUpHandler:function(){function e(){this.responseContainer||this.buildResponseContainer(),this.dispatcher(this.field.val())}return function(o){return this.field.val().length>=this.minQueryLength&&(o.keyCode in r&&(!this.responseContainer||this.responseContainer.is(":visible")||o.keyCode!==t.UP&&o.keyCode!==t.DOWN)||e.call(this)),o}}(),addMultiSelectAdvice:function(e){var t=this,o=function e(o){if(!e.isAlerting){e.isAlerting=!0;var i=n(document.createElement("div")).css({float:"left",display:"none"}).addClass("warningBox").html("Oops! You have already entered the value <em>"+o+"</em>").appendTo(t.field.parent()).show("fast",function(){t.delay(function(){i.hide("fast",function(){i.remove(),e.isAlerting=!1})},4)})}};n.aop.before({target:this,method:"dispatcher"},function(t){var o=this.field.val();return t[0]=n.trim(o.slice(o.lastIndexOf(e)+1)),t}),n.aop.before({target:this,method:"completeField"},function(t){var i=t[0],s=this.field.val().split(e),r=n(s).map(function(){return n.trim(this)}).get();return!this.allowDuplicates&&new RegExp("(?:^|[\\s"+e+"])"+i+"\\s*"+e).test(this.field.val())?(o(i),r[r.length-1]=""):(r[r.length-1]=i,r[r.length]=""),t[0]=r.join(e.replace(/([^\s]$)/,"$1 ")),t})},addDropdownAdvice:function(){n.aop.after({target:this,method:"buildResponseContainer"},function(e){return this.dropdownController=JIRA.Dropdown.AutoComplete({target:this,method:"renderSuggestions"},this.responseContainer),n.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){this.dropdown.removeClass("dropdown-ready"),clearTimeout(s.t)}),e}),n.aop.after({target:this,method:"renderSuggestions"},function(e){return e&&e.length>0?(this.dropdownController.displayDropdown(),this.maxHeight&&this.dropdownController.dropdown.prop("scrollHeight")>this.maxHeight?this.dropdownController.dropdown.css({height:this.maxHeight,overflowX:"visible",overflowY:"scroll"}):this.maxHeight&&this.dropdownController.dropdown.css({height:"",overflowX:"",overflowY:""}),this.dropdownController.dropdown.addClass("dropdown-ready")):this.dropdownController.hideDropdown(),e}),n.aop.after({target:this,method:"completeField"},this._afterCompleteField),n.aop.after({target:this,method:"keyUpHandler"},function(e){return this.field.val().length>=this.minQueryLength&&e.keyCode!==t.ESCAPE||!this.dropdownController||!this.dropdownController.displayed||(this.dropdownController.hideDropdown(),e.keyCode===t.ESCAPE&&e.stopPropagation()),e})},_afterCompleteField:function(e){return this.dropdownController.hideDropdown(),e},init:function(e){var o=this;this.set(e),this.field=this.field||n("#"+this.fieldID),this.field.attr("autocomplete","off").keyup(function(e){o.disabled||o.keyUpHandler(e)}).keydown(function(e){e.keyCode===t.ESCAPE&&o.responseContainer&&o.responseContainer.is(":visible")&&e.preventDefault()}).click(function(){i===o&&setTimeout(function(){o.dispatcher(o.field.val())},0)}).blur(function(){o.pendingRequest&&o.pendingRequest.abort()}).focus(function(e){o.disabled||(e.originalEvent&&e.originalEvent.relatedTarget&&setTimeout(function(){o.dispatcher(o.field.val())},0),i=o)}),this.addDropdownAdvice(),e.delimChar&&this.addMultiSelectAdvice(e.delimChar)}}}()}),AJS.namespace("jira.widget.autocomplete",null,require("jira/autocomplete/autocomplete")),AJS.namespace("JIRA.AutoComplete",null,require("jira/autocomplete/autocomplete"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/RESTAutoComplete.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira/autocomplete/rest-autocomplete",["jira/autocomplete/autocomplete","jira/util/objects"],function(e,t){"use strict";return function(){var o=t.begetObject(e);return o.dispatcher=function(e){var t=this;if(!(e.length<this.minQueryLength))return void 0===this.responseContainer||null===this.responseContainer?void console.warn("Response container was not initialized, skipping rendering"):void(this.getSavedResponse(e)?(t.renderSuggestions(t.getSavedResponse(e)),t.responseContainer.scrollTop(0)):this.delay(function(){var o=t.getAjaxParams();o.data.query=e,o.success=function(o){t.saveResponse(e,o),t.responseContainer.scrollTop(0),t.renderSuggestions(o)},t._makeRequest(o)},t.queryDelay))},o.getAjaxParams=function(){},o.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},o.saveResponse=function(e,t){"string"==typeof e&&"object"===(void 0===t?"undefined":_typeof(t))&&(this.requested||(this.requested={}),this.requested[e]=t)},o}()}),AJS.namespace("jira.widget.autocomplete.REST",null,require("jira/autocomplete/rest-autocomplete")),AJS.namespace("JIRA.RESTAutoComplete",null,require("jira/autocomplete/rest-autocomplete"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/IssueAutoComplete.js' */
define("jira/autocomplete/issue-autocomplete",["jira/data/parse-options-from-fieldset","jira/field/issue-picker","jira/autocomplete/rest-autocomplete","jira/util/objects","wrm/context-path","jquery"],function(e,t,s,a,i,n){"use strict";var r=i(),d=function(e){var t=a.begetObject(s);return t.getAjaxParams=function(){return{url:r+"/rest/api/2/issue/picker",data:e.ajaxData,dataType:"json",type:"GET"}},t.renderSuggestions=function(s){var a,i=[];if(this.clearResponseContainer(),s&&s.sections&&s.sections.length>0)return a=n("<ul/>").appendTo(this.responseContainer),n(s.sections).each(function(){var t=this,s=n("<div/>").attr("id",e.fieldID+"_s_"+t.id).addClass("yag").text(t.label);if(t.sub&&s.append(n("<span/>").addClass("yagt").text("("+t.sub+")")),a.append(n("<li/>").append(s).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")})),t.msg){var d=n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_n").addClass("yad").text(t.msg);a.append(n("<li/>").append(d).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")}))}t.issues&&t.issues.length>0&&n(t.issues).each(function(){var s;s=/^http/.test(this.img)?this.img:r+this.img;var d=n("<li/>").append(n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_"+this.key).addClass("yad").append(n("<table/>").addClass("yat").attr({cellpadding:"0",cellspacing:"0"}).append(n("<tr/>").append(n("<td/>").append(n("<img/>").attr("src",s))).append(n("<td/>").append(n("<div/>").addClass("yak").html(this.keyHtml))).append(n("<td/>").css("width","100%").html(this.summary)))));a.append(d),i.push([d,this.key])})}),t.addSuggestionControls(i),i},e.minQueryLength=1,e.queryDelay=.25,t.init(e),t};return d.init=function(){n("fieldset.issue-picker-params").each(function(){var s=e(n(this));n("#"+s.fieldId+"-container").add("#"+s.fieldName+"_container").find("a.popup-trigger").click(function(e){var a=r+"/secure/popups/IssuePicker.jspa?";a+="currentIssue="+s.currentIssueKey+"&",a+="singleSelectOnly="+s.singleSelectOnly+"&",a+="showSubTasks="+s.showSubTasks+"&",a+="showSubTasksParent="+s.showSubTaskParent,s.currentProjectId&&""!==s.currentProjectId&&(a+="&selectedProjectId="+s.currentProjectId),t.callback=function(e){var t,a=[];e=JSON.parse(e),s.fieldId&&a&&(t=n("#"+s.fieldId))&&(n.each(e,function(){a.push(this.value)}),t.val(a.join(", ")))};var i=window.open(a,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width=620,height=500,scrollbars=yes,resizable");i.opener=self,i.focus(),e.preventDefault()}),s.fieldId||(s.fieldId=s.fieldName),!0===s.issuePickerEnabled&&d({fieldID:s.fieldId,delimChar:!0===s.singleSelectOnly?void 0:",",ajaxData:s})})},d}),AJS.namespace("jira.widget.autocomplete.Issues",null,require("jira/autocomplete/issue-autocomplete")),AJS.namespace("JIRA.IssueAutoComplete",null,require("jira/autocomplete/issue-autocomplete"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/UserAutoComplete.js' */
define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/field/create-user-picker-popup-trigger","jira/util/browser","jira/util/elements","jira/util/objects","wrm/context-path","jquery"],function(e,t,i,r,a,o,n,l){"use strict";function s(e,t){e.on("click",i.createUserPickerPopupTrigger({urlBase:d,formName:t.formName||e.closest("form").attr("name"),fieldName:t.fieldName,multiSelect:t.multiSelect,fieldConfigId:t.fieldConfigId,projectIds:t.projectId,actionToOpen:t.actionToOpen}))}function u(e,t){p({field:parent?e:null,fieldID:t.fieldName,fieldConfigID:t.fieldConfigId,projectId:t.projectId,delimChar:!1===t.multiSelect?void 0:",",ajaxData:{fieldName:t.fieldName}})}var d=n(),c=d+"/rest/api/1.0/users/picker",p=function(t){function i(e){var t=!1,i=e.closest("form");return i.length&&i.hasClass("submitting")&&(t=!0),t}var n=o.begetObject(e);return n.getAjaxParams=function(){return{url:c,data:{fieldName:t.fieldID,fieldConfigId:t.fieldConfigID,projectId:t.projectId},dataType:"json",type:"GET"}},n.renderSuggestions=function(e){if(i(this.field)||!r.isSelenium()&&!a.elementIsFocused(this.field))return!1;var t=void 0,o=[];return this.clearResponseContainer(),e&&e.users&&e.users.length>0&&(t=l("<ul/>").appendTo(this.responseContainer),l(e.users).each(function(){o.push([l("<li/>").html(this.html).appendTo(t),this.name])})),e.footer&&this.responseContainer.append(l("<div/>").addClass("yui-ac-ft").html(e.footer).css("display","block")),o.length>0&&(n.addSuggestionControls(o),l(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:!0})),o},t.minQueryLength=2,t.queryDelay=.25,n.init(t),n};return p.init=function(e){l("fieldset.user-picker-params",e).each(function(){var i=t(l(this)),r=i.fieldId||i.fieldName,a=l(e).find("#"+r);s(l("#"+r+"_container").find(".popup-trigger"),i),i.userPickerEnabled&&u(a,i)})},p}),AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete")),AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/initAutoCompleteFields.js' */
!function(){"use strict";var e=require("jquery"),r=require("jira/data/parse-options-from-fieldset"),i=require("jira/util/events"),t=require("jira/util/events/reasons"),a=require("jira/util/events/types"),s=require("jira/autocomplete/issue-autocomplete"),l=require("jira/autocomplete/user-autocomplete"),o=require("wrm/context-path"),u=o();i.bind(a.NEW_CONTENT_ADDED,function(e,r,i){i!==t.panelRefreshed&&(l.init(r),s.init(r))}),i.bind(a.NEW_CONTENT_ADDED,function(i,a,s){s!==t.panelRefreshed&&e("fieldset.user-searcher-params",a).each(function(){var i=r(e(this)),t=e("#"+i.fieldId+"_container",a);if(!0===i.userPickerEnabled)var s=l({fieldID:i.fieldId,delimChar:!0===i.multiSelect?",":void 0,ajaxData:{fieldName:i.fieldName}});var o=function(r){var t=e("#"+i.fieldId,a),l=e("#"+i.fieldId+"Image",a),o=e("#"+i.fieldId+"GroupImage",a),u=e("#"+i.fieldId+"_desc",a);"select.list.none"===r?(t.val("").attr("disabled","true"),l.hide(),o.hide(),u.hide()):(t.removeAttr("disabled"),"select.list.group"===r?(l.hide(),o.show(),!0===i.userPickerEnabled&&(s.disable(),u.hide())):(l.show(),o.hide(),!0===i.userPickerEnabled&&(s.enable(),u.show())))};e("#"+i.userSelect,a).change(function(){var r=e(this).find("option:selected").attr("rel");o(r)}).find("option:selected").each(function(){o(e(this).attr("rel"))}),t.find("a.user-popup-trigger").click(function(e){var r=u+"/secure/popups/UserPickerBrowser.jspa?";r+="formName="+i.formName+"&",r+="multiSelect="+i.multiSelect+"&",r+="decorator=popup&",r+="element="+i.fieldId;var t=window.open(r,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self,t.focus(),e.preventDefault()}),t.find("a.group-popup-trigger").click(function(e){var r=u+"/secure/popups/GroupPickerBrowser.jspa?";r+="formName="+i.formName+"&",r+="multiSelect="+i.multiSelect+"&",r+="decorator=popup&",r+="element="+i.fieldId;var t=window.open(r,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self,t.focus(),e.preventDefault()})})})}();
}catch(e){WRMCB(e)};