WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'jira.webresources:version-blocks', location = '/includes/jira/versionblocks/VersionBlocks.js' */
define("jira/versionblocks/version-blocks",["jquery"],function(e){"use strict";var n={ClassNames:{VERSION_LIST:"versions-list",VERSION_CONTAINER:"version-block-container",EXPANDED_CONTENT_CONTAINER:"version-issue-table"},init:function(){function o(n){var o={decorator:"none",contentOnly:!0,noTitle:!0,selectedTab:a(),pid:t.data("project-id"),component:t.data("component-id")};return e.extend(o,n)}function a(){var e=t.data("selected-tab"),n=""+window.document.location.search+window.document.location.hash;return n.indexOf("selectedTab=")>-1&&(e=n.replace(/^.*selectedTab=(.*?)(?:&.*$|$)/,"$1"),e=decodeURIComponent(e)),e}var i=n.ClassNames,t=e("."+i.VERSION_LIST).first(),s=function(){var e;return e=window.document.location.href,e=e.replace(window.document.location.hash,""),e=e.replace(window.document.location.search,"")}();e(document).on("click","a[data-version-block]",function(n){var a=e(this),t=a.closest("."+i.VERSION_CONTAINER),d=t.data("expanded"),r=t.find("."+i.EXPANDED_CONTENT_CONTAINER),c=e("<span class='icon loading'></span>");r.size()||(r=e("<div/>").addClass(i.EXPANDED_CONTENT_CONTAINER).hide().appendTo(t));var l={};l[d?"collapseVersion":"expandVersion"]=t.find("[data-version-id]").data("version-id");var u=e.ajax({url:s,data:o(l),dataType:"json",beforeSend:function(){a.closest("ul").append(e("<li/>").append(c))}});u.always(function(){c.parent("li").remove()}),u.fail(function(){console.log("Failed to load issues for version. User-facing error to do, sorry :(",arguments)}),d?u.done(function(){r.hide()}):u.done(function(n){var o=e("<div/>").html(n.content),a=o.find("."+i.EXPANDED_CONTENT_CONTAINER);r.hide().replaceWith(a).show()}),u.done(function(){t.data("expanded",!d)}),n.preventDefault()})}};return n}),AJS.namespace("JIRA.VersionBlocks",null,require("jira/versionblocks/version-blocks"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/rpc.js' */
var gadgets=gadgets||{};gadgets.rpc=function(){var CALLBACK_NAME="__cb";var DEFAULT_NAME="";var FE_G2C_CHANNEL="__g2c_rpc";var FE_C2G_CHANNEL="__c2g_rpc";var services={};var iframePool=[];var relayUrl={};var useLegacyProtocol={};var authToken={};var callId=0;var callbacks={};var setup={};var sameDomain={};var params={};if(gadgets.util){params=gadgets.util.getUrlParameters()}authToken[".."]=params.rpctoken||params.ifpctok||0;function getRelayChannel(){return typeof window.postMessage==="function"?"wpm":typeof document.postMessage==="function"?"dpm":navigator.product==="Gecko"?"fe":"ifpc"}function setupChannel(){if(relayChannel==="dpm"||relayChannel==="wpm"){window.addEventListener("message",function(packet){try{if(packet&&packet.origin&&packet.origin!=="null"&&typeof packet.data==="string"){if(packet.origin===location.origin){process(gadgets.json.parse(packet.data))}else{AJS.$.get(AJS.contextPath()+"/rest/whitelist/1/check",{url:packet.origin}).done(function(result){if(result&&result.inbound&&result.inbound===true){process(gadgets.json.parse(packet.data))}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}).fail(function(jqXHR,textStatus,errorThrown){AJS.log("RPC: REST "+textStatus,errorThrown)})}}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}catch(e){if(AJS.debug){var origin=packet&&packet.origin?packet.origin:"undefined origin";AJS.log("Error processing gadget rpc message from '"+origin+"': "+e)}}},false)}}var relayChannel=getRelayChannel();setupChannel();services[DEFAULT_NAME]=function(){throw new Error("Unknown RPC service: "+this.s)};services[CALLBACK_NAME]=function(callbackId,result){var callback=callbacks[callbackId];if(callback){delete callbacks[callbackId];callback(result)}};function setupFrame(frameId){if(setup[frameId]){return }if(relayChannel==="fe"){try{var frame=document.getElementById(frameId);frame[FE_G2C_CHANNEL]=function(args){process(gadgets.json.parse(args))}}catch(e){}}setup[frameId]=true}function encodeLegacyData(args){var stringify=gadgets.json.stringify;var argsEscaped=[];for(var i=0,j=args.length;i<j;++i){argsEscaped.push(encodeURIComponent(stringify(args[i])))}return argsEscaped.join("&")}function process(rpc){if(rpc&&typeof rpc.s==="string"&&typeof rpc.f==="string"&&rpc.a instanceof Array){if(authToken[rpc.f]){if(authToken[rpc.f]!=rpc.t){if(AJS.debug){console.log("Invalid auth token received for operation: "+rpc.s)}return }}if(rpc.c){rpc.callback=function(result){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}var result=(services[rpc.s]||services[DEFAULT_NAME]).apply(rpc,rpc.a);if(rpc.c&&typeof result!="undefined"){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}}function callFrameElement(targetId,serviceName,from,rpcData,callArgs){try{if(from!=".."){var fe=window.frameElement;if(typeof fe[FE_G2C_CHANNEL]==="function"){if(typeof fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]!=="function"){fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]=function(args){process(gadgets.json.parse(args))}}fe[FE_G2C_CHANNEL](rpcData);return }}else{var frame=document.getElementById(targetId);if(typeof frame[FE_G2C_CHANNEL]==="function"&&typeof frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL]==="function"){frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL](rpcData);return }}}catch(e){}callIfpc(targetId,serviceName,from,rpcData,callArgs)}function callIfpc(targetId,serviceName,from,rpcData,callArgs){var relay=gadgets.rpc.getRelayUrl(targetId);if(!relay){throw new Error("No relay file assigned for IFPC")}var src=null;if(useLegacyProtocol[targetId]){src=[relay,"#",encodeLegacyData([from,callId,1,0,encodeLegacyData([from,serviceName,"","",from].concat(callArgs))])].join("")}else{src=[relay,"#",targetId,"&",from,"@",callId,"&1&0&",encodeURIComponent(rpcData)].join("")}emitInvisibleIframe(src)}function emitInvisibleIframe(src){var iframe;for(var i=iframePool.length-1;i>=0;--i){var ifr=iframePool[i];try{if(ifr&&(ifr.recyclable||ifr.readyState==="complete")){ifr.parentNode.removeChild(ifr);if(window.ActiveXObject){iframePool[i]=ifr=null;iframePool.splice(i,1)}else{ifr.recyclable=false;iframe=ifr;break}}}catch(e){}}if(!iframe){iframe=document.createElement("iframe");iframe.style.border=iframe.style.width=iframe.style.height="0px";iframe.style.visibility="hidden";iframe.style.position="absolute";iframe.onload=function(){this.recyclable=true};iframePool.push(iframe)}iframe.src=src;setTimeout(function(){document.body.appendChild(iframe)},0)}function callSameDomain(target,rpc){if(typeof sameDomain[target]==="undefined"){sameDomain[target]=false;var targetEl=null;if(target===".."){targetEl=parent}else{targetEl=frames[target]}try{sameDomain[target]=targetEl.gadgets.rpc.receiveSameDomain}catch(e){}}if(typeof sameDomain[target]==="function"){sameDomain[target](rpc);return true}return false}if(gadgets.config){function init(config){if(config.rpc.parentRelayUrl.substring(0,7)==="http://"){relayUrl[".."]=config.rpc.parentRelayUrl}else{var params=document.location.search.substring(0).split("&");var parentParam="";for(var i=0,param;param=params[i];++i){if(param.indexOf("parent=")===0){parentParam=decodeURIComponent(param.substring(7));break}}relayUrl[".."]=parentParam+config.rpc.parentRelayUrl}useLegacyProtocol[".."]=!!config.rpc.useLegacyProtocol}var requiredConfig={parentRelayUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("rpc",requiredConfig,init)}return{register:function(serviceName,handler){if(serviceName==CALLBACK_NAME){throw new Error("Cannot overwrite callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot overwrite default service:"+" use registerDefault")}services[serviceName]=handler},unregister:function(serviceName){if(serviceName==CALLBACK_NAME){throw new Error("Cannot delete callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot delete default service:"+" use unregisterDefault")}delete services[serviceName]},registerDefault:function(handler){services[""]=handler},unregisterDefault:function(){delete services[""]},call:function(targetId,serviceName,callback,var_args){++callId;targetId=targetId||"..";if(callback){callbacks[callId]=callback}var from="..";if(targetId===".."){from=window.name}var rpc={s:serviceName,f:from,c:callback?callId:0,a:Array.prototype.slice.call(arguments,3),t:authToken[targetId]};if(callSameDomain(targetId,rpc)){return }var rpcData=gadgets.json.stringify(rpc);var channelType=relayChannel;if(useLegacyProtocol[targetId]){channelType="ifpc"}switch(channelType){case"dpm":var targetDoc=targetId===".."?parent.document:frames[targetId].document;targetDoc.postMessage(rpcData);break;case"wpm":var targetWin=targetId===".."?parent:frames[targetId];targetWin.postMessage(rpcData,relayUrl[targetId]);break;case"fe":callFrameElement(targetId,serviceName,from,rpcData,rpc.a);break;default:callIfpc(targetId,serviceName,from,rpcData,rpc.a);break}},getRelayUrl:function(targetId){return relayUrl[targetId]},setRelayUrl:function(targetId,url,opt_useLegacy){relayUrl[targetId]=url;useLegacyProtocol[targetId]=!!opt_useLegacy},setAuthToken:function(targetId,token){authToken[targetId]=token;setupFrame(targetId)},getRelayChannel:function(){return relayChannel},receive:function(fragment){if(fragment.length>4){process(gadgets.json.parse(decodeURIComponent(fragment[fragment.length-1])))}},receiveSameDomain:function(rpc){rpc.a=Array.prototype.slice.call(rpc.a);window.setTimeout(function(){process(rpc)},0)}}}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/util.js' */
Function.prototype.inherits=function(parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;this.superClass_=parentCtor.prototype;this.prototype=new tempCtor();this.prototype.constructor=this};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/json.js' */
var gadgets=gadgets||{};gadgets.json=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i])||"null")}return"["+a.join(",")+"]"}for(k in value){if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'js/gadgets-core.js' */
var gadgets=gadgets||{};gadgets.error={};gadgets.error.SUBCLASS_RESPONSIBILITY="subclass responsibility";gadgets.error.TO_BE_DONE="to be done";gadgets.log=function(message){if(window.console&&console.log){console.log(message)}else{var logEntry=document.createElement("div");logEntry.className="gadgets-log-entry";logEntry.innerHTML=message;document.body.appendChild(logEntry)}};gadgets.Extensible=function(){};gadgets.Extensible.prototype.setDependencies=function(dependencies){for(var p in dependencies){this[p]=dependencies[p]}};gadgets.Extensible.prototype.getDependencies=function(name){return this[name]};gadgets.UserPrefStore=function(){};gadgets.UserPrefStore.prototype.getPrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.UserPrefStore.prototype.savePrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.DefaultUserPrefStore=function(){gadgets.UserPrefStore.call(this)};gadgets.DefaultUserPrefStore.inherits(gadgets.UserPrefStore);gadgets.DefaultUserPrefStore.prototype.getPrefs=function(gadget){};gadgets.DefaultUserPrefStore.prototype.savePrefs=function(gadget){};gadgets.GadgetService=function(){};gadgets.GadgetService.prototype.setHeight=function(elementId,height){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setTitle=function(gadget,title){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setUserPref=function(id){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.IfrGadgetService=function(){gadgets.GadgetService.call(this);var service=this;gadgets.rpc.register("resize_iframe",function(){service.setHeight.apply(this,arguments)});gadgets.rpc.register("set_pref",function(){service.setUserPref.apply(this,arguments)});gadgets.rpc.register("set_title",function(){service.setTitle.apply(this,arguments)});gadgets.rpc.register("requestNavigateTo",function(){service.requestNavigateTo.apply(this,arguments)})};gadgets.IfrGadgetService.inherits(gadgets.GadgetService);gadgets.IfrGadgetService.prototype.setHeight=function(height){if(height>gadgets.container.maxheight_){height=gadgets.container.maxheight_}var element=document.getElementById(this.f);if(element){element.style.height=height+"px"}};gadgets.IfrGadgetService.prototype.requestNavigateTo=function(view,opt_params){var id=this.getGadgetIdFromModuleId(this.f);var url=this.getUrlForView(view);if(opt_params){var paramStr=JSON.stringify(opt_params);if(paramStr.length>0){url+="&appParams="+encodeURIComponent(paramStr)}}if(url&&document.location.href.indexOf(url)==-1){document.location.href=url}};gadgets.IfrGadgetService.prototype.getUrlForView=function(view){if(view==="canvas"){return"/canvas"}else{if(view==="profile"){return"/profile"}else{return null}}};gadgets.IfrGadgetService.prototype.getGadgetIdFromModuleId=function(moduleId){return parseInt(moduleId.match(/_([0-9]+)$/)[1],10)};gadgets.LayoutManager=function(){};gadgets.LayoutManager.prototype.getGadgetChrome=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.StaticLayoutManager=function(){gadgets.LayoutManager.call(this)};gadgets.StaticLayoutManager.inherits(gadgets.LayoutManager);gadgets.StaticLayoutManager.prototype.setGadgetChromeIds=function(gadgetChromeIds){this.gadgetChromeIds_=gadgetChromeIds};gadgets.StaticLayoutManager.prototype.getGadgetChrome=function(gadget){var chromeId=this.gadgetChromeIds_[gadget.id];return chromeId?document.getElementById(chromeId):null};gadgets.FloatLeftLayoutManager=function(layoutRootId){gadgets.LayoutManager.call(this);this.layoutRootId_=layoutRootId};gadgets.FloatLeftLayoutManager.inherits(gadgets.LayoutManager);gadgets.FloatLeftLayoutManager.prototype.getGadgetChrome=function(gadget){var layoutRoot=document.getElementById(this.layoutRootId_);if(layoutRoot){var chrome=document.createElement("div");chrome.className="gadgets-gadget-chrome";chrome.style.cssFloat="left";layoutRoot.appendChild(chrome);return chrome}else{return null}};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.gadgets.embedded:gadget-container-resources', location = 'js/gadgets-container.js' */
gadgets.Container=function(){this.parentUrl_="http://"+document.location.host;this.country_="ALL";this.language_="ALL";this.view_="default";this.nocache_=1;this.maxheight_=2147483647};gadgets.Container.inherits(gadgets.Extensible);gadgets.Container.prototype.userPrefStore=new gadgets.DefaultUserPrefStore();gadgets.Container.prototype.gadgetService=new gadgets.GadgetService();gadgets.Container.prototype.layoutManager=new gadgets.StaticLayoutManager();gadgets.Container.prototype.setParentUrl=function(url){this.parentUrl_=url};gadgets.Container.prototype.setCountry=function(country){this.country_=country};gadgets.Container.prototype.setNoCache=function(nocache){this.nocache_=nocache};gadgets.Container.prototype.setLanguage=function(language){this.language_=language};gadgets.Container.prototype.setView=function(view){this.view_=view};gadgets.Container.prototype.setMaxHeight=function(maxheight){this.maxheight_=maxheight};gadgets.Container.prototype.getGadgetKey_=function(instanceId){return"gadget_"+instanceId};gadgets.IfrContainer=function(){gadgets.Container.call(this)};gadgets.IfrContainer.inherits(gadgets.Container);gadgets.IfrContainer.prototype.gadgetService=new gadgets.IfrGadgetService();gadgets.IfrContainer.prototype.setParentUrl=function(url){if(!url.match(/^http[s]?:\/\//)){url=document.location.href.match(/^[^?#]+\//)[0]+url}this.parentUrl_=url};gadgets.container=new gadgets.IfrContainer();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.gadgets.embedded:gadget-standalone-resources', location = 'js/gadgets-standalone.js' */
new gadgets.IfrGadgetService();gadgets.IfrGadgetService.prototype.setTitle=function(title){};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:userprofile', location = '/includes/jira/dialog/UserProfileDialog.js' */
define("jira/dialog/user-profile-dialog",["jira/dialog/form-dialog","jquery"],function(i,e){"use strict";return i.extend({_getDefaultOptions:function(){return e.extend(this._super(),{notifier:"#userdetails-notify"})},_handleSubmitResponse:function(){this.serverIsDone&&(this.options.autoClose&&this.hide(),this._reloadOrNotify())},_reload:function(){return!1},show:function(){this._super(),this._hideNotifier()},_reloadOrNotify:function(){this._reload()?window.location.reload():this._showNotifier()},_showNotifier:function(){e(this.options.notifier).removeClass("hidden")},_hideNotifier:function(){e(this.options.notifier).addClass("hidden")}})}),AJS.namespace("AJS.UserProfilePopup",null,require("jira/dialog/user-profile-dialog")),AJS.namespace("JIRA.UserProfileDialog",null,require("jira/dialog/user-profile-dialog"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:userprofile', location = '/includes/jira/dialog/EditProfileDialog.js' */
define("jira/dialog/edit-profile-dialog",["jira/dialog/user-profile-dialog","jquery"],function(e,t){"use strict";return e.extend({_handleSubmitResponse:function(e,t,i){this.serverIsDone&&(this._updateName(),this._updateMail(),this._super(e,t,i))},_updateName:function(){var e=t("#up-d-fullname").text(),i=t("#edit-profile-fullname").val();t("#up-d-fullname").text(i),t("#up-user-title-name").text(i),t("a[href*='ViewProfile.jspa']").each(function(){var a=t(this);a.text().indexOf(e)>=0&&a.text(i)}),window.frames["gadget-1"]&&window.frames["gadget-1"].AJS&&window.frames["gadget-1"].jQuery("a[href*='ViewProfile.jspa']").each(function(){var a=t(this);a.text().indexOf(e)>=0&&a.text(i)})},_updateMail:function(){var e=t("#edit-profile-email").val(),i=t("#up-d-email");0===i.find("a").length?/\sat\s.*\sdot\s/.test(i.text())?i.text(e.replace(/@/g," at ").replace(/\./g," dot ")):i.text(e):i.find("a").attr("href","mailto:"+e).text(e)}})}),AJS.namespace("JIRA.EditProfileDialog",null,require("jira/dialog/edit-profile-dialog"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:userprofile', location = '/includes/jira/dialog/EditPreferencesDialog.js' */
define("jira/dialog/edit-preferences-dialog",["jira/dialog/user-profile-dialog","jquery"],function(e,t){"use strict";return e.extend({_getDefaultOptions:function(){return t.extend(this._super(),{notifier:"#userprofile-notify"})},_handleSubmitResponse:function(e,t,i){this.serverIsDone&&(this._updatePageSize(),this._updateEmail(),this._updateSharing(),this._updateOwnNotifications(),this._updateLocale(),this._updateTimezone(),this._updateKeyboardShortcutsNotifications(),this._updateAutowatch(),this._updateExternalLinks(),this._super(e,t,i))},_updatePageSize:function(){var e=t("#update-user-preferences-pagesize").val();t("#up-p-pagesize").text(e)},_updateEmail:function(){var e=t("option:selected","#update-user-preferences-mailtype").text();t("#up-p-mimetype").text(e)},_updateSharing:function(){"false"!==t("option:selected","#update-user-preferences-sharing").val()?(t("#up-p-share-private").show(),t("#up-p-share-public").hide()):(t("#up-p-share-private").hide(),t("#up-p-share-public").show())},_updateOwnNotifications:function(){"false"!==t("option:selected","#update-user-preferences-own-notifications").val()?(t("#up-p-notifications_on").show(),t("#up-p-notifications_off").hide()):(t("#up-p-notifications_on").hide(),t("#up-p-notifications_off").show())},_updateLocale:function(){var e=t.trim(t("option:selected","#update-user-preferences-locale").text());t.trim(t("#up-p-locale").text())!==e&&(this._reload=function(){return!0})},_updateTimezone:function(){var e=t("option:selected","#defaultUserTimeZone"),i=t.trim(e.text());"JIRA"!==e.val()?t("#up-p-jira-default").hide():t("#up-p-jira-default").show(),t("#up-p-timezone-label").text(i)},_updateKeyboardShortcutsNotifications:function(){var e=t("option:selected","#update-user-preferences-keyboard-shortcuts").val();(t("#up-p-keyboard-shortcuts-enabled").is(":visible")?"true":"false")!==e&&("false"!==e?(t("#up-p-keyboard-shortcuts-enabled").show(),t("#up-p-keyboard-shortcuts-disabled").hide()):(t("#up-p-keyboard-shortcuts-enabled").hide(),t("#up-p-keyboard-shortcuts-disabled").show()),this._reload=function(){return!0})},_updateAutowatch:function(){"false"!==t("option:selected","#update-user-preferences-autowatch").val()?(t("#up-p-autowatch-enabled").show(),t("#up-p-autowatch-disabled").hide()):(t("#up-p-autowatch-enabled").hide(),t("#up-p-autowatch-disabled").show())},_updateExternalLinks:function(){"true"===t("#update-user-preferences-external-links-new-window").val()?(t("#up-p-external-links-enabled").show(),t("#up-p-external-links-disabled").hide()):(t("#up-p-external-links-enabled").hide(),t("#up-p-external-links-disabled").show())}})}),AJS.namespace("JIRA.EditPreferencesDialog",null,require("jira/dialog/edit-preferences-dialog"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:userprofile', location = '/includes/jira/dialog/initProfileDialogs.js' */
define("jira/dialog/init-profile-dialogs",["jira/ajs/layer/layer-constants","jira/versionblocks/version-blocks","jira/dialog/user-profile-dialog","jira/dialog/edit-profile-dialog","jira/dialog/edit-preferences-dialog","jira/ajs/dropdown/dropdown","jquery","exports"],function(i,e,r,o,n,a,t,l){"use strict";function s(){var e=t("#quicklinks");a.create({trigger:e.find(".aui-dd-link"),content:e.find(".aui-list"),alignment:i.RIGHT})}l.init=function(){s(),e.init(),new o({trigger:"#edit_profile_lnk",autoClose:!0}),new r({trigger:"#view_change_password",autoClose:!0}),new r({trigger:"#view_clear_rememberme",autoClose:!0}),new n({trigger:"#edit_prefs_lnk",autoClose:!0}),"#change_password_now"===window.location.hash&&t("#view_change_password").click()}}),require(["jira/dialog/init-profile-dialogs","jquery"],function(i,e){"use strict";e(function(){i.init()})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-tzdetect-plugin:tzdetect-userprofile-component', location = 'userprofile/tzdetect-checker.js' */
define("jira-tzdetect/userprofile-checker",["jira/analytics","jquery"],function(e,d){var a={hash:location.hash.replace(/^#/,""),zoneId:"",zoneParts:[],zoneKeywords:{set:!0,other:!0,ignore:!1},track:function(a,c){a={name:"tzdetect.userprofile."+a};c&&(a.data=c);e.send(a)},checkZoneId:function(){if(0===a.hash.indexOf("zone-")){a.zoneId=a.hash.replace(/^zone-/,"");a.zoneId in a.zoneKeywords?a.track(a.zoneId):a.track("prefillzone",{zoneId:a.zoneId});var b=a.zoneId.split("/");a.zoneParts=b.slice(0,1).concat(b.slice(1).join("/"));
b=a.zoneKeywords[a.zoneId];void 0!==b&&!0!==b||a.openPrefsDialog()}},openPrefsDialog:function(){var b=d("#edit_prefs_lnk");b.length&&(a.zoneId in a.zoneKeywords||a.addDialogCallback(),b.click())},addDialogCallback:function(){d(document).on("dialogContentReady",function f(c,e){"#edit_prefs_lnk"===e.options.trigger&&(d(document).off("dialogContentReady",f),a.setCascadingSelectValues())})},setCascadingSelectValues:function(){var b=d("#timeZoneRegion"),c=d("#defaultUserTimeZone");b.val(a.zoneParts[0]).trigger("change");
c.val(a.zoneParts.join("/")).trigger("change");setTimeout(function(){c.focus()},0)}};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-tzdetect-plugin:tzdetect-userprofile', location = 'userprofile/tzdetect-userprofile-init.js' */
require(["jira-tzdetect/userprofile-checker","jquery"],function(a,b){b(a.checkZoneId)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/Avatar.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("jira/ajs/avatarpicker/avatar",["jira/lib/class"],function(t){"use strict";return t.extend({init:function(t){this._id=t.id,this._isSystemAvatar=t.isSystemAvatar,this._isSelected=t.isSelected,this._urls=t.urls},setUnSelected:function(){this._isSelected=!1},setSelected:function(){this._isSelected=!0},isSelected:function(){return!!this._isSelected},isSystemAvatar:function(){return this._isSystemAvatar},getId:function(){return this._id},getUrl:function(t){return this._urls[t]},toJSON:function(){return{id:this._id,isSystemAvatar:this._isSystemAvatar,isSelected:this._isSelected,urls:this._urls}}})}),define("jira/ajs/avatarpicker/avatar-factory",["jira/ajs/avatarpicker/avatar","exports"],function(t,e){"use strict";e.createCustomAvatar=function(e){return e.isSystemAvatar=!1,new t(e)},e.createSystemAvatar=function(e){return e.isSystemAvatar=!0,new t(e)}}),define("jira/ajs/avatarpicker/avatar/sizes",["exports"],function(t){"use strict";t.getSizeObjectFromName=function(e){return"object"===(void 0===e?"undefined":_typeof(e))?e:t.LARGE.param===e?t.LARGE:t.MEDIUM.param===e?t.MEDIUM:t.SMALL.param===e?t.SMALL:"xsmall"===e?t.SMALL:t.LARGE},t.LARGE={param:"large",height:48,width:48},t.MEDIUM={param:"medium",width:32,height:32},t.SMALL={param:"small",width:16,height:16}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarManager.js' */
define("jira/ajs/avatarpicker/avatar-manager",["jira/util/formatter","jira/lib/class","wrm/context-path","jquery"],function(t,a,r,e){"use strict";var s=r();return a.extend({init:function(t){this.store=t.store,this.ownerId=t.ownerId,this.username=t.username,this.anonymousAvatarId=t.anonymousAvatarId,this.avatarSrcBaseUrl=t.avatarSrcBaseUrl},selectAvatar:function(t,a){return this.store.selectAvatar(t,a)},getById:function(t){return this.store.getById(t)},destroy:function(t,a){this.store.destroy(t,a)},update:function(t,a){this.store.update(t,a)},add:function(t,a){this.store._add(t,a)},getAllSystemAvatars:function(){return this.store.getAllSystemAvatars()},getAllCustomAvatars:function(){return this.store.getAllCustomAvatars()},getSelectedAvatar:function(){return this.store.getSelectedAvatar()},getAllAvatars:function(){return this.store.getAllAvatars()},getAllAvatarsRenderData:function(t){var a,r=this,e=this.getAllAvatars(),s={system:[],custom:[]};for(a=0;a<e.system.length;a++)s.system.push(r.getAvatarRenderData(e.system[a],t));for(a=0;a<e.custom.length;a++)s.custom.push(r.getAvatarRenderData(e.custom[a],t));return s},getAvatarRenderData:function(t,a){var r=t.toJSON();return r.src=this.getAvatarSrc(t,a),r.width=a.width,r.height=a.height,r},refreshStore:function(t){this.store.refresh(t)},getAvatarSrc:function(a,r){return this.store.isTempAvatar(a)?s+"/secure/temporaryavatar?"+e.param({cropped:!0,magic:(new Date).getTime(),size:r.param}):a.getUrl(t.format("{0}x{1}",r.height,r.width))},createTemporaryAvatar:function(t,a){this.store.createTemporaryAvatar(t,a)},createAvatarFromTemporary:function(t,a){this.store.createAvatarFromTemporary(t,a)},getAnonymousAvatarId:function(){return this.anonymousAvatarId}})}),define("jira/ajs/avatarpicker/avatar-manager-factory",["jira/ajs/avatarpicker/avatar-store","jira/ajs/avatarpicker/avatar-manager","wrm/context-path","exports"],function(t,a,r,e){"use strict";var s=r();e.createUniversalAvatarManager=function(r){var e,n="",o="",i="",v="";if(r.projectId){var u=s+"/rest/api/latest/universal_avatar/type/"+r.avatarType+"/owner/"+r.projectId;e=u;var c=u+"/avatar";n=null,o=u+"/temp",i=c,v=c}else e=s+"/rest/api/latest/avatar/project/system",o=s+"/rest/api/latest/avatar/project/temporary",i=s+"/rest/api/latest/avatar/project/temporaryCrop";var l=new t({restQueryUrl:e,restUpdateUrl:n,restCreateTempUrl:o,restUpdateTempUrl:i,restSingleAvatarUrl:v,defaultAvatarId:r.defaultAvatarId});return new a({store:l,ownerId:r.projectId,avatarSrcBaseUrl:s+"/secure/projectavatar"})},e.createProjectAvatarManager=function(t){return t.avatarType="project",e.createUniversalAvatarManager(t)},e.createUserAvatarManager=function(r){var e=s+"/rest/api/latest/user",n=new t({restQueryUrl:e+"/avatars",restUpdateUrl:e+"/avatar",restCreateTempUrl:e+"/avatar/temporary",restUpdateTempUrl:e+"/avatar",restSingleAvatarUrl:e+"/avatar",restParams:{username:r.username},defaultAvatarId:r.defaultAvatarId});return new a({store:n,username:r.username,avatarSrcBaseUrl:s+"/secure/useravatar"})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarStore.js' */
define("jira/ajs/avatarpicker/avatar-store",["jira/util/urls","jira/util/formatter","jira/ajs/avatarpicker/avatar-util","jira/ajs/avatarpicker/avatar-factory","jira/ajs/ajax/smart-ajax","jira/lib/class","jquery"],function(t,e,r,a,s,i,o){"use strict";return i.extend({TEMP_ID:"TEMP",init:function(e){if(!e.restQueryUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restQueryUrl], The rest url for querying avatars (see class description)");if(!e.restCreateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restCreateTempUrl], The rest url for creating a temporary avatar (see class description)");if(!e.restUpdateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restUpdateTempUrl], The rest url for updating a temporary avatar (see class description)");if(!e.defaultAvatarId)throw new Error("JIRA.AvatarStore.init: You must specify [defaultAvatarId] to the contructor so the store knows what to select if you delete the selected one");this.restQueryUrl=e.restQueryUrl,this.restUpdateUrl=e.restUpdateUrl,this.restCreateTempUrl=e.restCreateTempUrl,this.restUpdateTempUrl=e.restUpdateTempUrl,this.restSingleAvatarUrl=e.restSingleAvatarUrl,this.restParams=e.restParams||{},this.restParams.atl_token=t.atl_token(),this.defaultAvatarId=e.defaultAvatarId,this.avatars={system:[],custom:[]}},_buildCompleteUrl:function(t){var r=t;if(this.restParams){var a="";for(var s in this.restParams)Object.prototype.hasOwnProperty.call(this.restParams,s)&&(a+=e.format("&{0}={1}",encodeURIComponent(s),encodeURIComponent(this.restParams[s])));r+="?"+a.substr(1)}return r},getById:function(t){var e;return o.each(this.avatars.system,function(r,a){if(this.getId()===t)return e=a,!1}),e||o.each(this.avatars.custom,function(r,a){if(this.getId()===t)return e=a,!1}),e},isTempAvatar:function(t){return t.getId()===this.TEMP_ID},_selectAvatar:function(t){var e=this.getSelectedAvatar();e&&e.setUnSelected(),t.setSelected()},selectAvatar:function(t,e){var r=this;if(!t)throw new Error("JIRA.AvatarStore.selectAvatar: Cannot select Avatar that does not exist");this.restUpdateUrl?s.makeRequest({type:"PUT",contentType:"application/json",dataType:"json",url:this._buildCompleteUrl(this.restUpdateUrl),data:JSON.stringify(t.toJSON()),success:function(){r._selectAvatar(t),e.success&&e.success.call(this,t)},error:e.error}):(r._selectAvatar(t),e.success&&e.success.call(this,t))},_destory:function(t){var e=o.inArray(t,this.avatars.custom);if(-1===e)throw new Error("JIRA.AvatarStore._destroy: Cannot remove avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");this.avatars.custom.splice(e,1)},destroy:function(t,e){var r=this;if(e=e||{},!t)throw new Error("JIRA.AvatarStore.destroy: Cannot delete Avatar that does not exist");s.makeRequest({type:"DELETE",url:this.getRestUrlForAvatar(t),success:function(){r._destory(t),t.isSelected()?r.selectAvatar(r.getById(r.defaultAvatarId),e):e.success&&e.success.apply(this,arguments)},error:e.error})},getSelectedAvatar:function(){for(var t=0;t<this.avatars.custom.length;t++)if(this.avatars.custom[t].isSelected())return this.avatars.custom[t];for(t=0;t<this.avatars.system.length;t++)if(this.avatars.system[t].isSelected())return this.avatars.system[t]},_update:function(t){var e=this;if(!this.getById(t.getId()))throw new Error("JIRA.AvatarStore._update: Cannot update avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");o.each(this.avatars.custom,function(r){this.getId()===t.getId()&&(e.avatars.custom[r]=t)})},update:function(t,e){var r=this;e=e||{},s.makeRequest({type:"PUT",url:this.getRestUrlForAvatar(t),error:e.error,success:function(){r._update(t),e.success&&e.success.apply(this,arguments)}})},_add:function(t){t.isSystemAvatar()?this.avatars.system.push(t):this.avatars.custom.push(t)},createAvatarFromTemporary:function(t,e){var r=this;e=e||{},this.restUpdateTempUrl&&s.makeRequest({type:"POST",url:this._buildCompleteUrl(this.restUpdateTempUrl),data:JSON.stringify(t),contentType:"application/json",dataType:"json",success:function(t){t||(t={id:r.TEMP_ID,isSelected:!0});var s=a.createCustomAvatar(t);r._add(s),e.success&&e.success.call(this,t)},error:e.error})},createTemporaryAvatar:function(t,e){e=o.extend(!0,{},e,{params:this.restParams}),r.uploadTemporaryAvatar(this.restCreateTempUrl,t,e)},_refresh:function(t){var e=this;e.avatars.system=[],e.avatars.custom=[],t.system&&o.each(t.system,function(t,r){e.avatars.system.push(a.createSystemAvatar(r))}),t.custom&&o.each(t.custom,function(t,r){e.avatars.custom.push(a.createCustomAvatar(r))})},refresh:function(t){var e=this,r=this.getById(e.TEMP_ID);t=t||{},s.makeRequest({url:this._buildCompleteUrl(this.restQueryUrl),error:t.error,success:function(a){e._refresh(a),r&&e._add(r),t.success&&t.success.apply(this,arguments)}})},getAllAvatars:function(){return this.avatars},getAllSystemAvatars:function(){return this.avatars.system},getAllCustomAvatars:function(){return this.avatars.custom},getRestUrlForAvatar:function(t){return this._buildCompleteUrl(this.restSingleAvatarUrl+"/"+t.getId())}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarUtil.js' */
define("jira/ajs/avatarpicker/avatar-util",["jira/util/urls","jira/util/logger","jira/attachment/inline-attach","jquery"],function(e,r,t,a){"use strict";var n={uploadUsingIframeRemoting:function(o,s,i){i=i||{};var l=s.val(),c=new t.Form(new t.FileInput(s,!1)),u=c.addStaticProgress(l),d=c.cloneFileInput();c.fileSelector.clear();var g=new t.Timer(function(){!this.cancelled&&u.show()},this),f=new t.FormUpload({$input:d,url:o,params:a.extend({},i.params,{filename:l,atl_token:e.atl_token()}),scope:this,before:function(){!this.cancelled&&u.start()},success:function(e,r){e.errorMessages&&e.errorMessages.length?c.addErrorWithFileName(e.errorMessages[0],l,n.getErrorTarget(c)):i.success&&i.success(e,r)},error:function(e){r.log(e),this.cancelled||(e.indexOf("SecurityTokenMissing")>=0?c.addError(t.Text.tr("upload.xsrf.timeout",l),n.getErrorTarget(c)):c.addError(t.Text.tr("upload.error.unknown",l),n.getErrorTarget(c)))},after:function(){g.cancel(),u.remove(),this.cancelled||c.enable()}});u.onCancel(function(){f.abort()}),f.upload()},uploadUsingFileApi:function(r,o,s){var i,l,c=o[0].files[0],u=new t.Form(new t.FileInput(o,!1)),d=u.addProgress(c);s=s||{},i=new t.Timer(function(){d.show()}),l=new t.AjaxUpload({file:c,params:a.extend({},s.params,{filename:c.name,size:c.size,atl_token:e.atl_token()}),scope:this,url:r,before:function(){o.hide(),d.start()},progress:function(e){d.progress.$progress.parent().parent().show(),d.update(e)},success:function(e,r){e.errorMessages&&e.errorMessages.length?u.addErrorWithFileName(e.errorMessages[0],c.name,n.getErrorTarget(u)):201===r&&s.success(e,r)},error:function(e,r){r<0?u.addError(e,n.getErrorTarget(u)):u.addError(t.Text.tr("upload.error.unknown",c.name),n.getErrorTarget(u)),s.error&&s.error(e,r)},after:function(){i.cancel(),d.finish().remove(),o.val("").show()}}),l.upload(),d.onCancel(function(){l.abort()})},getErrorTarget:function(e){return{$element:e.$form.find(".error")}},uploadTemporaryAvatar:function(e,r,a){t.AjaxPresenter.isSupported(r)?this.uploadUsingFileApi(e,r,a):this.uploadUsingIframeRemoting(e,r,a)}};return n});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarPicker.js' */
define("jira/ajs/avatarpicker/avatar-picker",["jira/util/logger","jira/util/formatter","jira/util/strings","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/ajax/smart-ajax","jira/dialog/dialog","jira/ajs/control","aui/message","jquery"],function(a,e,t,r,i,n,c,o,d){"use strict";return c.extend({init:function(a){this.avatarManager=a.avatarManager,this.avatarRenderer=a.avatarRenderer,this.imageEditor=a.imageEditor,this.size=a.size,this.selectCallback=a.select,this.cropperDialog=null,this.initialSelection=a.initialSelection},render:function(a){var e=this;this.avatarManager.refreshStore({success:function(){e.cropperDialog instanceof n&&(e.cropperDialog.hide(),delete e.cropperDialog),e.element=d('<div id="jira-avatar-picker" />'),e.element.html(JIRA.Templates.AvatarPicker.picker({avatars:e.avatarManager.getAllAvatarsRenderData(e.size)})),e._assignEvents("selectAvatar",e.element.find(".jira-avatar button")),e._assignEvents("deleteAvatar",e.element.find(".jira-delete-avatar")),e._assignEvents("uploader",e.element.find("#jira-avatar-uploader")),void 0!==e.initialSelection&&e.getAvatarElById(e.initialSelection).addClass("jira-selected-avatar"),a(e.element)},error:function(t,r,i,n){e.appendErrorContent(e.element,n),a(e.element)}})},appendErrorContent:function(a,e){try{var r=JSON.parse(e.data);r&&r.errorMessages?d.each(r.errorMessages,function(e,r){o.error(a,{body:t.escapeHtml(r),closeable:!1,shadowed:!1})}):a.append(i.buildDialogErrorContent(e,!0))}catch(t){a.append(i.buildDialogErrorContent(e,!0))}},uploadTempAvatar:function(e){var t=this;this.avatarManager.createTemporaryAvatar(e,{success:function(a){a.id?t.render(function(){t.selectAvatar(a.id)}):(e.val(""),t.cropperDialog=new n({id:"project-avatar-cropper",width:560,content:function(e){function r(){var a=i.find("input[type=submit]"),e=d("<span class='icon throbber loading'></span>");return a.attr("aria-disabled","true").attr("disabled",""),a.before(e),function(){e.remove(),a.removeAttr("aria-disabled").removeAttr("disabled")}}var i=t.imageEditor.render(a);t.imageEditor.edit({confirm:function(a){var e=r();t.avatarManager.createAvatarFromTemporary(a,{success:function(a){t.render(function(){t.selectAvatar(a.id)})},error:e})}}),i.find(".cancel").click(function(){t.cropperDialog.hide()}),e(i)}}),t.cropperDialog.bind("dialogContentReady",function(){d(t).trigger(r.LOADED)}),t.cropperDialog.bind("Dialog.hide",function(){d(t).trigger(r.DISMISSED)}),t.cropperDialog.show())},error:function(){a.log(arguments)}})},getAvatarElById:function(a){return this.element.find(".jira-avatar[data-id='"+a+"']")},selectAvatar:function(a){var e=this.avatarManager.getById(a),t=this;this.avatarManager.selectAvatar(this.avatarManager.getById(a),{error:function(){},success:function(){t.getAvatarElById(a).remove(),t.selectCallback&&t.selectCallback.call(t,e,t.avatarManager.getAvatarSrc(e,t.size))}})},deleteAvatar:function(a){var t=this;confirm("\u786e\u5b9e\u8981\u5220\u9664\u8fd9\u4e2a\u56fe\u6807\uff1f")&&this.avatarManager.destroy(this.avatarManager.getById(a),{error:function(){},success:function(){var e=t.avatarManager.getSelectedAvatar(),r=t.getAvatarElById(a);r.fadeOut(function(){r.remove()}),e.getId()!==a&&(t.getAvatarElById(e.getId()).addClass("jira-selected-avatar"),t.selectCallback.call(t,e,t.avatarManager.getAvatarSrc(e,t.size),!0))}})},_events:{uploader:{change:function(a,e){this.uploadTempAvatar(e)}},deleteAvatar:{click:function(a,e){this.deleteAvatar(e.attr("data-id"))}},selectAvatar:{click:function(a,e){"button"===e[0].tagName.toLowerCase()&&this.selectAvatar(e.attr("data-id"))}}}})}),define("jira/ajs/avatarpicker/avatar-picker/image-editor",["jira/ajs/control","jquery"],function(a,e){"use strict";var t=a.extend({render:function(a){return this.element=e('<div id="avatar-picker-image-editor"/>').html(JIRA.Templates.AvatarPicker.imageEditor(a)),this.element},edit:function(a){var t=this,r=this.element.find(".avataror");a=a||{},r.unbind(),r.bind("AvatarImageLoaded",function(){a.ready&&a.ready()}),r.find("img").load(function(){r.avataror({previewElement:t.element.find(".jira-avatar-cropper-header"),parent:t.element})}),this.element.find("#avataror").submit(function(t){t.preventDefault(),a.confirm&&a.confirm({cropperOffsetX:e("#avatar-offsetX").val(),cropperOffsetY:e("#avatar-offsetY").val(),cropperWidth:e("#avatar-width").val()})}).find(".cancel").click(function(e){e.preventDefault(),a.cancel&&a.cancel()})}});return t.LOADED="imageEditorLoaded",t.DISMISSED="imageEditorDismissed",t}),define("jira/ajs/avatarpicker/avatar-picker-factory",["jira/util/browser","jira/util/formatter","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/avatarpicker/avatar-manager-factory","jira/ajs/avatarpicker/avatar/sizes","jira/dialog/form-dialog","wrm/context-path","wrm/data","wrm/require","jquery","exports"],function(a,e,t,r,i,n,c,o,d,s,l,v){"use strict";v.createUniversalAvatarPicker=function(a){return new t({avatarManager:i.createUniversalAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,avatarType:a.avatarType}),initialSelection:a.initialSelection,imageEditor:new r,size:a.hasOwnProperty("avatarSize")?a.avatarSize:n.LARGE,select:a.select})},v.createProjectAvatarPicker=function(a){return new t({avatarManager:i.createProjectAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId}),imageEditor:new r,size:n.LARGE,select:a.select})},v.createUserAvatarPicker=function(a){return new t({avatarManager:i.createUserAvatarManager({username:a.username,defaultAvatarId:a.defaultAvatarId}),imageEditor:new r,size:n.LARGE,select:a.select})},v.createUniversalAvatarPickerDialog=function(a){var t=a.initialSelection||a.defaultAvatarId,r=new c({trigger:a.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(i){var n,c;c=l('<div id="projectavatar-content-wrapper"/>'),l("<h2 />").text(a.title||"\u9009\u62e9\u4e00\u4e2a\u9879\u76ee\u5934\u50cf").appendTo(c),n=v.createUniversalAvatarPicker({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,initialSelection:t,avatarType:a.avatarType,avatarSize:a.avatarSize,select:function(e,i,n){t=String(e.getId()),a.select&&a.select.apply(this,arguments),n||r.hide()}}),n.render(function(a){s("wrc!jira.webresources:jquery-avataror",function(){c.append(a),i(c)})})}});r._focusFirstField=function(){}},v.createProjectAvatarPickerDialog=function(a){var t=new c({trigger:a.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(r){var i,n;n=l('<div id="projectavatar-content-wrapper"/>'),l("<h2 />").text("\u9009\u62e9\u4e00\u4e2a\u9879\u76ee\u5934\u50cf").appendTo(n),i=v.createProjectAvatarPicker({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,select:function(e,r,i){a.select&&a.select.apply(this,arguments),i||t.hide()}}),i.render(function(a){s("wrc!jira.webresources:jquery-avataror",function(){n.append(a),r(n)})})}});t._focusFirstField=function(){}};var p=d.claim("jira.core:avatar-picker-data.data");v.createUserAvatarPickerDialog=function(t){if(p&&p.isEnabled)return void l(t.trigger).click(function(e){var t=o()+p.url;t+=(t.indexOf("?")>-1?"&":"?")+"continue="+encodeURIComponent(window.location.href),e.preventDefault(),e.stopPropagation(),a.reloadViaWindowLocation(t)});var r=new c({trigger:t.trigger,id:"user-avatar-picker",width:600,stacked:!0,content:function(a){var i,n;n=l('<div id="useravatar-content-wrapper"/>'),l("<h2 />").text("\u9009\u62e9\u4e00\u4e2a\u5934\u50cf").appendTo(n),i=v.createUserAvatarPicker({username:t.username,defaultAvatarId:t.defaultAvatarId,select:function(a,e,i){t.select&&t.select.apply(this,arguments),l(".avatar-image").attr("src",e),i||r.hide()}}),i.render(function(e){s("wrc!jira.webresources:jquery-avataror",function(){n.append(e),a(n)})})}})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/GravatarUtil.js' */
define("jira/ajs/avatarpicker/gravatar-util",["jquery","exports"],function(a,r){"use strict";r.showGravatarHelp=function(r){void 0!==r&&void 0!==r.entry&&(a(".gravatar-signup-text").addClass("hidden"),a(".gravatar-login-text").removeClass("hidden"))},r.displayGravatarHelp=function(){var t=a("#gravatar_json_url");t.length&&a.ajax(t.val(),{dataType:"jsonp",success:r.showGravatarHelp})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/initAvatarPicker.js' */
!function(){"use strict";var a=require("jquery"),r=require("jira/ajs/avatarpicker/avatar/sizes"),e=require("jira/ajs/avatarpicker/avatar-factory"),t=require("jira/ajs/avatarpicker/avatar-manager-factory"),c=require("jira/ajs/avatarpicker/avatar-picker-factory"),A=require("jira/ajs/avatarpicker/gravatar-util");AJS.namespace("JIRA.Avatar",null,require("jira/ajs/avatarpicker/avatar")),AJS.namespace("JIRA.Avatar.createCustomAvatar",null,e.createCustomAvatar),AJS.namespace("JIRA.Avatar.createSystemAvatar",null,e.createSystemAvatar),AJS.namespace("JIRA.Avatar.getSizeObjectFromName",null,r.getSizeObjectFromName),AJS.namespace("JIRA.Avatar.LARGE",null,r.LARGE),AJS.namespace("JIRA.Avatar.MEDIUM",null,r.MEDIUM),AJS.namespace("JIRA.Avatar.SMALL",null,r.SMALL),AJS.namespace("JIRA.AvatarManager",null,require("jira/ajs/avatarpicker/avatar-manager")),AJS.namespace("JIRA.AvatarManager.createUniversalAvatarManager",null,t.createUniversalAvatarManager),AJS.namespace("JIRA.AvatarManager.createProjectAvatarManager",null,t.createProjectAvatarManager),AJS.namespace("JIRA.AvatarManager.createUserAvatarManager",null,t.createUserAvatarManager),AJS.namespace("JIRA.AvatarPicker",null,require("jira/ajs/avatarpicker/avatar-picker")),AJS.namespace("JIRA.AvatarPicker.ImageEditor",null,require("jira/ajs/avatarpicker/avatar-picker/image-editor")),AJS.namespace("JIRA.AvatarPicker.createUniversalAvatarPicker",null,c.createUniversalAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createProjectAvatarPicker",null,c.createProjectAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createUserAvatarPicker",null,c.createUserAvatarPicker),AJS.namespace("JIRA.createUniversalAvatarPickerDialog",null,c.createUniversalAvatarPickerDialog),AJS.namespace("JIRA.createProjectAvatarPickerDialog",null,c.createProjectAvatarPickerDialog),AJS.namespace("JIRA.createUserAvatarPickerDialog",null,c.createUserAvatarPickerDialog),AJS.namespace("JIRA.AvatarStore",null,require("jira/ajs/avatarpicker/avatar-store")),AJS.namespace("JIRA.AvatarUtil",null,require("jira/ajs/avatarpicker/avatar-util")),AJS.namespace("JIRA.GravatarUtil.showGravatarHelp",null,A.showGravatarHelp),a(function(){c.createUserAvatarPickerDialog({trigger:"#user_avatar_image",username:a("#avatar-owner-id").text(),defaultAvatarId:a("#default-avatar-id").text()}),a("#gravatar_help_params")&&A.displayGravatarHelp()})}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarPicker.soy' */
// This file was automatically generated from AvatarPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.AvatarPicker.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.AvatarPicker == 'undefined') { JIRA.Templates.AvatarPicker = {}; }


JIRA.Templates.AvatarPicker.picker = function(opt_data, opt_ignored) {
  var output = '<form class="jira-avatar-upload-form aui top-label" action="#"><input name="id" value="10000" type="hidden" ><input name="pid" value="10000" type="hidden" ><div class="field-group"><label for="jira-avatar-uploader">' + soy.$$escapeHtml('\u4e0a\u4f20\u4e00\u4e2a\u65b0\u5934\u50cf') + '</label><input type="file" class="ignore-inline-attach" name="avatar" id="jira-avatar-uploader"/><div class="error"></div></div></form><div class="form-body"><ul class="jira-avatars">';
  var avatarList6 = opt_data.avatars.system;
  var avatarListLen6 = avatarList6.length;
  for (var avatarIndex6 = 0; avatarIndex6 < avatarListLen6; avatarIndex6++) {
    var avatarData6 = avatarList6[avatarIndex6];
    output += '<li class="jira-avatar jira-system-avatar ' + ((avatarData6.isSelected) ? 'jira-selected-avatar' : '') + '" title="Select this Avatar" data-id="' + soy.$$escapeHtml(avatarData6.id) + '"><button data-id="' + soy.$$escapeHtml(avatarData6.id) + '" class="jira-icon-button" title="' + soy.$$escapeHtml('\u9009\u62e9\u8fd9\u4e2a\u56fe\u50cf') + '"><img id="avatar-' + soy.$$escapeHtml(avatarData6.id) + '" src="' + soy.$$escapeHtml(avatarData6.src) + '" width="' + soy.$$escapeHtml(avatarData6.width) + '" height="' + soy.$$escapeHtml(avatarData6.height) + '" alt="' + soy.$$escapeHtml('\u9009\u62e9\u8fd9\u4e2a\u56fe\u50cf') + '"/></button></li>';
  }
  var avatarList29 = opt_data.avatars.custom;
  var avatarListLen29 = avatarList29.length;
  for (var avatarIndex29 = 0; avatarIndex29 < avatarListLen29; avatarIndex29++) {
    var avatarData29 = avatarList29[avatarIndex29];
    output += '<li class="jira-avatar jira-custom-avatar ' + ((avatarData29.isSelected) ? 'jira-selected-avatar' : '') + '" title="Select this avatar" data-id="' + soy.$$escapeHtml(avatarData29.id) + '"><button data-id="' + soy.$$escapeHtml(avatarData29.id) + '" class="jira-icon-button" title="' + soy.$$escapeHtml('\u9009\u62e9\u8fd9\u4e2a\u56fe\u50cf') + '"><img id="avatar-' + soy.$$escapeHtml(avatarData29.id) + '" src="' + soy.$$escapeHtml(avatarData29.src) + '" width="' + soy.$$escapeHtml(avatarData29.width) + '" height="' + soy.$$escapeHtml(avatarData29.height) + '" alt="' + soy.$$escapeHtml('\u9009\u62e9\u8fd9\u4e2a\u56fe\u50cf') + '" /></button><button class="jira-delete-avatar jira-icon-button" data-id="' + soy.$$escapeHtml(avatarData29.id) + '" title="' + soy.$$escapeHtml('\u5220\u9664\u8fd9\u4e2a\u56fe\u6807') + '">' + soy.$$escapeHtml('\u5220\u9664\u8fd9\u4e2a\u56fe\u6807') + '</button></li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.AvatarPicker.picker.soyTemplateName = 'JIRA.Templates.AvatarPicker.picker';
}


JIRA.Templates.AvatarPicker.imageEditor = function(opt_data, opt_ignored) {
  return '<form id="avataror" class="jira-avatar-cropper-form aui" action="/jira/secure/project/AvatarPicker.jspa"><input type="hidden" name="cropperOffsetX" id="avatar-offsetX" value="' + soy.$$escapeHtml(opt_data.cropperOffsetX) + '"><input type="hidden" name="cropperOffsetY" id="avatar-offsetY" value="' + soy.$$escapeHtml(opt_data.cropperOffsetY) + '"><input type="hidden" name="cropperWidth" id="avatar-width"  value="' + soy.$$escapeHtml(opt_data.cropperWidth) + '"><div class="jira-avatar-cropper-header"><p>' + soy.$$escapeHtml('Crop the image below to set it as your avatar.') + '</p><div id="jira-avatar-cropper-keyboard-instructions"><p>' + soy.$$escapeHtml('You can use the following keyboard shortcuts:') + '</p><p>' + soy.$$filterNoAutoescape('\x3ckbd\x3eArrow keys\x3c/kbd\x3e to move the selected area.') + '</p><p>' + soy.$$filterNoAutoescape('\x3ckbd\x3eAlt/Option + Arrow keys\x3c/kbd\x3e to resize the selected area.') + '</p></div></div><div class="form-body"><div class="avataror"><img src="' + soy.$$escapeHtml(opt_data.url) + '" height="300" /></div></div><div class="form-footer buttons-container"><div class="buttons"><input type="submit" class="aui-button aui-button-primary" value="' + soy.$$escapeHtml('\u786e\u8ba4') + '"><a class="aui-button aui-button-link cancel" href="#">' + soy.$$escapeHtml('\u53d6\u6d88') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.AvatarPicker.imageEditor.soyTemplateName = 'JIRA.Templates.AvatarPicker.imageEditor';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugin.jslibs:uri-1.14.1', location = 'libs/uri/1.14.1/uri-1.14.1.js' */
/*
 URI.js - Mutating URLs

 Version: 1.14.1

 Author: Rodney Rehm
 Web: http://medialize.github.io/URI.js/

 Licensed under
   MIT License http://www.opensource.org/licenses/mit-license
   GPL v3 http://opensource.org/licenses/GPL-3.0

*/
'use strict';(function(k){define("atlassian/libs/uri-1.14.1",function(){var r={};k.call(r);return r.URI.noConflict()})})(function(){(function(k,r){k.URI=r(k.punycode,k.IPv6,k.SecondLevelDomains,k)})(this,function(k,r,t,n){function d(a,b){if(!(this instanceof d))return new d(a,b);void 0===a&&(a="undefined"!==typeof location?location.href+"":"");this.href(a);return void 0!==b?this.absoluteTo(b):this}function q(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function w(a){return void 0===a?
"Undefined":String(Object.prototype.toString.call(a)).slice(8,-1)}function h(a){return"Array"===w(a)}function v(a,b){var c;if(h(b)){var d=0;for(c=b.length;d<c;d++)if(!v(a,b[d]))return!1;return!0}var f=w(b);d=0;for(c=a.length;d<c;d++)if("RegExp"===f){if("string"===typeof a[d]&&a[d].match(b))return!0}else if(a[d]===b)return!0;return!1}function z(a,b){if(!h(a)||!h(b)||a.length!==b.length)return!1;a.sort();b.sort();for(var c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function D(a){return escape(a)}
function x(a){return encodeURIComponent(a).replace(/[!'()*]/g,D).replace(/\*/g,"%2A")}function u(a){return function(b,c){if(void 0===b)return this._parts[a]||"";this._parts[a]=b||null;this.build(!c);return this}}function A(a,b){return function(c,d){if(void 0===c)return this._parts[a]||"";null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1)));this._parts[a]=c;this.build(!d);return this}}var E=n&&n.URI;d.version="1.14.1";var e=d.prototype,p=Object.prototype.hasOwnProperty;d._parts=function(){return{protocol:null,
username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:d.duplicateQueryParameters,escapeQuerySpace:d.escapeQuerySpace}};d.duplicateQueryParameters=!1;d.escapeQuerySpace=!0;d.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;d.idn_expression=/[^a-z0-9\.-]/i;d.punycode_expression=/(xn--)/i;d.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;d.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
d.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;d.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/};d.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};d.invalid_hostname_characters=
/[^a-zA-Z0-9\.-]/;d.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};d.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();if("input"!==b||"image"===a.type)return d.domAttributes[b]}};d.encode=x;d.decode=decodeURIComponent;d.iso8859=function(){d.encode=escape;d.decode=unescape};d.unicode=function(){d.encode=x;d.decode=decodeURIComponent};
d.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"\x26","%2B":"+","%2C":",","%3B":";","%3D":"\x3d","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"\x26","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";",
"%3D":"\x3d"}}}};d.encodeQuery=function(a,b){a=d.encode(a+"");void 0===b&&(b=d.escapeQuerySpace);return b?a.replace(/%20/g,"+"):a};d.decodeQuery=function(a,b){a+="";void 0===b&&(b=d.escapeQuerySpace);try{return d.decode(b?a.replace(/\+/g,"%20"):a)}catch(c){return a}};d.recodePath=function(a){a=(a+"").split("/");for(var b=0,c=a.length;b<c;b++)a[b]=d.encodePathSegment(d.decode(a[b]));return a.join("/")};d.decodePath=function(a){a=(a+"").split("/");for(var b=0,c=a.length;b<c;b++)a[b]=d.decodePathSegment(a[b]);
return a.join("/")};var B={encode:"encode",decode:"decode"},y,C=function(a,b){return function(c){try{return d[b](c+"").replace(d.characters[a][b].expression,function(c){return d.characters[a][b].map[c]})}catch(g){return c}}};for(y in B)d[y+"PathSegment"]=C("pathname",B[y]);d.encodeReserved=C("reserved","encode");d.parse=function(a,b){b||(b={});var c=a.indexOf("#");-1<c&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c));c=a.indexOf("?");-1<c&&(b.query=a.substring(c+1)||null,a=a.substring(0,c));
"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=d.parseAuthority(a,b)):(c=a.indexOf(":"),-1<c&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(d.protocol_expression)?b.protocol=void 0:"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=d.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0)));b.path=a;return b};d.parseHost=function(a,b){var c=a.indexOf("/");-1===c&&(c=a.length);if("["===a.charAt(0)){var d=a.indexOf("]");b.hostname=a.substring(1,d)||null;b.port=a.substring(d+
2,c)||null;"/"===b.port&&(b.port=null)}else a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,c)||null,b.port=null):(d=a.substring(0,c).split(":"),b.hostname=d[0]||null,b.port=d[1]||null);b.hostname&&"/"!==a.substring(c).charAt(0)&&(c++,a="/"+a);return a.substring(c)||"/"};d.parseAuthority=function(a,b){a=d.parseUserinfo(a,b);return d.parseHost(a,b)};d.parseUserinfo=function(a,b){var c=a.indexOf("/"),g=a.lastIndexOf("@",-1<c?c:a.length-1);-1<g&&(-1===c||g<c)?(c=a.substring(0,g).split(":"),
b.username=c[0]?d.decode(c[0]):null,c.shift(),b.password=c[0]?d.decode(c.join(":")):null,a=a.substring(g+1)):(b.username=null,b.password=null);return a};d.parseQuery=function(a,b){if(!a)return{};a=a.replace(/&+/g,"\x26").replace(/^\?*&*|&+$/g,"");if(!a)return{};var c={};a=a.split("\x26");for(var g=a.length,f,e,l=0;l<g;l++)f=a[l].split("\x3d"),e=d.decodeQuery(f.shift(),b),f=f.length?d.decodeQuery(f.join("\x3d"),b):null,p.call(c,e)?("string"===typeof c[e]&&(c[e]=[c[e]]),c[e].push(f)):c[e]=f;return c};
d.build=function(a){var b="";a.protocol&&(b+=a.protocol+":");a.urn||!b&&!a.hostname||(b+="//");b+=d.buildAuthority(a)||"";"string"===typeof a.path&&("/"!==a.path.charAt(0)&&"string"===typeof a.hostname&&(b+="/"),b+=a.path);"string"===typeof a.query&&a.query&&(b+="?"+a.query);"string"===typeof a.fragment&&a.fragment&&(b+="#"+a.fragment);return b};d.buildHost=function(a){var b="";if(a.hostname)b=d.ip6_expression.test(a.hostname)?b+("["+a.hostname+"]"):b+a.hostname;else return"";a.port&&(b+=":"+a.port);
return b};d.buildAuthority=function(a){return d.buildUserinfo(a)+d.buildHost(a)};d.buildUserinfo=function(a){var b="";a.username&&(b+=d.encode(a.username),a.password&&(b+=":"+d.encode(a.password)),b+="@");return b};d.buildQuery=function(a,b,c){var g="",f,e;for(f in a)if(p.call(a,f)&&f)if(h(a[f])){var l={};var m=0;for(e=a[f].length;m<e;m++)void 0!==a[f][m]&&void 0===l[a[f][m]+""]&&(g+="\x26"+d.buildQueryParameter(f,a[f][m],c),!0!==b&&(l[a[f][m]+""]=!0))}else void 0!==a[f]&&(g+="\x26"+d.buildQueryParameter(f,
a[f],c));return g.substring(1)};d.buildQueryParameter=function(a,b,c){return d.encodeQuery(a,c)+(null!==b?"\x3d"+d.encodeQuery(b,c):"")};d.addQuery=function(a,b,c){if("object"===typeof b)for(var g in b)p.call(b,g)&&d.addQuery(a,g,b[g]);else if("string"===typeof b)void 0===a[b]?a[b]=c:("string"===typeof a[b]&&(a[b]=[a[b]]),h(c)||(c=[c]),a[b]=(a[b]||[]).concat(c));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};d.removeQuery=function(a,b,c){var g;if(h(b))for(c=
0,g=b.length;c<g;c++)a[b[c]]=void 0;else if("object"===typeof b)for(g in b)p.call(b,g)&&d.removeQuery(a,g,b[g]);else if("string"===typeof b)if(void 0!==c)if(a[b]===c)a[b]=void 0;else{if(h(a[b])){g=a[b];var f={},e;if(h(c)){var l=0;for(e=c.length;l<e;l++)f[c[l]]=!0}else f[c]=!0;l=0;for(e=g.length;l<e;l++)void 0!==f[g[l]]&&(g.splice(l,1),e--,l--);a[b]=g}}else a[b]=void 0;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");};d.hasQuery=function(a,b,c,g){if("object"===
typeof b){for(var f in b)if(p.call(b,f)&&!d.hasQuery(a,f,b[f]))return!1;return!0}if("string"!==typeof b)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(w(c)){case "Undefined":return b in a;case "Boolean":return a=!(h(a[b])?!a[b].length:!a[b]),c===a;case "Function":return!!c(a[b],b,a);case "Array":return h(a[b])?(g?v:z)(a[b],c):!1;case "RegExp":return h(a[b])?g?v(a[b],c):!1:!(!a[b]||!a[b].match(c));case "Number":c=String(c);case "String":return h(a[b])?
g?v(a[b],c):!1:a[b]===c;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");}};d.commonPath=function(a,b){var c=Math.min(a.length,b.length),d;for(d=0;d<c;d++)if(a.charAt(d)!==b.charAt(d)){d--;break}if(1>d)return a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"";if("/"!==a.charAt(d)||"/"!==b.charAt(d))d=a.substring(0,d).lastIndexOf("/");return a.substring(0,d+1)};d.withinString=function(a,b,c){c||(c={});var g=c.start||
d.findUri.start,f=c.end||d.findUri.end,e=c.trim||d.findUri.trim,l=/[a-z0-9-]=["']?$/i;for(g.lastIndex=0;;){var m=g.exec(a);if(!m)break;m=m.index;if(c.ignoreHtml){var h=a.slice(Math.max(m-3,0),m);if(h&&l.test(h))continue}h=m+a.slice(m).search(f);var k=a.slice(m,h).replace(e,"");c.ignore&&c.ignore.test(k)||(h=m+k.length,k=b(k,m,h,a),a=a.slice(0,m)+k+a.slice(h),g.lastIndex=m+k.length)}g.lastIndex=0;return a};d.ensureValidHostname=function(a){if(a.match(d.invalid_hostname_characters)){if(!k)throw new TypeError('Hostname "'+
a+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(k.toASCII(a).match(d.invalid_hostname_characters))throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-]');}};d.noConflict=function(a){if(a)return a={URI:this.noConflict()},n.URITemplate&&"function"===typeof n.URITemplate.noConflict&&(a.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"===typeof n.IPv6.noConflict&&(a.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"===typeof n.SecondLevelDomains.noConflict&&
(a.SecondLevelDomains=n.SecondLevelDomains.noConflict()),a;n.URI===this&&(n.URI=E);return this};e.build=function(a){if(!0===a)this._deferred_build=!0;else if(void 0===a||this._deferred_build)this._string=d.build(this._parts),this._deferred_build=!1;return this};e.clone=function(){return new d(this)};e.valueOf=e.toString=function(){return this.build(!1)._string};e.protocol=u("protocol");e.username=u("username");e.password=u("password");e.hostname=u("hostname");e.port=u("port");e.query=A("query","?");
e.fragment=A("fragment","#");e.search=function(a,b){a=this.query(a,b);return"string"===typeof a&&a.length?"?"+a:a};e.hash=function(a,b){a=this.fragment(a,b);return"string"===typeof a&&a.length?"#"+a:a};e.pathname=function(a,b){if(void 0===a||!0===a)return b=this._parts.path||(this._parts.hostname?"/":""),a?d.decodePath(b):b;this._parts.path=a?d.recodePath(a):"/";this.build(!b);return this};e.path=e.pathname;e.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="";this._parts=
d._parts();var g=a instanceof d,f="object"===typeof a&&(a.hostname||a.path||a.pathname);a.nodeName&&(f=d.getDomAttribute(a),a=a[f]||"",f=!1);!g&&f&&void 0!==a.pathname&&(a=a.toString());if("string"===typeof a||a instanceof String)this._parts=d.parse(String(a),this._parts);else if(g||f)for(c in a=g?a._parts:a,a)p.call(this._parts,c)&&(this._parts[c]=a[c]);else throw new TypeError("invalid input");this.build(!b);return this};e.is=function(a){var b=!1,c=!1,g=!1,f=!1,e=!1,l=!1,h=!1,k=!this._parts.urn;
this._parts.hostname&&(k=!1,c=d.ip4_expression.test(this._parts.hostname),g=d.ip6_expression.test(this._parts.hostname),b=c||g,e=(f=!b)&&t&&t.has(this._parts.hostname),l=f&&d.idn_expression.test(this._parts.hostname),h=f&&d.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case "relative":return k;case "absolute":return!k;case "domain":case "name":return f;case "sld":return e;case "ip":return b;case "ip4":case "ipv4":case "inet4":return c;case "ip6":case "ipv6":case "inet6":return g;
case "idn":return l;case "url":return!this._parts.urn;case "urn":return!!this._parts.urn;case "punycode":return h}return null};var F=e.protocol,G=e.port,H=e.hostname;e.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(d.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return F.call(this,a,b)};e.scheme=e.protocol;e.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==
a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');return G.call(this,a,b)};e.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};d.parseHost(a,c);a=c.hostname}return H.call(this,a,b)};e.host=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?d.buildHost(this._parts):"";d.parseHost(a,this._parts);this.build(!b);
return this};e.authority=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?d.buildAuthority(this._parts):"";d.parseAuthority(a,this._parts);this.build(!b);return this};e.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";a=d.buildUserinfo(this._parts);return a.substring(0,a.length-1)}"@"!==a[a.length-1]&&(a+="@");d.parseUserinfo(a,this._parts);this.build(!b);return this};e.resource=
function(a,b){if(void 0===a)return this.path()+this.search()+this.hash();a=d.parse(a);this._parts.path=a.path;this._parts.query=a.query;this._parts.fragment=a.fragment;this.build(!b);return this};e.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";a=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,a)||""}var c=this._parts.hostname.length-this.domain().length;c=this._parts.hostname.substring(0,
c);c=new RegExp("^"+q(c));a&&"."!==a.charAt(a.length-1)&&(a+=".");a&&d.ensureValidHostname(a);this._parts.hostname=this._parts.hostname.replace(c,a);this.build(!b);return this};e.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";if((a=this._parts.hostname.match(/\./g))&&2>a.length)return this._parts.hostname;b=this._parts.hostname.length-this.tld(b).length-1;b=this._parts.hostname.lastIndexOf(".",
b-1)+1;return this._parts.hostname.substring(b)||""}if(!a)throw new TypeError("cannot set domain empty");d.ensureValidHostname(a);if(!this._parts.hostname||this.is("IP"))this._parts.hostname=a;else{var c=new RegExp(q(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(c,a)}this.build(!b);return this};e.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";a=this._parts.hostname.lastIndexOf(".");
a=this._parts.hostname.substring(a+1);return!0!==b&&t&&t.list[a.toLowerCase()]?t.get(this._parts.hostname)||a:a}if(a)if(a.match(/[^a-zA-Z0-9-]/))if(t&&t.is(a)){var c=new RegExp(q(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(c,a)}else throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");c=new RegExp(q(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(c,
a)}else throw new TypeError("cannot set TLD empty");this.build(!b);return this};e.directory=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";b=this._parts.path.length-this.filename().length-1;b=this._parts.path.substring(0,b)||(this._parts.hostname?"/":"");return a?d.decodePath(b):b}var c=this._parts.path.length-this.filename().length;c=this._parts.path.substring(0,c);c=new RegExp("^"+
q(c));this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a));a&&"/"!==a.charAt(a.length-1)&&(a+="/");a=d.recodePath(a);this._parts.path=this._parts.path.replace(c,a);this.build(!b);return this};e.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";b=this._parts.path.lastIndexOf("/");b=this._parts.path.substring(b+1);return a?d.decodePathSegment(b):b}var c=!1;"/"===a.charAt(0)&&(a=a.substring(1));a.match(/\.?\//)&&
(c=!0);var g=new RegExp(q(this.filename())+"$");a=d.recodePath(a);this._parts.path=this._parts.path.replace(g,a);c?this.normalizePath(b):this.build(!b);return this};e.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";b=this.filename();var c=b.lastIndexOf(".");if(-1===c)return"";b=b.substring(c+1);b=/^[a-z0-9%]+$/i.test(b)?b:"";return a?d.decodePathSegment(b):b}"."===a.charAt(0)&&(a=a.substring(1));c=this.suffix();
if(c)var g=a?new RegExp(q(c)+"$"):new RegExp(q("."+c)+"$");else{if(!a)return this;this._parts.path+="."+d.recodePath(a)}g&&(a=d.recodePath(a),this._parts.path=this._parts.path.replace(g,a));this.build(!b);return this};e.segment=function(a,b,c){var d=this._parts.urn?":":"/",f=this.path(),e="/"===f.substring(0,1);f=f.split(d);void 0!==a&&"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0!==a&&"number"!==typeof a)throw Error('Bad segment "'+a+'", must be 0-based integer');e&&f.shift();0>a&&(a=Math.max(f.length+
a,0));if(void 0===b)return void 0===a?f:f[a];if(null===a||void 0===f[a])if(h(b)){f=[];a=0;for(var l=b.length;a<l;a++)if(b[a].length||f.length&&f[f.length-1].length)f.length&&!f[f.length-1].length&&f.pop(),f.push(b[a])}else{if(b||"string"===typeof b)""===f[f.length-1]?f[f.length-1]=b:f.push(b)}else b?f[a]=b:f.splice(a,1);e&&f.unshift("");return this.path(f.join(d),c)};e.segmentCoded=function(a,b,c){var e;"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0===b){a=this.segment(a,b,c);if(h(a)){var f=0;
for(e=a.length;f<e;f++)a[f]=d.decode(a[f])}else a=void 0!==a?d.decode(a):void 0;return a}if(h(b))for(f=0,e=b.length;f<e;f++)b[f]=d.decode(b[f]);else b="string"===typeof b||b instanceof String?d.encode(b):b;return this.segment(a,b,c)};var I=e.query;e.query=function(a,b){if(!0===a)return d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"===typeof a){var c=d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);a=a.call(this,c);this._parts.query=d.buildQuery(a||c,this._parts.duplicateQueryParameters,
this._parts.escapeQuerySpace);this.build(!b);return this}return void 0!==a&&"string"!==typeof a?(this._parts.query=d.buildQuery(a,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):I.call(this,a,b)};e.setQuery=function(a,b,c){var e=d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"===typeof a||a instanceof String)e[a]=void 0!==b?b:null;else if("object"===typeof a)for(var f in a)p.call(a,f)&&(e[f]=a[f]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");
this._parts.query=d.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};e.addQuery=function(a,b,c){var e=d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);d.addQuery(e,a,void 0===b?null:b);this._parts.query=d.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};e.removeQuery=function(a,b,c){var e=d.parseQuery(this._parts.query,
this._parts.escapeQuerySpace);d.removeQuery(e,a,b);this._parts.query=d.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};e.hasQuery=function(a,b,c){var e=d.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return d.hasQuery(e,a,b,c)};e.setSearch=e.setQuery;e.addSearch=e.addQuery;e.removeSearch=e.removeQuery;e.hasSearch=e.hasQuery;e.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():
this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};e.normalizeProtocol=function(a){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a));return this};e.normalizeHostname=function(a){this._parts.hostname&&(this.is("IDN")&&k?this._parts.hostname=k.toASCII(this._parts.hostname):this.is("IPv6")&&r&&(this._parts.hostname=r.best(this._parts.hostname)),this._parts.hostname=
this._parts.hostname.toLowerCase(),this.build(!a));return this};e.normalizePort=function(a){"string"===typeof this._parts.protocol&&this._parts.port===d.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a));return this};e.normalizePath=function(a){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var b=this._parts.path,c="";if("/"!==b.charAt(0)){var e=!0;b="/"+b}b=b.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");e&&(c=b.substring(1).match(/^(\.\.\/)+/)||
"")&&(c=c[0]);for(;;){var f=b.indexOf("/..");if(-1===f)break;else if(0===f){b=b.substring(3);continue}var h=b.substring(0,f).lastIndexOf("/");-1===h&&(h=f);b=b.substring(0,h)+b.substring(f+3)}e&&this.is("relative")&&(b=c+b.substring(1));b=d.recodePath(b);this._parts.path=b;this.build(!a);return this};e.normalizePathname=e.normalizePath;e.normalizeQuery=function(a){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(d.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):
this._parts.query=null,this.build(!a));return this};e.normalizeFragment=function(a){this._parts.fragment||(this._parts.fragment=null,this.build(!a));return this};e.normalizeSearch=e.normalizeQuery;e.normalizeHash=e.normalizeFragment;e.iso8859=function(){var a=d.encode,b=d.decode;d.encode=escape;d.decode=decodeURIComponent;this.normalize();d.encode=a;d.decode=b;return this};e.unicode=function(){var a=d.encode,b=d.decode;d.encode=x;d.decode=unescape;this.normalize();d.encode=a;d.decode=b;return this};
e.readable=function(){var a=this.clone();a.username("").password("").normalize();var b="";a._parts.protocol&&(b+=a._parts.protocol+"://");a._parts.hostname&&(a.is("punycode")&&k?(b+=k.toUnicode(a._parts.hostname),a._parts.port&&(b+=":"+a._parts.port)):b+=a.host());a._parts.hostname&&a._parts.path&&"/"!==a._parts.path.charAt(0)&&(b+="/");b+=a.path(!0);if(a._parts.query){for(var c="",e=0,f=a._parts.query.split("\x26"),h=f.length;e<h;e++){var l=(f[e]||"").split("\x3d");c+="\x26"+d.decodeQuery(l[0],this._parts.escapeQuerySpace).replace(/&/g,
"%26");void 0!==l[1]&&(c+="\x3d"+d.decodeQuery(l[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}b+="?"+c.substring(1)}return b+=d.decodeQuery(a.hash(),!0)};e.absoluteTo=function(a){var b=this.clone(),c=["protocol","username","password","hostname","port"],e,f;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a instanceof d||(a=new d(a));b._parts.protocol||(b._parts.protocol=a._parts.protocol);if(this._parts.hostname)return b;for(e=0;f=c[e];e++)b._parts[f]=
a._parts[f];b._parts.path?".."===b._parts.path.substring(-2)&&(b._parts.path+="/"):(b._parts.path=a._parts.path,b._parts.query||(b._parts.query=a._parts.query));"/"!==b.path().charAt(0)&&(a=a.directory(),b._parts.path=(a?a+"/":"")+b._parts.path,b.normalizePath());b.build();return b};e.relativeTo=function(a){var b=this.clone().normalize();if(b._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a=(new d(a)).normalize();var c=b._parts;var e=a._parts;var f=b.path();
var h=a.path();if("/"!==f.charAt(0))throw Error("URI is already relative");if("/"!==h.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");c.protocol===e.protocol&&(c.protocol=null);if(c.username===e.username&&c.password===e.password&&null===c.protocol&&null===c.username&&null===c.password&&c.hostname===e.hostname&&c.port===e.port)c.hostname=null,c.port=null;else return b.build();if(f===h)return c.path="",b.build();a=d.commonPath(b.path(),a.path());if(!a)return b.build();
e=e.path.substring(a.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");c.path=e+c.path.substring(a.length);return b.build()};e.equals=function(a){var b=this.clone(),c=new d(a);a={};var e;b.normalize();c.normalize();if(b.toString()===c.toString())return!0;var f=b.query();var k=c.query();b.query("");c.query("");if(b.toString()!==c.toString()||f.length!==k.length)return!1;b=d.parseQuery(f,this._parts.escapeQuerySpace);k=d.parseQuery(k,this._parts.escapeQuerySpace);for(e in b)if(p.call(b,e)){if(!h(b[e])){if(b[e]!==
k[e])return!1}else if(!z(b[e],k[e]))return!1;a[e]=!0}for(e in k)if(p.call(k,e)&&!a[e])return!1;return!0};e.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=!!a;return this};e.escapeQuerySpace=function(a){this._parts.escapeQuerySpace=!!a;return this};return d})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-user-profile-plugin:user-details-resources', location = '/userprofile/ProfileDetails-view.soy' */
// This file was automatically generated from ProfileDetails-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.UserProfile.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.UserProfile == 'undefined') { JIRA.UserProfile = {}; }


JIRA.UserProfile.gravatarLozengeView = function(opt_data, opt_ignored) {
  return '<span class="gravatar-lozenge aui-lozenge aui-lozenge-subtle" title="' + soy.$$escapeHtml(AJS.format('Jira \u6b63\u5728\u4f7f\u7528\u56fe\u50cf {0}',opt_data.userEmail)) + '">Gravatar</span>';
};
if (goog.DEBUG) {
  JIRA.UserProfile.gravatarLozengeView.soyTemplateName = 'JIRA.UserProfile.gravatarLozengeView';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-user-profile-plugin:user-details-resources', location = '/userprofile/ProfileDetails.js' */
define("jira/user-profile-plugin/profile-details",["atlassian/libs/uri-1.14.1","atlassian/libs/factories/backbone-1.0.0","atlassian/libs/underscore-1.5.2","jquery","jira/util/data/meta"],function(c,a,b,f,e){var d=JIRA.UserProfile;return a(b,f).View.extend({initialize:function(g){Backbone.View.prototype.initialize.call(this,g);this._gravatarLozengeDiv=this.$(".gravatar-lozenge-container");this.gravatarRegex=new RegExp("gravatar.com/avatar/.*");this.onAvatarChanged(this.$(".avatar-image").attr("src"))},onAvatarChanged:function(g){if(!b.isEmpty(g)){this._renderGravatarLozenge(g);if(f.trim(f("#up-d-username").text())===e.get("remote-user")){this._updateImageInProfileHeader(g)}}},_renderGravatarLozenge:function(h){var g=new c(h);if(this.gravatarRegex.test(g.normalize().toString())){this._gravatarLozengeDiv.html(d.gravatarLozengeView({userEmail:f("#up-d-email").find("a").text()}));this.$(".gravatar-lozenge").tooltip({gravity:"w"})}else{this._gravatarLozengeDiv.empty()}},_updateImageInProfileHeader:function(g){f(".aui-page-header .aui-avatar-large img").attr("src",g);f(".aui-header .aui-avatar-small img").attr("src",g)}})});AJS.namespace("JIRA.UserProfile.ProfileDetails",null,require("jira/user-profile-plugin/profile-details"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-user-profile-plugin:user-details-resources', location = 'ProfileInit.js' */
require(["jira/user-profile-plugin/profile-details","atlassian/libs/underscore-1.5.2","jquery"],function(b,a,c){c(function(){var d=[];c("#details-profile-fragment").each(function(){d.push(new b({el:this}))});JIRA.createUserAvatarPickerDialog({trigger:"#details-user-avatar-trigger",username:c("#avatar-owner-id").text(),defaultAvatarId:c("#default-avatar-id").text(),select:function e(f,g){a.each(d,function(h){h.onAvatarChanged&&h.onAvatarChanged(g)})}})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var b={},d=window,h=d.document;b.disabled=!1;b.set=function(a,b){};b.get=function(a){};b.remove=function(a){};b.clear=function(){};b.transact=function(a,e){var c=b.get(a);"undefined"==typeof c&&(c={});e(c);b.set(a,c)};b.serialize=function(a){return JSON.stringify(a)};b.deserialize=function(a){if("string"==typeof a)return JSON.parse(a)};try{var k="localStorage"in d&&d.localStorage}catch(a){k=!1}if(k){var c=d.localStorage;b.set=function(a,e){if(void 0===e)return b.remove(a);c.setItem(a,
b.serialize(e))};b.get=function(a){return b.deserialize(c.getItem(a))};b.remove=function(a){c.removeItem(a)};b.clear=function(){c.clear()}}else{try{var l="globalStorage"in d&&d.globalStorage&&d.globalStorage[d.location.hostname]}catch(a){l=!1}if(l)c=d.globalStorage[d.location.hostname],b.set=function(a,e){if(void 0===e)return b.remove(a);c[a]=b.serialize(e)},b.get=function(a){return b.deserialize(c[a]&&c[a].value)},b.remove=function(a){delete c[a]},b.clear=function(){for(var a in c)delete c[a]};else if(h.documentElement.addBehavior){d=
function(a){return function(){var e=Array.prototype.slice.call(arguments,0);e.unshift(c);f.appendChild(c);c.addBehavior("#default#userData");c.load("localStorage");e=a.apply(b,e);f.removeChild(c);return e}};try{var g=new ActiveXObject("htmlfile");g.open();g.write('\x3cscript\x3edocument.w\x3dwindow\x3c/script\x3e\x3ciframe src\x3d"/favicon.ico"\x3e\x3c/frame\x3e');g.close();var f=g.w.frames[0].document;c=f.createElement("div")}catch(a){c=h.createElement("div"),f=h.body}b.set=d(function(a,c,d){if(void 0===
d)return b.remove(c);a.setAttribute(c,b.serialize(d));a.save("localStorage")});b.get=d(function(a,c){return b.deserialize(a.getAttribute(c))});b.remove=d(function(a,b){a.removeAttribute(b);a.save("localStorage")});b.clear=d(function(a){var b=a.XMLDocument.documentElement.attributes;a.load("localStorage");for(var c=0,d;d=b[c];c++)a.removeAttribute(d.name);a.save("localStorage")})}}try{b.set("__storejs__","__storejs__"),"__storejs__"!=b.get("__storejs__")&&(b.disabled=!0),b.remove("__storejs__")}catch(a){b.disabled=
!0}"undefined"!=typeof module?module.exports=b:"function"===typeof define&&define.amd?define(b):this.store=b})();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/page-visibility.js' */
define("atlassian/analytics/page-visibility",function(){var a=void 0!==document.hidden;return{supported:a,isHidden:function(){return a?document.hidden:!1}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/user-activity-xhr-header.js' */
define("atlassian/analytics/user-activity-xhr-header",["atlassian/analytics/page-visibility"],function(c){var d=XMLHttpRequest.prototype.send,e=window.fetch,a=!1;return{install:function(){!a&&c.supported&&(XMLHttpRequest.prototype.send=function(){c.isHidden()&&this.setRequestHeader("x-atlassian-mau-ignore",c.isHidden());d.apply(this,arguments)},e&&(window.fetch=function(a,b){b=b||{};var d=b.headers;c.isHidden()&&(b.headers=d?new Headers(d):new Headers,b.headers.set("x-atlassian-mau-ignore",c.isHidden()));
return e.call(this,a,b)}),a=!0)},uninstall:function(){a&&(XMLHttpRequest.prototype.send=d,e&&(window.fetch=e));a=!1}}});require("atlassian/analytics/user-activity-xhr-header").install();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(q){var r="function"===typeof AJS.contextPath?AJS.contextPath():"",d=null,h=null,n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)}),k=function(){var a=[],b;if(0!=AJS.EventQueue.length){a=store.get(d)||a;var c=0;for(b=AJS.EventQueue.length;c<b;++c){var e=AJS.EventQueue[c];e.name&&(e={name:e.name,properties:e.properties,time:e.time||0},a.push(e))}AJS.EventQueue.length=0;store.set(d,a)}},p=0,l=0,m=function(){function a(){setTimeout(m,
Math.min(5E3*Math.pow(2,p=0),3E5))}if(store.get(h))var b=!1;else store.set(h,n),b=store.get(h)===n;if(b)l=0;else if(++l,20>l)return a();try{k();var c=store.get(d);if(!c||!c.length)return a();store.remove(d);if(!t(c))return a();var e=(new Date).getTime();for(b=0;b<c.length;b++)c[b].timeDelta=0<c[b].time?c[b].time-e:b-c.length,delete c[b].time;fetch(r+"/rest/analytics/1.0/publish/bulk",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"},cache:"no-cache",credentials:"same-origin"}).then(b=>
{if(!b.ok)throw Error("A response outside OK range (200-299)");a()}).catch(()=>{AJS.EventQueue.concat(c);k();setTimeout(m,Math.min(5E3*Math.pow(2,++p),3E5))})}finally{store.set(h,null)}},t=function(a){for(var b=a.length-1;0<=b;b--){var c="",e=a[b],g=e.properties;if("undefined"===typeof e.name)c="you must provide a name for the event.";else if("undefined"!==typeof g&&null!==g)if(g.constructor!==Object)c="properties must be an object with key value pairs.";else{var d=void 0;for(d in g)if(g.hasOwnProperty(d)){var f=
g[d];"undefined"!==typeof f&&null!==f&&("number"===typeof f||"string"===typeof f||"boolean"===typeof f)||("undefined"!==typeof f&&null!==f&&f.toString?g[d]=f.toString():g[d]="")}}""!==c&&(AJS.log("WARN: Invalid analytics event detected and ignored, "+c+"\nEvent: "+JSON.stringify(e)),a.splice(b,1))}return a.length};AJS.EventQueue=AJS.EventQueue||[];var u=Array.prototype.push;AJS.EventQueue.push=function(a){a.time=(new Date).getTime();u.call(AJS.EventQueue,a)};AJS.toInit(function(){var a="unknown";
"jira"==document.body.id?a="jira":"com-atlassian-confluence"==document.body.id&&(a="confluence");d="atlassian-analytics."+a;h=d+".lock";setTimeout(m,500);-1<window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")?AJS.$("[data-property-id\x3d'analytics-enabled']").remove():-1<window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")&&(a=AJS.$(":contains(Enable Atlassian analytics)"),0<a.size()&&(a=a[a.size()-2])&&a.remove())});q(window).on("beforeunload",function(){k()});
AJS.Analytics={triggerPrivacyPolicySafeEvent:function(a,b){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:a,properties:b})}};AJS.bind("analytics",function(a,b){AJS.EventQueue.push({name:b.name,properties:b.data})});AJS.bind("analyticsEvent",function(a,b){AJS.EventQueue.push({name:b.name,properties:b.data})})})(AJS.$);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:policy-update-init', location = 'js/policy-update-init.js' */
AJS.toInit(function(){WRM.data.claim("com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider")&&WRM.require("wrc!com.atlassian.analytics.analytics-client:policy-update")});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.analytics.analytics-client:programmatic-analytics-init', location = 'js/programmatic-analytics-init.js' */
(function(){WRM.data.claim("com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider")&&WRM.require("wrc!com.atlassian.analytics.analytics-client:programmatic-analytics")})();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=function(a){a.ApplicationHeader=function(a){a.Cog=function(){return{getDropdown:function(){var a=AJS.$("#system-admin-menu-content");if(0<a.length)return a;a=AJS.$("#admin-menu-link-content");return 0<a.length?a:AJS.$("#bamboo\\.global\\.header-admin\\.menu")}}}();return a}(a.ApplicationHeader||{});return a}(NavLinks||{});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: '\u5176\u4ed6\u5e94\u7528\u7a0b\u5e8f', content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=function(b){b.AdminShortcuts=function(){var c=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:!1,dataType:"json"}).done(function(a){a=a.filter(function(a){return!a.local});a.length&&(a=navlinks.templates.adminshortcuts.section({links:a}),b.ApplicationHeader.Cog.getDropdown().append(a),
c())})}}}();return b}(NavLinks||{});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts', location = 'adminshortcuts/adminshortcuts-cdn.js' */
AJS.toInit(function(){AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("rotp.admin.shortcuts")&&NavLinks.AdminShortcuts.render()});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var a=[],b=!1,c=!1;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){a.push(d);b&&!1===c&&this.render()},render:function(){a.sort(function(a,b){return a.weight-b.weight});b=!0;0!==a.length&&(c=!0,a[0].show())}}}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugin.jslibs:moment-2.22.2', location = 'libs/moment/2.22.2/moment-2.22.2.js' */
'use strict';(function(g){define("atlassian/libs/moment-2.22.2",function(){var A={};g.call(A);return A.moment})})(function(){(function(g,A){g.moment=A()})(this,function(){function g(){return dc.apply(null,arguments)}function A(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function ma(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function B(a){return void 0===a}function fa(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}
function wa(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function mb(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function v(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function S(a,b){for(var c in b)v(b,c)&&(a[c]=b[c]);v(b,"toString")&&(a.toString=b.toString);v(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function K(a,b,c,d){return nb(a,b,c,d,!0).utc()}function n(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,
charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function Oa(a){if(null==a._isValid){var b=n(a),c=ec.call(b.parsedDateParts,function(a){return null!=a});c=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===
b.unusedTokens.length&&void 0===b.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(a))return c;a._isValid=c}return a._isValid}function xa(a){var b=K(NaN);null!=a?S(n(b),a):n(b).userInvalidated=!0;return b}function Pa(a,b){var c;B(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);B(b._i)||(a._i=b._i);B(b._f)||(a._f=b._f);B(b._l)||(a._l=b._l);B(b._strict)||(a._strict=b._strict);B(b._tzm)||(a._tzm=b._tzm);B(b._isUTC)||(a._isUTC=b._isUTC);B(b._offset)||(a._offset=b._offset);B(b._pf)||(a._pf=
n(b));B(b._locale)||(a._locale=b._locale);if(0<Qa.length)for(c=0;c<Qa.length;c++){var d=Qa[c];var f=b[d];B(f)||(a[d]=f)}return a}function na(a){Pa(this,a);this._d=new Date(null!=a._d?a._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Ra&&(Ra=!0,g.updateOffset(this),Ra=!1)}function T(a){return a instanceof na||null!=a&&null!=a._isAMomentObject}function E(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function l(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=E(a));return b}function ob(a,b,c){var d=
Math.min(a.length,b.length),f=Math.abs(a.length-b.length),U=0,h;for(h=0;h<d;h++)(c&&a[h]!==b[h]||!c&&l(a[h])!==l(b[h]))&&U++;return U+f}function pb(a){!1===g.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function F(a,b){var c=!0;return S(function(){null!=g.deprecationHandler&&g.deprecationHandler(null,a);if(c){for(var d=[],f,U=0;U<arguments.length;U++){f="";if("object"===typeof arguments[U]){f+="\n["+U+"] ";for(var h in arguments[0])f+=
h+": "+arguments[0][h]+", ";f=f.slice(0,-2)}else f=arguments[U];d.push(f)}pb(a+"\nArguments: "+Array.prototype.slice.call(d).join("")+"\n"+Error().stack);c=!1}return b.apply(this,arguments)},b)}function qb(a,b){null!=g.deprecationHandler&&g.deprecationHandler(a,b);rb[a]||(pb(b),rb[a]=!0)}function L(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function sb(a,b){var c=S({},a),d;for(d in b)v(b,d)&&(ma(a[d])&&ma(b[d])?(c[d]={},S(c[d],a[d]),S(c[d],b[d])):null!=
b[d]?c[d]=b[d]:delete c[d]);for(d in a)v(a,d)&&!v(b,d)&&ma(a[d])&&(c[d]=S({},c[d]));return c}function Sa(a){null!=a&&this.set(a)}function C(a,b){var c=a.toLowerCase();oa[c]=oa[c+"s"]=oa[b]=a}function G(a){return"string"===typeof a?oa[a]||oa[a.toLowerCase()]:void 0}function Ta(a){var b={},c,d;for(d in a)v(a,d)&&(c=G(d))&&(b[c]=a[d]);return b}function fc(a){var b=[],c;for(c in a)b.push({unit:c,priority:z[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function O(a,b,c){var d=""+Math.abs(a);
return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function m(a,b,c,d){var f=d;"string"===typeof d&&(f=function(){return this[d]()});a&&(ha[a]=f);b&&(ha[b[0]]=function(){return O(f.apply(this,arguments),b[1],b[2])});c&&(ha[c]=function(){return this.localeData().ordinal(f.apply(this,arguments),a)})}function gc(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function hc(a){var b=a.match(tb),c;var d=0;for(c=b.length;d<c;d++)b[d]=ha[b[d]]?ha[b[d]]:
gc(b[d]);return function(d){var f="",h;for(h=0;h<c;h++)f+=L(b[h])?b[h].call(d,a):b[h];return f}}function ya(a,b){if(!a.isValid())return a.localeData().invalidDate();b=ub(b,a.localeData());Ua[b]=Ua[b]||hc(b);return Ua[b](a)}function ub(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(za.lastIndex=0;0<=d&&za.test(a);)a=a.replace(za,c),za.lastIndex=0,--d;return a}function k(a,b,c){Va[a]=L(b)?b:function(a,f){return a&&c?c:b}}function ic(a,b){return v(Va,a)?Va[a](b._strict,b._locale):new RegExp(jc(a))}
function jc(a){return aa(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,c,d,f,e){return c||d||f||e}))}function aa(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function r(a,b){var c,d=b;"string"===typeof a&&(a=[a]);fa(b)&&(d=function(a,c){c[b]=l(a)});for(c=0;c<a.length;c++)Wa[a[c]]=d}function pa(a,b){r(a,function(a,d,f,e){f._w=f._w||{};b(a,f._w,f,e)})}function V(a){return 0===a%4&&0!==a%100||0===a%400}function ia(a,b){return function(c){return null!=c?(vb(this,
a,c),g.updateOffset(this,b),this):Aa(this,a)}}function Aa(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function vb(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&V(a.year())&&1===a.month()&&29===a.date())a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),Ba(c,a.month()));else a._d["set"+(a._isUTC?"UTC":"")+b](c)}function Ba(a,b){if(isNaN(a)||isNaN(b))return NaN;var c=(b%12+12)%12;return 1===c?V(a+(b-c)/12)?29:28:31-c%7%2}function wb(a,b){if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=
l(b);else if(b=a.localeData().monthsParse(b),!fa(b))return a;var c=Math.min(a.date(),Ba(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function xb(a){return null!=a?(wb(this,a),g.updateOffset(this,!0),this):Aa(this,"Month")}function yb(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],f;for(f=0;12>f;f++){var e=K([2E3,f]);b.push(this.monthsShort(e,""));c.push(this.months(e,""));d.push(this.months(e,""));d.push(this.monthsShort(e,""))}b.sort(a);c.sort(a);d.sort(a);for(f=
0;12>f;f++)b[f]=aa(b[f]),c[f]=aa(c[f]);for(f=0;24>f;f++)d[f]=aa(d[f]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+d.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+c.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+b.join("|")+")","i")}function kc(a,b,c,d,f,e,h){b=new Date(a,b,c,d,f,e,h);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function qa(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);
return b}function Ca(a,b,c){c=7+b-c;return-((7+qa(a,0,c).getUTCDay()-b)%7)+c-1}function zb(a,b,c,d,f){c=(7+c-d)%7;d=Ca(a,d,f);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(V(b)?366:365)+d):d>(V(a)?366:365)?(b=a+1,a=d-(V(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function ra(a,b,c){var d=Ca(a.year(),b,c);d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+ba(a,b,c)):d>ba(a.year(),b,c)?(b=d-ba(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function ba(a,b,c){var d=Ca(a,b,c);b=Ca(a+
1,b,c);return((V(a)?366:365)-d+b)/7}function lc(a,b,c){var d;a=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d){var f=K([2E3,1]).day(d);this._minWeekdaysParse[d]=this.weekdaysMin(f,"").toLocaleLowerCase();this._shortWeekdaysParse[d]=this.weekdaysShort(f,"").toLocaleLowerCase();this._weekdaysParse[d]=this.weekdays(f,"").toLocaleLowerCase()}if(c)b="dddd"===b?w.call(this._weekdaysParse,a):"ddd"===b?w.call(this._shortWeekdaysParse,
a):w.call(this._minWeekdaysParse,a);else if("dddd"===b){b=w.call(this._weekdaysParse,a);if(-1!==b)return b;b=w.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=w.call(this._minWeekdaysParse,a)}else if("ddd"===b){b=w.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=w.call(this._weekdaysParse,a);if(-1!==b)return b;b=w.call(this._minWeekdaysParse,a)}else{b=w.call(this._minWeekdaysParse,a);if(-1!==b)return b;b=w.call(this._weekdaysParse,a);if(-1!==b)return b;b=w.call(this._shortWeekdaysParse,
a)}return-1!==b?b:null}function Xa(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],f=[],e;for(e=0;7>e;e++){var h=K([2E3,1]).day(e);var g=this.weekdaysMin(h,"");var k=this.weekdaysShort(h,"");h=this.weekdays(h,"");b.push(g);c.push(k);d.push(h);f.push(g);f.push(k);f.push(h)}b.sort(a);c.sort(a);d.sort(a);f.sort(a);for(e=0;7>e;e++)c[e]=aa(c[e]),d[e]=aa(d[e]),f[e]=aa(f[e]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+f.join("|")+")","i");this._weekdaysStrictRegex=
new RegExp("^("+d.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+c.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+b.join("|")+")","i")}function Ya(){return this.hours()%12||12}function Ab(a,b){m(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Bb(a,b){return b._meridiemParse}function Cb(a){return a?a.toLowerCase().replace("_","-"):a}function Da(a){var b=null;if(!x[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=
sa._abbr,require("./locale/"+a),ja(b)}catch(c){}return x[a]}function ja(a,b){a&&((b=B(b)?W(a):Za(a,b))?sa=b:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?"));return sa._abbr}function Za(a,b){if(null!==b){var c=Db;b.abbr=a;if(null!=x[a])qb("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
c=x[a]._config;else if(null!=b.parentLocale)if(null!=x[b.parentLocale])c=x[b.parentLocale]._config;else if(c=Da(b.parentLocale),null!=c)c=c._config;else return ta[b.parentLocale]||(ta[b.parentLocale]=[]),ta[b.parentLocale].push({name:a,config:b}),null;x[a]=new Sa(sb(c,b));ta[a]&&ta[a].forEach(function(a){Za(a.name,a.config)});ja(a);return x[a]}delete x[a];return null}function W(a){var b;a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr);if(!a)return sa;if(!A(a)){if(b=Da(a))return b;a=[a]}a:{b=0;for(var c,
d,f,e;b<a.length;){e=Cb(a[b]).split("-");c=e.length;for(d=(d=Cb(a[b+1]))?d.split("-"):null;0<c;){if(f=Da(e.slice(0,c).join("-"))){a=f;break a}if(d&&d.length>=c&&ob(e,d,!0)>=c-1)break;c--}b++}a=sa}return a}function $a(a){var b;(b=a._a)&&-2===n(a).overflow&&(b=0>b[P]||11<b[P]?P:1>b[M]||b[M]>Ba(b[H],b[P])?M:0>b[y]||24<b[y]||24===b[y]&&(0!==b[I]||0!==b[Q]||0!==b[ca])?y:0>b[I]||59<b[I]?I:0>b[Q]||59<b[Q]?Q:0>b[ca]||999<b[ca]?ca:-1,n(a)._overflowDayOfYear&&(b<H||b>M)&&(b=M),n(a)._overflowWeeks&&-1===b&&
(b=mc),n(a)._overflowWeekday&&-1===b&&(b=nc),n(a).overflow=b);return a}function ka(a,b,c){return null!=a?a:null!=b?b:c}function ab(a){var b=[];if(!a._d){var c=new Date(g.now());c=a._useUTC?[c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()]:[c.getFullYear(),c.getMonth(),c.getDate()];if(a._w&&null==a._a[M]&&null==a._a[P]){var d=a._w;if(null!=d.GG||null!=d.W||null!=d.E){var f=1;var e=4;var h=ka(d.GG,a._a[H],ra(u(),1,4).year);var k=ka(d.W,1);var m=ka(d.E,1);if(1>m||7<m)var l=!0}else if(f=a._locale._week.dow,
e=a._locale._week.doy,k=ra(u(),f,e),h=ka(d.gg,a._a[H],k.year),k=ka(d.w,k.week),null!=d.d){if(m=d.d,0>m||6<m)l=!0}else if(null!=d.e){if(m=d.e+f,0>d.e||6<d.e)l=!0}else m=f;1>k||k>ba(h,f,e)?n(a)._overflowWeeks=!0:null!=l?n(a)._overflowWeekday=!0:(l=zb(h,k,m,f,e),a._a[H]=l.year,a._dayOfYear=l.dayOfYear)}if(null!=a._dayOfYear){l=ka(a._a[H],c[H]);if(a._dayOfYear>(V(l)?366:365)||0===a._dayOfYear)n(a)._overflowDayOfYear=!0;l=qa(l,0,a._dayOfYear);a._a[P]=l.getUTCMonth();a._a[M]=l.getUTCDate()}for(l=0;3>l&&
null==a._a[l];++l)a._a[l]=b[l]=c[l];for(;7>l;l++)a._a[l]=b[l]=null==a._a[l]?2===l?1:0:a._a[l];24===a._a[y]&&0===a._a[I]&&0===a._a[Q]&&0===a._a[ca]&&(a._nextDay=!0,a._a[y]=0);a._d=(a._useUTC?qa:kc).apply(null,b);b=a._useUTC?a._d.getUTCDay():a._d.getDay();null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[y]=24);a._w&&"undefined"!==typeof a._w.d&&a._w.d!==b&&(n(a).weekdayMismatch=!0)}}function Eb(a){var b;var c=a._i;var d=oc.exec(c)||pc.exec(c);if(d){n(a).iso=!0;c=0;for(b=
Ea.length;c<b;c++)if(Ea[c][1].exec(d[1])){var f=Ea[c][0];var e=!1!==Ea[c][2];break}if(null==f)a._isValid=!1;else{if(d[3]){c=0;for(b=bb.length;c<b;c++)if(bb[c][1].exec(d[3])){var h=(d[2]||" ")+bb[c][0];break}if(null==h){a._isValid=!1;return}}if(e||null==h){if(d[4])if(qc.exec(d[4]))var g="Z";else{a._isValid=!1;return}a._f=f+(h||"")+(g||"");cb(a)}else a._isValid=!1}}else a._isValid=!1}function Fb(a){var b=rc.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,
""));if(b){var c=b[3],d=b[2],f=b[5],e=b[6],h=b[7],g=parseInt(b[4],10);c=[49>=g?2E3+g:999>=g?1900+g:g,Gb.indexOf(c),parseInt(d,10),parseInt(f,10),parseInt(e,10)];h&&c.push(parseInt(h,10));a:{if(h=b[1])if(h=Hb.indexOf(h),d=(new Date(c[0],c[1],c[2])).getDay(),h!==d){n(a).weekdayMismatch=!0;h=a._isValid=!1;break a}h=!0}h&&(a._a=c,(h=b[8])?b=sc[h]:b[9]?b=0:(b=parseInt(b[10],10),h=b%100,b=(b-h)/100*60+h),a._tzm=b,a._d=qa.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),n(a).rfc2822=!0)}else a._isValid=
!1}function tc(a){var b=uc.exec(a._i);null!==b?a._d=new Date(+b[1]):(Eb(a),!1===a._isValid&&(delete a._isValid,Fb(a),!1===a._isValid&&(delete a._isValid,g.createFromInputFallback(a))))}function cb(a){if(a._f===g.ISO_8601)Eb(a);else if(a._f===g.RFC_2822)Fb(a);else{a._a=[];n(a).empty=!0;var b=""+a._i,c,d,f=b.length,e=0;var h=ub(a._f,a._locale).match(tb)||[];for(c=0;c<h.length;c++){var k=h[c];if(d=(b.match(ic(k,a))||[])[0]){var l=b.substr(0,b.indexOf(d));0<l.length&&n(a).unusedInput.push(l);b=b.slice(b.indexOf(d)+
d.length);e+=d.length}if(ha[k]){if(d?n(a).empty=!1:n(a).unusedTokens.push(k),l=a,null!=d&&v(Wa,k))Wa[k](d,l._a,l,k)}else a._strict&&!d&&n(a).unusedTokens.push(k)}n(a).charsLeftOver=f-e;0<b.length&&n(a).unusedInput.push(b);12>=a._a[y]&&!0===n(a).bigHour&&0<a._a[y]&&(n(a).bigHour=void 0);n(a).parsedDateParts=a._a.slice(0);n(a).meridiem=a._meridiem;b=a._a;c=y;f=a._locale;h=a._a[y];e=a._meridiem;null!=e&&(null!=f.meridiemHour?h=f.meridiemHour(h,e):null!=f.isPM&&((f=f.isPM(e))&&12>h&&(h+=12),f||12!==h||
(h=0)));b[c]=h;ab(a);$a(a)}}function vc(a){if(!a._d){var b=Ta(a._i);a._a=mb([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});ab(a)}}function Ib(a){var b=a._i,c=a._f;a._locale=a._locale||W(a._l);if(null===b||void 0===c&&""===b)return xa({nullInput:!0});"string"===typeof b&&(a._i=b=a._locale.preparse(b));if(T(b))return new na($a(b));if(wa(b))a._d=b;else if(A(c))if(0===a._f.length)n(a).invalidFormat=!0,a._d=new Date(NaN);else{for(b=0;b<a._f.length;b++){c=
0;var d=Pa({},a);null!=a._useUTC&&(d._useUTC=a._useUTC);d._f=a._f[b];cb(d);if(Oa(d)&&(c+=n(d).charsLeftOver,c+=10*n(d).unusedTokens.length,n(d).score=c,null==f||c<f)){var f=c;var e=d}}S(a,e||d)}else c?cb(a):wc(a);Oa(a)||(a._d=null);return a}function wc(a){var b=a._i;B(b)?a._d=new Date(g.now()):wa(b)?a._d=new Date(b.valueOf()):"string"===typeof b?tc(a):A(b)?(a._a=mb(b.slice(0),function(a){return parseInt(a,10)}),ab(a)):ma(b)?vc(a):fa(b)?a._d=new Date(b):g.createFromInputFallback(a)}function nb(a,b,
c,d,f){var e={};if(!0===c||!1===c)d=c,c=void 0;var h;if(h=ma(a))a:if(h=a,Object.getOwnPropertyNames)h=0===Object.getOwnPropertyNames(h).length;else{for(var g in h)if(h.hasOwnProperty(g)){h=!1;break a}h=!0}if(h||A(a)&&0===a.length)a=void 0;e._isAMomentObject=!0;e._useUTC=e._isUTC=f;e._l=c;e._i=a;e._f=b;e._strict=d;a=new na($a(Ib(e)));a._nextDay&&(a.add(1,"d"),a._nextDay=void 0);return a}function u(a,b,c,d){return nb(a,b,c,d,!1)}function Jb(a,b){var c;1===b.length&&A(b[0])&&(b=b[0]);if(!b.length)return u();
var d=b[0];for(c=1;c<b.length;++c)if(!b[c].isValid()||b[c][a](d))d=b[c];return d}function Fa(a){var b=Ta(a);a=b.year||0;var c=b.quarter||0,d=b.month||0,f=b.week||0,e=b.day||0,h=b.hour||0,g=b.minute||0,k=b.second||0,m=b.millisecond||0;a:{for(var n in b)if(-1===w.call(ua,n)||null!=b[n]&&isNaN(b[n])){b=!1;break a}n=!1;for(var p=0;p<ua.length;++p)if(b[ua[p]]){if(n){b=!1;break a}parseFloat(b[ua[p]])!==l(b[ua[p]])&&(n=!0)}b=!0}this._isValid=b;this._milliseconds=+m+1E3*k+6E4*g+36E5*h;this._days=+e+7*f;this._months=
+d+3*c+12*a;this._data={};this._locale=W();this._bubble()}function db(a){return a instanceof Fa}function eb(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function Kb(a,b){m(a,0,0,function(){var a=this.utcOffset(),d="+";0>a&&(a=-a,d="-");return d+O(~~(a/60),2)+b+O(~~a%60,2)})}function fb(a,b){a=(b||"").match(a);if(null===a)return null;a=((a[a.length-1]||[])+"").match(xc)||["-",0,0];b=+(60*a[1])+l(a[2]);return 0===b?0:"+"===a[0]?b:-b}function gb(a,b){return b._isUTC?(b=b.clone(),a=(T(a)||wa(a)?a.valueOf():
u(a).valueOf())-b.valueOf(),b._d.setTime(b._d.valueOf()+a),g.updateOffset(b,!1),b):u(a).local()}function Lb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function J(a,b){var c=a;db(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:fa(a)?(c={},b?c[b]=a:c.milliseconds=a):(b=yc.exec(a))?(c="-"===b[1]?-1:1,c={y:0,d:l(b[M])*c,h:l(b[y])*c,m:l(b[I])*c,s:l(b[Q])*c,ms:l(eb(1E3*b[ca]))*c}):(b=zc.exec(a))?(c="-"===b[1]?-1:1,c={y:da(b[2],c),M:da(b[3],c),w:da(b[4],c),d:da(b[5],c),h:da(b[6],c),m:da(b[7],
c),s:da(b[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(b=u(c.from),c=u(c.to),b.isValid()&&c.isValid()?(c=gb(c,b),b.isBefore(c)?c=Mb(b,c):(c=Mb(c,b),c.milliseconds=-c.milliseconds,c.months=-c.months),b=c):b={milliseconds:0,months:0},c={},c.ms=b.milliseconds,c.M=b.months);c=new Fa(c);db(a)&&v(a,"_locale")&&(c._locale=a._locale);return c}function da(a,b){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*b}function Mb(a,b){var c={milliseconds:0,months:0};c.months=b.month()-
a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,"M");return c}function Nb(a,b){return function(c,d){if(null!==d&&!isNaN(+d)){qb(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");var f=c;c=d;d=f}c=J("string"===typeof c?+c:c,d);Ob(this,c,a);return this}}function Ob(a,b,c,d){var f=b._milliseconds,e=eb(b._days);
b=eb(b._months);a.isValid()&&(d=null==d?!0:d,b&&wb(a,Aa(a,"Month")+b*c),e&&vb(a,"Date",Aa(a,"Date")+e*c),f&&a._d.setTime(a._d.valueOf()+f*c),d&&g.updateOffset(a,e||b))}function hb(a,b){var c=12*(b.year()-a.year())+(b.month()-a.month()),d=a.clone().add(c,"months");0>b-d?(a=a.clone().add(c-1,"months"),b=(b-d)/(d-a)):(a=a.clone().add(c+1,"months"),b=(b-d)/(a-d));return-(c+b)||0}function Pb(a){if(void 0===a)return this._locale._abbr;a=W(a);null!=a&&(this._locale=a);return this}function Qb(){return this._locale}
function Ga(a,b){m(0,[a,a.length],0,b)}function Rb(a,b,c,d,f){if(null==a)return ra(this,d,f).year;var e=ba(a,d,f);b>e&&(b=e);a=zb(a,b,c,d,f);a=qa(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function Ac(a,b){b[ca]=l(1E3*("0."+a))}function Sb(a){return a}function Ha(a,b,c,d){var f=W();b=K().set(d,b);return f[c](b,a)}function Tb(a,b,c){fa(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return Ha(a,b,c,"month");var d=[];for(b=0;12>b;b++)d[b]=
Ha(a,b,c,"month");return d}function ib(a,b,c,d){"boolean"!==typeof a&&(c=b=a,a=!1);fa(b)&&(c=b,b=void 0);b=b||"";var f=W();a=a?f._week.dow:0;if(null!=c)return Ha(b,(c+a)%7,d,"day");f=[];for(c=0;7>c;c++)f[c]=Ha(b,(c+a)%7,d,"day");return f}function Ub(a,b,c,d){b=J(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function Vb(a){return 0>a?Math.floor(a):Math.ceil(a)}function X(a){return function(){return this.as(a)}}function ea(a){return function(){return this.isValid()?
this._data[a]:NaN}}function Bc(a,b,c,d,f){return f.relativeTime(b||1,!!c,a,d)}function la(a){return(0<a)-(0>a)||+a}function Ia(){if(!this.isValid())return this.localeData().invalidDate();var a=jb(this._milliseconds)/1E3,b=jb(this._days),c=jb(this._months);var d=E(a/60);var f=E(d/60);a%=60;d%=60;var e=E(c/12);c%=12;a=a?a.toFixed(3).replace(/\.?0+$/,""):"";var h=this.asSeconds();if(!h)return"P0D";var g=0>h?"-":"",k=la(this._months)!==la(h)?"-":"",l=la(this._days)!==la(h)?"-":"";h=la(this._milliseconds)!==
la(h)?"-":"";return g+"P"+(e?k+e+"Y":"")+(c?k+c+"M":"")+(b?l+b+"D":"")+(f||d||a?"T":"")+(f?h+f+"H":"")+(d?h+d+"M":"")+(a?h+a+"S":"")}var ec=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var Qa=g.momentProperties=[],Ra=!1,rb={};g.suppressDeprecationWarnings=!1;g.deprecationHandler=null;var Cc=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)v(a,b)&&c.push(b);return c};var oa={},z=
{},tb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,za=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ua={},ha={},Wb=/\d/,D=/\d\d/,Xb=/\d{3}/,kb=/\d{4}/,Ja=/[+-]?\d{6}/,t=/\d\d?/,Yb=/\d\d\d\d?/,Zb=/\d\d\d\d\d\d?/,Ka=/\d{1,3}/,lb=/\d{1,4}/,La=/[+-]?\d{1,6}/,Dc=/\d+/,Ma=/[+-]?\d+/,Ec=/Z|[+-]\d\d:?\d\d/gi,Na=/Z|[+-]\d\d(?::?\d\d)?/gi,va=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,
Va={},Wa={},H=0,P=1,M=2,y=3,I=4,Q=5,ca=6,mc=7,nc=8;m("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});m(0,["YY",2],0,function(){return this.year()%100});m(0,["YYYY",4],0,"year");m(0,["YYYYY",5],0,"year");m(0,["YYYYYY",6,!0],0,"year");C("year","y");z.year=1;k("Y",Ma);k("YY",t,D);k("YYYY",lb,kb);k("YYYYY",La,Ja);k("YYYYYY",La,Ja);r(["YYYYY","YYYYYY"],H);r("YYYY",function(a,b){b[H]=2===a.length?g.parseTwoDigitYear(a):l(a)});r("YY",function(a,b){b[H]=g.parseTwoDigitYear(a)});r("Y",function(a,
b){b[H]=parseInt(a,10)});g.parseTwoDigitYear=function(a){return l(a)+(68<l(a)?1900:2E3)};var $b=ia("FullYear",!0);var w=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};m("M",["MM",2],"Mo",function(){return this.month()+1});m("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});m("MMMM",0,0,function(a){return this.localeData().months(this,a)});C("month","M");z.month=8;k("M",t);k("MM",t,D);k("MMM",function(a,
b){return b.monthsShortRegex(a)});k("MMMM",function(a,b){return b.monthsRegex(a)});r(["M","MM"],function(a,b){b[P]=l(a)-1});r(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[P]=d:n(c).invalidMonth=a});var ac=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Gb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");m("w",["ww",2],"wo","week");m("W",["WW",2],"Wo","isoWeek");C("week","w");C("isoWeek","W");z.week=5;z.isoWeek=5;k("w",t);k("ww",t,D);k("W",t);k("WW",t,D);pa(["w","ww",
"W","WW"],function(a,b,c,d){b[d.substr(0,1)]=l(a)});m("d",0,"do","day");m("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});m("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});m("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});m("e",0,0,"weekday");m("E",0,0,"isoWeekday");C("day","d");C("weekday","e");C("isoWeekday","E");z.day=11;z.weekday=11;z.isoWeekday=11;k("d",t);k("e",t);k("E",t);k("dd",function(a,b){return b.weekdaysMinRegex(a)});k("ddd",
function(a,b){return b.weekdaysShortRegex(a)});k("dddd",function(a,b){return b.weekdaysRegex(a)});pa(["dd","ddd","dddd"],function(a,b,c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:n(c).invalidWeekday=a});pa(["d","e","E"],function(a,b,c,d){b[d]=l(a)});var Hb="Sun Mon Tue Wed Thu Fri Sat".split(" ");m("H",["HH",2],0,"hour");m("h",["hh",2],0,Ya);m("k",["kk",2],0,function(){return this.hours()||24});m("hmm",0,0,function(){return""+Ya.apply(this)+O(this.minutes(),2)});m("hmmss",0,0,function(){return""+
Ya.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)});m("Hmm",0,0,function(){return""+this.hours()+O(this.minutes(),2)});m("Hmmss",0,0,function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)});Ab("a",!0);Ab("A",!1);C("hour","h");z.hour=13;k("a",Bb);k("A",Bb);k("H",t);k("h",t);k("k",t);k("HH",t,D);k("hh",t,D);k("kk",t,D);k("hmm",Yb);k("hmmss",Zb);k("Hmm",Yb);k("Hmmss",Zb);r(["H","HH"],y);r(["k","kk"],function(a,b,c){a=l(a);b[y]=24===a?0:a});r(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);
c._meridiem=a});r(["h","hh"],function(a,b,c){b[y]=l(a);n(c).bigHour=!0});r("hmm",function(a,b,c){var d=a.length-2;b[y]=l(a.substr(0,d));b[I]=l(a.substr(d));n(c).bigHour=!0});r("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[y]=l(a.substr(0,d));b[I]=l(a.substr(d,2));b[Q]=l(a.substr(e));n(c).bigHour=!0});r("Hmm",function(a,b,c){c=a.length-2;b[y]=l(a.substr(0,c));b[I]=l(a.substr(c))});r("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[y]=l(a.substr(0,c));b[I]=l(a.substr(c,2));b[Q]=l(a.substr(d))});
var Fc=ia("Hours",!0),Db={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",
hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),monthsShort:Gb,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:Hb,meridiemParse:/[ap]\.?m?\.?/i},x={},ta={},sa,oc=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
pc=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qc=/Z|[+-]\d\d(?::?\d\d)?/,Ea=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],bb=
[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],uc=/^\/?Date\((\-?\d+)/i,rc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,sc={UT:0,GMT:0,EDT:-240,
EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};g.createFromInputFallback=F("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});g.ISO_8601=function(){};
g.RFC_2822=function(){};var Gc=F("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=u.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:xa()}),Hc=F("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=u.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:xa()}),ua="year quarter month week day hour minute second millisecond".split(" ");
Kb("Z",":");Kb("ZZ","");k("Z",Na);k("ZZ",Na);r(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=fb(Na,a)});var xc=/([\+\-]|\d\d)/gi;g.updateOffset=function(){};var yc=/^(\-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,zc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;J.fn=Fa.prototype;J.invalid=function(){return J(NaN)};var Ic=Nb(1,"add"),Jc=Nb(-1,"subtract");g.defaultFormat=
"YYYY-MM-DDTHH:mm:ssZ";g.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var bc=F("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});m(0,["gg",2],0,function(){return this.weekYear()%100});m(0,["GG",2],0,function(){return this.isoWeekYear()%100});Ga("gggg","weekYear");Ga("ggggg","weekYear");Ga("GGGG","isoWeekYear");Ga("GGGGG","isoWeekYear");C("weekYear",
"gg");C("isoWeekYear","GG");z.weekYear=1;z.isoWeekYear=1;k("G",Ma);k("g",Ma);k("GG",t,D);k("gg",t,D);k("GGGG",lb,kb);k("gggg",lb,kb);k("GGGGG",La,Ja);k("ggggg",La,Ja);pa(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=l(a)});pa(["gg","GG"],function(a,b,c,d){b[d]=g.parseTwoDigitYear(a)});m("Q",0,"Qo","quarter");C("quarter","Q");z.quarter=7;k("Q",Wb);r("Q",function(a,b){b[P]=3*(l(a)-1)});m("D",["DD",2],"Do","date");C("date","D");z.date=9;k("D",t);k("DD",t,D);k("Do",function(a,b){return a?
b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});r(["D","DD"],M);r("Do",function(a,b){b[M]=l(a.match(t)[0])});var cc=ia("Date",!0);m("DDD",["DDDD",3],"DDDo","dayOfYear");C("dayOfYear","DDD");z.dayOfYear=4;k("DDD",Ka);k("DDDD",Xb);r(["DDD","DDDD"],function(a,b,c){c._dayOfYear=l(a)});m("m",["mm",2],0,"minute");C("minute","m");z.minute=14;k("m",t);k("mm",t,D);r(["m","mm"],I);var Kc=ia("Minutes",!1);m("s",["ss",2],0,"second");C("second","s");z.second=15;k("s",t);k("ss",t,
D);r(["s","ss"],Q);var Lc=ia("Seconds",!1);m("S",0,0,function(){return~~(this.millisecond()/100)});m(0,["SS",2],0,function(){return~~(this.millisecond()/10)});m(0,["SSS",3],0,"millisecond");m(0,["SSSS",4],0,function(){return 10*this.millisecond()});m(0,["SSSSS",5],0,function(){return 100*this.millisecond()});m(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});m(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});m(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});m(0,
["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});C("millisecond","ms");z.millisecond=16;k("S",Ka,Wb);k("SS",Ka,D);k("SSS",Ka,Xb);var Y;for(Y="SSSS";9>=Y.length;Y+="S")k(Y,Dc);for(Y="S";9>=Y.length;Y+="S")r(Y,Ac);var Mc=ia("Milliseconds",!1);m("z",0,0,"zoneAbbr");m("zz",0,0,"zoneName");var e=na.prototype;e.add=Ic;e.calendar=function(a,b){a=a||u();var c=gb(a,this).startOf("day");c=g.calendarFormat(this,c)||"sameElse";b=b&&(L(b[c])?b[c].call(this,a):b[c]);return this.format(b||this.localeData().calendar(c,
this,u(a)))};e.clone=function(){return new na(this)};e.diff=function(a,b,c){if(!this.isValid())return NaN;a=gb(a,this);if(!a.isValid())return NaN;var d=6E4*(a.utcOffset()-this.utcOffset());b=G(b);switch(b){case "year":b=hb(this,a)/12;break;case "month":b=hb(this,a);break;case "quarter":b=hb(this,a)/3;break;case "second":b=(this-a)/1E3;break;case "minute":b=(this-a)/6E4;break;case "hour":b=(this-a)/36E5;break;case "day":b=(this-a-d)/864E5;break;case "week":b=(this-a-d)/6048E5;break;default:b=this-
a}return c?b:E(b)};e.endOf=function(a){a=G(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};e.format=function(a){a||(a=this.isUtc()?g.defaultFormatUtc:g.defaultFormat);a=ya(this,a);return this.localeData().postformat(a)};e.from=function(a,b){return this.isValid()&&(T(a)&&a.isValid()||u(a).isValid())?J({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};e.fromNow=function(a){return this.from(u(),
a)};e.to=function(a,b){return this.isValid()&&(T(a)&&a.isValid()||u(a).isValid())?J({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};e.toNow=function(a){return this.to(u(),a)};e.get=function(a){a=G(a);return L(this[a])?this[a]():this};e.invalidAt=function(){return n(this).overflow};e.isAfter=function(a,b){a=T(a)?a:u(a);if(!this.isValid()||!a.isValid())return!1;b=G(B(b)?"millisecond":b);return"millisecond"===b?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(b).valueOf()};
e.isBefore=function(a,b){a=T(a)?a:u(a);if(!this.isValid()||!a.isValid())return!1;b=G(B(b)?"millisecond":b);return"millisecond"===b?this.valueOf()<a.valueOf():this.clone().endOf(b).valueOf()<a.valueOf()};e.isBetween=function(a,b,c,d){d=d||"()";return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,c):!this.isAfter(b,c))};e.isSame=function(a,b){a=T(a)?a:u(a);if(!this.isValid()||!a.isValid())return!1;b=G(b||"millisecond");if("millisecond"===b)return this.valueOf()===a.valueOf();
a=a.valueOf();return this.clone().startOf(b).valueOf()<=a&&a<=this.clone().endOf(b).valueOf()};e.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};e.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};e.isValid=function(){return Oa(this)};e.lang=bc;e.locale=Pb;e.localeData=Qb;e.max=Hc;e.min=Gc;e.parsingFlags=function(){return S({},n(this))};e.set=function(a,b){if("object"===typeof a){a=Ta(a);b=fc(a);for(var c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=
G(a),L(this[a]))return this[a](b);return this};e.startOf=function(a){a=G(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};e.subtract=Jc;e.toArray=function(){return[this.year(),this.month(),
this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};e.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};e.toDate=function(){return new Date(this.valueOf())};e.toISOString=function(a){if(!this.isValid())return null;var b=(a=!0!==a)?this.clone().utc():this;return 0>b.year()||9999<b.year()?ya(b,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):
L(Date.prototype.toISOString)?a?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",ya(b,"Z")):ya(b,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};e.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b="";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");a="["+a+'("]';var c=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(a+c+"-MM-DD[T]HH:mm:ss.SSS"+
(b+'[")]'))};e.toJSON=function(){return this.isValid()?this.toISOString():null};e.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};e.unix=function(){return Math.floor(this.valueOf()/1E3)};e.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};e.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};e.year=$b;e.isLeapYear=function(){return V(this.year())};e.weekYear=function(a){return Rb.call(this,
a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};e.isoWeekYear=function(a){return Rb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};e.quarter=e.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};e.month=xb;e.daysInMonth=function(){return Ba(this.year(),this.month())};e.week=e.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};e.isoWeek=e.isoWeeks=function(a){var b=
ra(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};e.weeksInYear=function(){var a=this.localeData()._week;return ba(this.year(),a.dow,a.doy)};e.isoWeeksInYear=function(){return ba(this.year(),1,4)};e.date=cc;e.day=e.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};
e.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};e.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=this.localeData();a="string"===typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};e.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:
this.add(a-b,"d")};e.hour=e.hours=Fc;e.minute=e.minutes=Kc;e.second=e.seconds=Lc;e.millisecond=e.milliseconds=Mc;e.utcOffset=function(a,b,c){var d=this._offset||0,e;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"===typeof a){if(a=fb(Na,a),null===a)return this}else 16>Math.abs(a)&&!c&&(a*=60);!this._isUTC&&b&&(e=15*-Math.round(this._d.getTimezoneOffset()/15));this._offset=a;this._isUTC=!0;null!=e&&this.add(e,"m");d!==a&&(!b||this._changeInProgress?Ob(this,J(a-d,"m"),1,!1):this._changeInProgress||
(this._changeInProgress=!0,g.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?d:15*-Math.round(this._d.getTimezoneOffset()/15)};e.utc=function(a){return this.utcOffset(0,a)};e.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};e.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var a=fb(Ec,this._i);null!=a?this.utcOffset(a):
this.utcOffset(0,!0)}return this};e.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?u(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};e.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};e.isLocal=function(){return this.isValid()?!this._isUTC:!1};e.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};e.isUtc=Lb;e.isUTC=Lb;e.zoneAbbr=function(){return this._isUTC?"UTC":""};e.zoneName=function(){return this._isUTC?
"Coordinated Universal Time":""};e.dates=F("dates accessor is deprecated. Use date instead.",cc);e.months=F("months accessor is deprecated. Use month instead",xb);e.years=F("years accessor is deprecated. Use year instead",$b);e.zone=F("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});e.isDSTShifted=F("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",
function(){if(!B(this._isDSTShifted))return this._isDSTShifted;var a={};Pa(a,this);a=Ib(a);if(a._a){var b=a._isUTC?K(a._a):u(a._a);this._isDSTShifted=this.isValid()&&0<ob(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var q=Sa.prototype;q.calendar=function(a,b,c){a=this._calendar[a]||this._calendar.sameElse;return L(a)?a.call(b,c):a};q.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=
c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};q.invalidDate=function(){return this._invalidDate};q.ordinal=function(a){return this._ordinal.replace("%d",a)};q.preparse=Sb;q.postformat=Sb;q.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];return L(e)?e(a,b,c,d):e.replace(/%d/i,a)};q.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return L(a)?a(b):a.replace(/%s/i,b)};q.set=function(a){var b;for(b in a){var c=a[b];L(c)?this[b]=
c:this["_"+b]=c}this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};q.months=function(a,b){return a?A(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||ac).test(b)?"format":"standalone"][a.month()]:A(this._months)?this._months:this._months.standalone};q.monthsShort=function(a,b){return a?A(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[ac.test(b)?"format":"standalone"][a.month()]:
A(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};q.monthsParse=function(a,b,c){var d;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d){var e=K([2E3,d]);this._shortMonthsParse[d]=this.monthsShort(e,"").toLocaleLowerCase();this._longMonthsParse[d]=this.months(e,"").toLocaleLowerCase()}if(c)b="MMM"===b?w.call(this._shortMonthsParse,a):w.call(this._longMonthsParse,a);
else if("MMM"===b){b=w.call(this._shortMonthsParse,a);if(-1!==b)break a;b=w.call(this._longMonthsParse,a)}else{b=w.call(this._longMonthsParse,a);if(-1!==b)break a;b=w.call(this._shortMonthsParse,a)}b=-1!==b?b:null}return b}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(d=0;12>d;d++)if(e=K([2E3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+
this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(e="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(e.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a)||c&&"MMM"===b&&this._shortMonthsParse[d].test(a)||!c&&this._monthsParse[d].test(a))return d};q.monthsRegex=function(a){if(this._monthsParseExact)return v(this,"_monthsRegex")||yb.call(this),a?this._monthsStrictRegex:this._monthsRegex;v(this,"_monthsRegex")||(this._monthsRegex=
va);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};q.monthsShortRegex=function(a){if(this._monthsParseExact)return v(this,"_monthsRegex")||yb.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;v(this,"_monthsShortRegex")||(this._monthsShortRegex=va);return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};q.week=function(a){return ra(a,this._week.dow,this._week.doy).week};q.firstDayOfYear=function(){return this._week.doy};
q.firstDayOfWeek=function(){return this._week.dow};q.weekdays=function(a,b){return a?A(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]:A(this._weekdays)?this._weekdays:this._weekdays.standalone};q.weekdaysMin=function(a){return a?this._weekdaysMin[a.day()]:this._weekdaysMin};q.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort};q.weekdaysParse=function(a,b,c){var d;if(this._weekdaysParseExact)return lc.call(this,
a,b,c);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(d=0;7>d;d++){var e=K([2E3,1]).day(d);c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".","\\.?")+"$","i"));this._weekdaysParse[d]||
(e="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(e.replace(".",""),"i"));if(c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a)||c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a)||c&&"dd"===b&&this._minWeekdaysParse[d].test(a)||!c&&this._weekdaysParse[d].test(a))return d}};q.weekdaysRegex=function(a){if(this._weekdaysParseExact)return v(this,"_weekdaysRegex")||Xa.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;v(this,"_weekdaysRegex")||
(this._weekdaysRegex=va);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};q.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return v(this,"_weekdaysRegex")||Xa.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;v(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=va);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};q.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return v(this,
"_weekdaysRegex")||Xa.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;v(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=va);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};q.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};q.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};ja("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10;b=1===l(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":
"th";return a+b}});g.lang=F("moment.lang is deprecated. Use moment.locale instead.",ja);g.langData=F("moment.langData is deprecated. Use moment.localeData instead.",W);var R=Math.abs,Nc=X("ms"),Oc=X("s"),Pc=X("m"),Qc=X("h"),Rc=X("d"),Sc=X("w"),Tc=X("M"),Uc=X("y"),Vc=ea("milliseconds"),Wc=ea("seconds"),Xc=ea("minutes"),Yc=ea("hours"),Zc=ea("days"),$c=ea("months"),ad=ea("years"),Z=Math.round,N={ss:44,s:45,m:45,h:22,d:26,M:11},jb=Math.abs,p=Fa.prototype;p.isValid=function(){return this._isValid};p.abs=
function(){var a=this._data;this._milliseconds=R(this._milliseconds);this._days=R(this._days);this._months=R(this._months);a.milliseconds=R(a.milliseconds);a.seconds=R(a.seconds);a.minutes=R(a.minutes);a.hours=R(a.hours);a.months=R(a.months);a.years=R(a.years);return this};p.add=function(a,b){return Ub(this,a,b,1)};p.subtract=function(a,b){return Ub(this,a,b,-1)};p.as=function(a){if(!this.isValid())return NaN;var b=this._milliseconds;a=G(a);if("month"===a||"year"===a){var c=this._days+b/864E5;c=this._months+
4800*c/146097;return"month"===a?c:c/12}c=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return c/7+b/6048E5;case "day":return c+b/864E5;case "hour":return 24*c+b/36E5;case "minute":return 1440*c+b/6E4;case "second":return 86400*c+b/1E3;case "millisecond":return Math.floor(864E5*c)+b;default:throw Error("Unknown unit "+a);}};p.asMilliseconds=Nc;p.asSeconds=Oc;p.asMinutes=Pc;p.asHours=Qc;p.asDays=Rc;p.asWeeks=Sc;p.asMonths=Tc;p.asYears=Uc;p.valueOf=function(){return this.isValid()?
this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*l(this._months/12):NaN};p._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*Vb(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=E(a/1E3);d.seconds=a%60;a=E(a/60);d.minutes=a%60;a=E(a/60);d.hours=a%24;b+=E(a/24);a=E(4800*b/146097);c+=a;b-=Vb(146097*a/4800);a=E(c/12);d.days=b;d.months=c%12;d.years=a;return this};p.clone=function(){return J(this)};p.get=function(a){a=
G(a);return this.isValid()?this[a+"s"]():NaN};p.milliseconds=Vc;p.seconds=Wc;p.minutes=Xc;p.hours=Yc;p.days=Zc;p.weeks=function(){return E(this.days()/7)};p.months=$c;p.years=ad;p.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData();var c=!a;var d=J(this).abs(),e=Z(d.as("s")),g=Z(d.as("m")),h=Z(d.as("h")),k=Z(d.as("d")),l=Z(d.as("M"));d=Z(d.as("y"));e=e<=N.ss&&["s",e]||e<N.s&&["ss",e]||1>=g&&["m"]||g<N.m&&["mm",g]||1>=h&&["h"]||h<N.h&&["hh",h]||1>=
k&&["d"]||k<N.d&&["dd",k]||1>=l&&["M"]||l<N.M&&["MM",l]||1>=d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=b;c=Bc.apply(null,e);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};p.toISOString=Ia;p.toString=Ia;p.toJSON=Ia;p.locale=Pb;p.localeData=Qb;p.toIsoString=F("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ia);p.lang=bc;m("X",0,0,"unix");m("x",0,0,"valueOf");k("x",Ma);k("X",/[+-]?\d+(\.\d{1,3})?/);r("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});
r("x",function(a,b,c){c._d=new Date(l(a))});g.version="2.22.2";var dc=u;g.fn=e;g.min=function(){var a=[].slice.call(arguments,0);return Jb("isBefore",a)};g.max=function(){var a=[].slice.call(arguments,0);return Jb("isAfter",a)};g.now=function(){return Date.now?Date.now():+new Date};g.utc=K;g.unix=function(a){return u(1E3*a)};g.months=function(a,b){return Tb(a,b,"months")};g.isDate=wa;g.locale=ja;g.invalid=xa;g.duration=J;g.isMoment=T;g.weekdays=function(a,b,c){return ib(a,b,c,"weekdays")};g.parseZone=
function(){return u.apply(null,arguments).parseZone()};g.localeData=W;g.isDuration=db;g.monthsShort=function(a,b){return Tb(a,b,"monthsShort")};g.weekdaysMin=function(a,b,c){return ib(a,b,c,"weekdaysMin")};g.defineLocale=Za;g.updateLocale=function(a,b){if(null!=b){var c=Db;var d=Da(a);null!=d&&(c=d._config);b=sb(c,b);b=new Sa(b);b.parentLocale=x[a];x[a]=b;ja(a)}else null!=x[a]&&(null!=x[a].parentLocale?x[a]=x[a].parentLocale:null!=x[a]&&delete x[a]);return x[a]};g.locales=function(){return Cc(x)};
g.weekdaysShort=function(a,b,c){return ib(a,b,c,"weekdaysShort")};g.normalizeUnits=G;g.relativeTimeRounding=function(a){return void 0===a?Z:"function"===typeof a?(Z=a,!0):!1};g.relativeTimeThreshold=function(a,b){if(void 0===N[a])return!1;if(void 0===b)return N[a];N[a]=b;"s"===a&&(N.ss=b-1);return!0};g.calendarFormat=function(a,b){a=a.diff(b,"days",!0);return-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};g.prototype=e;g.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",
DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};return g})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.lib.js' */
define("jira/moment/moment.lib",["atlassian/libs/moment-2.22.2"],function(n){return n});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.formatter.js' */
define("jira/moment/moment.jira.formatter",["underscore","exports"],function(t,e){"use strict";function r(e){return u[e]||t.reduce(e,function(t,e){return t+(u[e]||e)},"")}function n(e){var n=!1,u=!1,a="",o=t.reduce(e,function(t,e,o,i){return u?u=!1:"'"===e?(a&&(t+=r(a),a=""),"'"===i[o+1]?(t+=e,u=!0):(t+=n?"]":"[",n=!n)):n?t+=e:/[a-zA-Z]/.test(e)?a&&a[a.length-1]!==e?(t+=r(a),a=e):a+=e:(a&&(t+=r(a),a=""),t+=e),t},"");return a&&(o+=r(a)),o}var u={d:"D",y:"Y",a:"A",E:"d",u:"d",Z:"ZZ",z:"[GMT]ZZ",XX:"ZZ",XXX:"Z"};e.translateSimpleDateFormat=n});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.i18n.js' */
!function(){"use strict";var e;define("jira/moment/moment.jira.datetime-formats",["wrm/data"],function(t){return e||(e=t.claim("jira.core:dateFormatProvider.allFormats")),e})}(),define("jira/moment/moment.jira.i18n",["jira/moment/moment.lib","jira/moment/moment.jira.datetime-formats","jira/moment/moment.jira.formatter","jira/util/formatter"],function(e,t,m,a){"use strict";var o=t.dateFormats,r=t.lookAndFeelFormats;return e.locale("jira",{months:o.months,monthsShort:o.monthsShort,weekdays:o.weekdays,weekdaysShort:o.weekdaysShort,weekdaysMin:o.weekdaysShort,longDateFormat:{LT:m.translateSimpleDateFormat(r.time),L:m.translateSimpleDateFormat(r.day),LL:m.translateSimpleDateFormat(r.dmy),LLL:m.translateSimpleDateFormat(r.complete)},meridiem:function(e){return o.meridiem[+(e>11)]},calendar:{sameDay:"LLL",nextDay:"LLL",nextWeek:"LLL",lastDay:"LLL",lastWeek:"LLL",sameElse:"LLL"},relativeTime:{future:a.format("{0}\u5185","%s"),past:a.format("{0}\u4e4b\u524d","%s"),s:"\u51e0\u79d2\u949f",m:"\u4e00\u5206\u949f",mm:a.format("{0}\u5206\u949f","%d"),h:"\u4e00\u5c0f\u65f6",hh:a.format("{0}\u5c0f\u65f6","%d"),d:"\u4e00\u5929",dd:a.format("{0}\u5929","%d"),M:"\u4e00\u6708",MM:a.format("{0}\u6708","%d"),y:"\u4e00\u5e74",yy:a.format("{0}\u5e74","%d")}}),e});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.js' */
define("jira/moment",["jira/moment/moment.jira.i18n"],function(t){return t.splitDate=function(t,n){return Date.splitDate(t,n)},t});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.legacy.js' */
!function(){AJS.namespace("JIRA.translateSimpleDateFormat",null,require("jira/moment/moment.jira.formatter").translateSimpleDateFormat),AJS.namespace("window.moment",null,require("jira/moment"))}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/time.js' */
define("dndattachment/ctrlv/time",["require"],function(a){return a("jira/moment")});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/base64decode.js' */
define("dndattachment/ctrlv/base64decode",["exports"],function(c){var f=function(b){b=b.replace(/[^A-Za-z0-9\+\/]/g,"");for(var g=b.length,c=3*g+1>>2,f=new Uint8Array(c),d,h=0,k=0,e=0;e<g;e++){d=e&3;var a=b.charCodeAt(e);h|=(64<a&&91>a?a-65:96<a&&123>a?a-71:47<a&&58>a?a+4:43===a?62:47===a?63:0)<<18-6*d;if(3===d||1===g-e){for(d=0;3>d&&k<c;d++,k++)f[k]=h>>>(16>>>d&24)&255;h=0}}return f};c.base64decode=f;c.decodeBase64DataUri=function(b){var c=b.slice(0,b.indexOf(";base64,"))+";base64,";b=b.substring(c.length);
return f(b)}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'js/ctrlv/utility.js' */
define("dndattachment/ctrlv/utility",["require","exports"],function(h,c){var q=h("jira/jquery/deferred"),l=h("jquery"),d=h("underscore"),r=h("dndattachment/ctrlv/base64decode"),t=h("dndattachment/ctrlv/time"),u=h("jira/flag"),m=h("jira/util/navigator");c.isKeyPasteEvent=function(a,b){b=-1!==(b||"").indexOf("Mac")||m.isMac();return 86===a.which&&(b?a.metaKey:a.ctrlKey)};c.isImagePasteEvent=function(a){if(a&&a.clipboardData){var b=d.union(d.toArray(a.clipboardData.items),d.toArray(a.clipboardData.files));
a=b.some(function(a){return-1!==a.type.indexOf("image")});b=b.some(function(a){return-1!==a.type.indexOf("rtf")});return a&&!b}};var n=function(a){if(a.clipboardData&&a.clipboardData.types&&d.contains(a.clipboardData.types,"text/html"))return a=l(a.clipboardData.getData("text/html")),1===a.length&&0===a.children().length&&"img"===a[0].nodeName.toLowerCase()?a[0].src:null};c.getHtmlImagePaste=n;c.isHtmlImagePasteEvent=function(a){return null!=n(a)};c.isTextPasteEvent=function(a){return a.clipboardData.types&&
(d.contains(a.clipboardData.types,"text/plain")||d.contains(a.clipboardData.types,"text/html"))};c.isContentEditable=function(a){return"true"==a.contentEditable||""==a.contentEditable||"inherit"==a.contentEditable&&l(a).parents().is("[contenteditable\x3dtrue]")};c.isValidFileName=function(a){return!d('\\/":?*\x3c|\x3e!'.split("")).any(function(b){return-1<a.indexOf(b)})};c.getTextPasteContent=function(a){return a.clipboardData.types&&d.contains(a.clipboardData.types,"text/plain")&&a.clipboardData.getData("text/plain")||
""};c.getTextContent=function(a){return a?a.innerText:""};c.normalizePasteEvent=function(a){a&&a.originalEvent&&a.originalEvent.clipboardData&&(a.clipboardData=a.originalEvent.clipboardData);a&&!a.clipboardData&&window.clipboardData&&(a.clipboardData={files:window.clipboardData.files,types:{contains:function(a){if("text/plain"==a)return!!window.clipboardData.getData("Text")}},getData:function(a){if("text/plain"==a)return window.clipboardData.getData("Text")}});return a};c.browserIsNativePaste=function(){return m.isChrome()||
m.isSafari()};c.isWikiTextfield=function(a){return a.is(":input")&&a.hasClass("wiki-textfield")};var p=function(a,b,k,g){var e=l(b);if((c.isWikiTextfield(e)||e.is("input#summary"))&&a){if(!e.is(":focus"))e.one("focus",function(){var b=e[0];b.selectionStart=b.selectionEnd=k+a.length});var f=e.val(),h=f.substring(0,k);g=f.substring(g,f.length);(f=e.data("wikiEditor"))&&f.undoRedoEl&&d.isFunction(f.undoRedoEl.recordHistoryItem)&&f.undoRedoEl.recordHistoryItem();e.val(h+a+g);e.trigger("input");b.selectionStart=
b.selectionEnd=k+a.length;f&&f.undoRedoEl&&d.isFunction(f.undoRedoEl.updateCurrent)&&f.undoRedoEl.updateCurrent()}};c.insertToInput=p;c.isThumbnailsAllowed=function(){var a=l("#dnd-metadata-webpanel").data("thumbnails-allowed"),b=!0;null!=a&&(b=!!a);return b};c.getMarkup=function(a){var b=["bmp","gif"],k=["pjpeg","jpeg","jpg","png"],g=a.split("."),e=c.isThumbnailsAllowed();g=g[g.length-1].toLowerCase();return e&&d.contains(k,g)?"!"+a+"|thumbnail!":d.contains(k,g)||d.contains(b,g)?"!"+a+"!":"[^"+a+
"]"};c.insertWikiMarkup=function(a,b,k,d,e){(a=c.getMarkup(a,e))&&p(" "+a+" ",b,k,d)};c.loadImage=function(a){var b=new q,c=new Image;c.setAttribute("crossOrigin","anonymous");c.onload=function(){b.resolve(c)};c.onerror=b.reject.bind(b);c.src=a;0<c.width&&0<c.height&&b.resolve(c);return b};c.convertImageToBlob=function(a){var b=l("\x3ccanvas\x3e").attr("width",a.width).attr("height",a.height)[0];b.getContext("2d").drawImage(a,0,0);try{if(b.mozGetAsFile)return b.mozGetAsFile("image/png");if(b.toDataURL)return new Blob([r.decodeBase64DataUri(b.toDataURL("image/png"))],
{type:"image/png"})}catch(k){return null}};c.convertBlobToImage=function(a,b){a=new Blob([a.slice()],{type:a.type});a.lastModifiedDate=new Date;a.name=b;return a};c.dropFileToElement=function(a,b){var c=a.name;c||(c=this.generateFileName(),a.name=c+".png");a=l.Event("drop",{dataTransfer:{files:[a]}});var d=!1;l(document).on("dropHandled.dropFileToElement",function(){d=!0});b.trigger(a);l(document).off(".dropFileToElement");return d};c.generateFileName=function(){return"image-"+t().format("YYYY-MM-DD-HH-mm-ss-SSS")};
c.getCurrentIssueId=function(){return JIRA.Issues.Api.getSelectedIssueId()};c.showErrorMsg=function(a,b){u.showErrorMsg(a,b)};c.createBlobFromFile=function(a){var b=new Blob([a.slice()],{type:a.type});b.name=a.name;return b};c.dragEventContainsFiles=function(a){if(!a.dataTransfer||!a.dataTransfer.types)return!0;a=a.dataTransfer.types;return m.isMozilla()?d.contains(a,"application/x-moz-file"):d.contains(a,"Files")}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/Configuration.js' */
define("dndattachment/util/Configuration",["require"],function(a){var b=a("wrm/data");return{getWRM:function(a){return b.claim("com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone."+a)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/DataTransfer.js' */
define("dndattachment/util/DataTransfer",["require"],function(f){var h=f("jira/lib/class"),d=f("underscore"),e=f("jira/jquery/deferred"),g=f("jquery");return h.extend({init:function(b){this._dataTransfer=b},getFiles:function(){var b=this._dataTransfer.files,a=this._dataTransfer.items;return a&&0<a.length&&d.any(a,function(c){return!!c.webkitGetAsEntry})?this.readEntries(a):b&&0<b.length?this.readFiles(this._dataTransfer.files):(new e).reject()},readFiles:function(b){var a=new e;g.when.apply(window,
d.map(b,function(c){var a=new e;!c.name.match(/\.([a-z0-9]+)$/i)&&8192>=c.size||8192==c.size||4096==c.size||1024>=c.size?this.readFileAsText(c).fail(function(){b=d(b).without(c)}).always(a.resolve.bind(a)):a.resolve();return a}.bind(this))).always(function(){a.resolve(b)});return a},readFileAsText:function(b){var a=new e,c=new FileReader;c.onload=function(){a.resolve(this.result)};c.onerror=function(){a.reject(this.error)};c.readAsText(b);return a},readEntries:function(b){var a=new e;b=d.filter(b,
function(a){return"file"===a.kind});g.when.apply(window,d.map(b,function(a){return this.readEntry(a.webkitGetAsEntry(),a)}.bind(this))).then(function(){a.resolve(d.union.apply(d,arguments))},a.reject.bind(a));return a},readEntry:function(b,a){var c=new e;b.isFile?a&&a.getAsFile?c.resolve([a.getAsFile()]):b.file(function(a){c.resolve([a])}):b.isDirectory&&b.createReader().readEntries(function(a){var b=[];g.when.apply(window,d.map(a,function(a){return this.readEntry(a).then(function(a){return b.push.apply(b,
a)})}.bind(this))).always(function(){c.resolve(b)})}.bind(this));return c}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/FileSizeUtil.js' */
define("dndattachment/util/FileSizeUtil",function(){return{format:function(a){return 1048576<a?(a/1048576).toFixed(2)+" MB":1024<a?Math.round(a/1024)+" kB":(a/1024).toFixed(1)+" kB"}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'js/util/AttachmentEvents.js' */
define("dndattachment/util/events/types",{ATTACHMENT_FOR_PAGE_RECEIVED:"attachmentForPageReceived"});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'js/upload/UploadHandler.js' */
define("dndattachment/upload/handler",["require","exports"],function(b,f){var l=b("jira/analytics"),r=b("jira/dialog/dialog-stack"),t=b("jira/jquery/deferred"),m=b("jira/util/events"),n=b("dndattachment/util/events/types"),g=b("underscore"),u=b("jquery"),k=b("dndattachment/ctrlv/utility"),h=[],p,q=function(c,a){var d=t(),e=r.current;if(e&&e.$form){l.send({name:"attach.screenshot.html5.dialogPaste",data:{}});var b=k.createBlobFromFile(a.files[0]);k.dropFileToElement(b,e.$form)&&d.resolve([a.files[0].name])}else if(b=
g.find(h,function(b){return b.isValid(c,a)}))d=b.processFiles(a.files,p),a.successCallback&&d.done(a.successCallback),a.failureCallback&&d.fail(a.failureCallback),a.alwaysCallback&&d.always(a.alwaysCallback);d.done(function(c,b){if(!b&&a.isWikiTextfieldFocused){var d=a.wikiTextfield;g.each(c,function(a){k.insertWikiMarkup(a,d,d.selectionStart,d.selectionStart)});e&&a.isPaste&&l.send({name:"attach.screenshot.html5.dialogPaste.insertWikiMarkup",data:{}});u(a.wikiTextfield).is(":focus")||setTimeout(function(){a.wikiTextfield.focus()},
0)}})},v=function(c){if(c){var a="undefined"!==typeof c.processFiles,b="undefined"!==typeof c.weight,e="undefined"!==typeof c.name;return"undefined"!==typeof c.isValid&&a&&b&&e}return!1};f.registerExecutor=function(b){var a=v(b);if(a){var c=g.reject(h,function(a){return a.name===b.name});c.push(b);h=g.sortBy(c,function(a){return-a.weight})}return a};f.unregisterExecutor=function(b){h=g.reject(h,function(a){return a.name===b.name})};f.initialize=function(){m.bind(n.ATTACHMENT_FOR_PAGE_RECEIVED,q)};
f.disable=function(){m.unbind(n.ATTACHMENT_FOR_PAGE_RECEIVED,q)};f.setAttachmentDropZone=function(b){p=b}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'js/upload/DefaultUploadExecutor.js' */
define("dndattachment/upload/default/executor",["require","exports"],function(c,a){a.name="Default attachment executor";a.weight=0;a.isValid=function(a,b){return!0};a.processFiles=function(a,b){return b.uploadFiles(a)}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/path.js' */
define("dndattachment/ctrlv/path",["exports"],function(b){var c=function(a){return a.split(/\//).pop()};b.basename=c;b.dirname=function(a){var b=c(a);return a.substring(0,a.length-b.length)}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'templates/soy/attach-screenshot-form.soy' */
// This file was automatically generated from attach-screenshot-form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Html5Screenshot.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Html5Screenshot == 'undefined') { JIRA.Templates.Html5Screenshot = {}; }


JIRA.Templates.Html5Screenshot.attachScreenshotForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml('\u4e0a\u4f20\u5c4f\u5e55\u622a\u56fe') + '</h2><form action="ShowAttachScreenshotFormAction.jspa" class="aui" method="post" id="attach-screenshot-form" data-attach-secure-token="' + soy.$$escapeHtml(opt_data.attachUserToken) + '" data-submit-secure-token="' + soy.$$escapeHtml(opt_data.submitUserToken) + '"><input type="hidden" name="id" value="' + soy.$$escapeHtml(opt_data.id) + '"/><input type="hidden" name="atl_token" value="' + soy.$$escapeHtml(opt_data.atlToken) + '"><input type="hidden" name="formToken" value="' + soy.$$escapeHtml(opt_data.formToken) + '"><input type="hidden" name="filetoconvert" value=""><div class="attach-screenshot-padding"><div class="attach-screenshot-container"><div id="attach-screenshot-inner-container"><div class="mod-content"><ul class="item-details"><li><dl><dt>' + soy.$$escapeHtml('\u622a\u5c4f:') + '</dt>' + ((opt_data.userPlatform == 'pc') ? '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3ePrtScn\x3c/kbd\x3e') + '</dd>' : '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3e\x26#8963; \u6309\u4f4f Ctrl\x3c/kbd\x3e+\x3ckbd\x3e\x26#8984; Cmd\x3c/kbd\x3e+\x3ckbd\x3e\x26#8679; Shift\x3c/kbd\x3e+\x3ckbd\x3e3\x3c/kbd\x3e') + '</dd>') + '</dl></li><li><dl><dt>' + soy.$$escapeHtml('\u7c98\u8d34\u56fe\u50cf:') + '</dt>' + ((opt_data.userPlatform == 'pc') ? '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3eCtrl\x3c/kbd\x3e+\x3ckbd\x3ev\x3c/kbd\x3e') + '</dd>' : '<dd>' + soy.$$filterNoAutoescape('\x3ckbd\x3e\x26#8984; Cmd\x3c/kbd\x3e+\x3ckbd\x3ev\x3c/kbd\x3e') + '</dd>') + '</dl></li></ul></div><input type="text" id="attach-screenshot-fake-input"><div class="attach-screenshot-padding attach-screenshot-padding-inner"><div id="attach-screenshot-image-container" class="attach-screenshot-image-container"><div class="attach-screenshot-placeholder"><div class="mod-content"><ul class="item-details"><li><dl><dt id="attach-screenshot-placeholder-message">' + soy.$$escapeHtml('\u8bf7\u5c06\u7167\u7247\u8d34\u6211\u8138\u4e0a') + '</dt></dl></li></ul></div></div></div></div><div id=\'attach-max-size\' class="hidden">' + soy.$$escapeHtml(opt_data.maxSize) + '</div></div></div></div><fieldset><div><legend><span>' + soy.$$escapeHtml('\u9644\u52a0\u9875\u9762\u622a\u56fe') + '</span></legend><div id="attach-screenshot-filename-group" class="field-group"><div id="attach-screenshot-progress-container"></div><label for="attachscreenshotname">' + soy.$$escapeHtml('\u6587\u4ef6\u540d') + ' <span class="aui-icon icon-required">' + soy.$$escapeHtml('\u5fc5\u9009\u9879') + '</span></label><input class="text" type="text" id="attachscreenshotname" name="attachscreenshotname" title="File Name" value="' + soy.$$escapeHtml(opt_data.nextScreenshotName) + '"><div class="description">' + soy.$$escapeHtml('\u8bf7\u586b\u5199\u6587\u4ef6\u540d') + '</div></div></div></fieldset><div class="buttons-container form-footer"><div class="buttons"><button class="aui-button aui-button-primary" id="attach-screenshot-html5-upload">' + soy.$$escapeHtml('\u4e0a\u4f20') + '</button><a href="#" class="cancel">' + soy.$$escapeHtml('\u53d6\u6d88') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.Html5Screenshot.attachScreenshotForm.soyTemplateName = 'JIRA.Templates.Html5Screenshot.attachScreenshotForm';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/html5.js' */
define("dndattachment/ctrlv/html5",["require","exports"],function(e,a){var l=e("jira/util/formatter"),q=e("wrm/context-path"),m=e("jira/jquery/deferred"),c=e("jquery"),k=e("underscore"),r=e("dndattachment/ctrlv/base64decode"),h=e("dndattachment/ctrlv/utility"),t=e("jira/dialog/dialog-stack"),n=e("jira/dialog/dialog-register"),p=e("jira/ajs/ajax/smart-ajax"),u=e("jira/attachment/inline-attach");a.getFileFromEvent=function(a){var b=new m;h.isImagePasteEvent(a)?b.resolve(k(a.clipboardData.items).filter(function(a){return-1!==
a.type.indexOf("image")}).map(function(a){return a.getAsFile()})[0]||k(a.clipboardData.files).filter(function(a){return-1!==a.type.indexOf("image")})[0]):b.reject();return b.promise()};a.REQUEST_TIMEOUT_MILLIS=3E5;a.screenshotFileUpload={};a.screenshotFileUploadUri=null;a.$document=void 0;a.$window=void 0;a.$container=void 0;a.$fakeInput=void 0;a.uploadError=!1;a.uploadErrorMsg="";a.progressView={hidden:!1,progress:0,old:0,progressBarContainer:void 0,progressEl:void 0,container:void 0,options:void 0,
staticProgress:void 0,initProgress:function(){this.container=this.buildContainer();this.progressEl=this.buildProgress();this.container.append(this.progressEl);this.options={showPercentage:!1,height:"5px"};this.progressBarContainer=c("#attach-screenshot-progress-container");this.progressBarContainer.empty();this.progressBarContainer.append(this.container);this.staticProgress=this.container;this.hidden=!0},finish:function(){this.value(100)},progressHandler:function(a){this.value(Math.round(100*a.loaded/
a.total))},value:function(a){100<a?a=100:0>a&&(a=0);this.hidden&&(this.progressEl.show(),this.hidden=!1);this.old!==a&&(this.progressEl.progressBar(a,this.options),100<=a&&this.progressEl.fadeOut(),this.old=a)},buildContainer:function(){return c("\x3cdiv\x3e").addClass("file-progress")},buildProgress:function(){return c("\x3cdiv\x3e").attr("id","attach-screenshot-upload-progress")}};a.dialogView={pasteCatcher:{},presenter:void 0,getMaxSize:function(){return c("#attach-max-size").text()},getFileSize:function(){return c.isPlainObject(this.presenter.screenshotFileUpload)&&
k.isEmpty(this.presenter.screenshotFileUpload)?0:this.presenter.screenshotFileUpload.size||this.presenter.screenshotFileUpload.byteLength||this.presenter.screenshotFileUpload.length},cleanGeneralErrors:function(){c("#error-attach-screenshot-image").closest(".field-group").remove()},cleanFileErrors:function(){c("#error-attach-screenshot-filename").remove()},displayErrors:function(a){"compatibility"in a&&h.showErrorMsg("",a.compatibility);"fileName"in a&&h.showErrorMsg("",a.fileName);"fileUpload"in
a&&h.showErrorMsg("",a.fileUpload)},appendBlobImage:function(a){var b=(window.URL||window.webkitURL).createObjectURL(a);this.presenter.screenshotFileUpload=a;this.createImage(b)},createImage:function(b){var d=new Image;d.onload=function(){};d.src=b;this.presenter.screenshotToUpload=d;b=c(d);b.addClass("attach-screenshot-pasted-image");d=c("#attach-screenshot-image-container");d.empty();d.append(b);this.presenter.$fakeInput.focus();k.defer(function(){a.imageCreatedHandler()})},checkInput:function(){var b=
a.dialogView.pasteCatcher.childNodes[0];if(b){if("IMG"===b.tagName&&0===b.src.indexOf("data:"))var d=b.src;a.dialogView.pasteCatcher.innerHTML=""}d||a.$fakeInput.focus();return d},onPaste:function(b){a.dialogView.cleanFileErrors();a.dialogView.cleanGeneralErrors();h.isImagePasteEvent(b)?a.getFileFromEvent(b).then(function(a){this.appendBlobImage(a)}.bind(this)):setTimeout(function(){var b=this.checkInput();b&&(a.screenshotFileUpload=r.decodeBase64DataUri(b),a.dialogView.createImage(b))}.bind(this),
0)},getFakeInput:function(){return c("#attach-screenshot-fake-input")},getContainer:function(){return c("#attach-screenshot-image-container")},getIssueKey:function(){return c("input[name\x3d'id']").val()},getDocument:function(){return c(document)},getWindow:function(){return c(window)},getFileNameInput:function(){return c("#attachscreenshotname")},hasPngExtension:function(a){return/\.png$/i.test(a)},setFileToConvert:function(a){c("input[name\x3d'filetoconvert']").val(a)},buildPasteCatcher:function(){if(document.getElementById("attach-screenshot-form")){var a=
document.createElement("div");a.setAttribute("contenteditable","true");a.style.width=0;a.style.height=0;a.style.position="absolute";a.style.top="-5000px";document.getElementById("attach-screenshot-form").appendChild(a);return a}},_getFormSubmits:function(){return c("#attach-screenshot-form").find("button.aui-button")},disable:function(){this._getFormSubmits().attr("disabled","disabled");return this},enable:function(){this._getFormSubmits().removeAttr("disabled");return this},isEnabled:function(){return this.isVisible()&&
!this._getFormSubmits().attr("disabled")},isVisible:function(){return 0<c("#attach-screenshot-form").length},initDialog:function(a){this.pasteCatcher={};this.presenter=a;this.pasteCatcher=this.buildPasteCatcher()}};a.initScreenshotPasteHandler=function(){var b=a.dialogView;a.screenshotFileUpload={};a.resetUploadErrors();a.dialogView.initDialog(a);a.$document=b.getDocument();a.$window=b.getWindow();a.$container=b.getContainer();a.$fakeInput=b.getFakeInput();a.bindOnce(a.$container,"click",a.setFocusOnClickHandler);
a.bindOnce(a.$fakeInput,"focus",a.showFocusOnFieldHandler);a.bindOnce(a.$fakeInput,"blur",a.hideFocusOnFieldHandler);a.bindOnce(a.$fakeInput,"keydown",a.keyDownHandler);a.bindOnce(a.$window,"paste",a.pasteHandler)};a.resetUploadErrors=function(){a.uploadError=!1;a.uploadErrorMsg=void 0};a.setUploadError=function(b){a.uploadError=!0;a.uploadErrorMsg=b};a.bindOnce=function(a,d,c){a.unbind(d,c);a.bind(d,c)};a.showFocusOnFieldHandler=function(){a.$container.addClass("focus")};a.hideFocusOnFieldHandler=
function(){a.$container.addClass("focus")};a.setFocusOnClickHandler=function(){a.$fakeInput.focus()};a.pasteHandler=function(b){a.dialogView.isEnabled()&&(b=h.normalizePasteEvent(b),a.dialogView.onPaste(b))};a.polyPasteHandler=function(b,d,c){a.dialogView.isEnabled()&&(a.screenshotFileUpload={length:-1},a.screenshotFileUploadUri=d,a.dialogView.createImage(c))};a.keyDownHandler=function(b){h.isKeyPasteEvent(b)&&a.dialogView.pasteCatcher.focus&&a.dialogView.pasteCatcher.focus()};a.imageCreatedHandler=
function(){a.doAjaxUpload(this.dialogView.getIssueKey(),this.dialogView.getFileNameInput().val())};a.getMimeType=function(){return"image/png"};a.createData=function(){return a.screenshotFileUpload};a.clipboardDataIsEmpty=function(a){return null!=window.clipboardData?!1:!(a&&a.clipboardData&&a.clipboardData.types&&0<a.clipboardData.types.length)};a.validateFileSize=function(b,d,c){d=d||a.dialogView.getFileSize();c=c||a.dialogView.getMaxSize();d>c&&(d=u.Text.fileSize(c,d),b.fileUpload=l.format("\u9644\u52a0\u7684\u622a\u56fe\u592a\u5927\u3002\u9644\u4ef6\u662f{0}\uff0c\u4f46\u5141\u8bb8\u7684\u6700\u5927\u9644\u4ef6\u662f{1}\u3002",
d[1],d[0]))};a.validateFormData=function(b,d){var g={};c.isPlainObject(b)&&k.isEmpty(b)&&(g.fileUpload="\u8bf7\u7c98\u8d34\u60a8\u5e0c\u671b\u4e0a\u4f20\u7684\u56fe\u7247");a.validateFileSize(g);a.uploadError&&(g.fileUpload="\u56fe\u7247\u4e0a\u4f20\u65f6\u51fa\u9519\uff0c\u60a8\u9700\u8981\u518d\u6b21\u7c98\u8d34\u4e0a\u4f20\u56fe\u7247\u3002\u62b1\u6b49\u5e26\u6765\u7684\u4e0d\u4fbf\u3002");""==d&&(g.fileName="\u60a8\u5fc5\u987b\u6307\u5b9a\u4e00\u4e2a\u56fe\u50cf\u6587\u4ef6\u540d\u3002");h.isValidFileName(d)||(g.fileName="\u6587\u4ef6\u540d\u7981\u6b62\u5305\u542b\u5b57\u7b26\u201c\\u201d\u3001\u201c/\u201d\u3001\u201c\"\u201d\u3001 \':\"\u3001\u201c?\u201d\u3001\u201c*\u201d\u3001\u201c\u003c\u201d\u3001\u201c|\u201d\u3001\u201c\u003e\u201d\u3001\u201c!\u201d");return g};a.doAjaxUpload=function(b,d){a.dialogView.disable();b=
{};a.validateFileSize(b);if(k.isEmpty(b)){b=a.createData();var g=a.getMimeType(),f=c("#attach-screenshot-form").data("attach-secure-token"),e=c("#attach-screenshot-form").find("input[name\x3d'formToken']").attr("value");d=q()+"/rest/internal/1.0/AttachTemporaryFile?size\x3d"+a.dialogView.getFileSize()+"\x26filename\x3d"+encodeURIComponent(d)+"\x26atl_token\x3d"+encodeURIComponent(atl_token())+"\x26issueId\x3d"+encodeURIComponent(this.dialogView.getIssueKey())+(f?"\x26secureToken\x3d"+encodeURIComponent(f):
"")+(e?"\x26formToken\x3d"+encodeURIComponent(e):"");a.resetUploadErrors();a.executeAjaxUpload(b,d,g).progress(function(b){"init"==b&&a.progressView.initProgress()}).done(function(b){"string"==typeof b&&(b=JSON.parse(b));a.dialogView.setFileToConvert(b.id)}).fail(function(b,c,d,f){if("abort"==f.statusText)var e="\u547c\u53eb\u670d\u52a1\u5668\u7684 Jira \u6ca1\u6709\u5b8c\u6210\u5728\u8d85\u65f6\u65f6\u95f4\u6bb5\u5185\u3002\u6211\u4eec\u4e0d\u80fd\u786e\u5b9a\u8fd9\u9879\u884c\u52a8\u7684\u7ed3\u679c\u3002";else f.hasData&&(b=JSON.parse(f.data),e=b.errorMessage?b.errorMessage:p.buildSimpleErrorContent(f,{alert:!1}));a.setUploadError(e);a.dialogView.displayErrors({fileUpload:e})}).always(function(){a.dialogView.enable();
a.progressView.finish()}).progress(function(b){"init"!=b&&a.progressView.progressHandler(b)})}else a.dialogView.displayErrors(b),a.dialogView.enable()};a.executeAjaxUpload=function(b,d,e){var f=m(),g=p.makeRequest({type:"POST",url:d,contentType:e,processData:!1,data:b,timeout:a.REQUEST_TIMEOUT_MILLIS,success:f.resolve.bind(f),error:f.reject.bind(f),xhr:function(){var a=c.ajaxSettings.xhr();f.notify("init");a.upload.addEventListener("progress",f.notify.bind(f));return a}});f.always(function(){c.ajaxSettings.xhr().removeEventListener("progress",
a.progressView.progressHandler);c(n.attachScreenshotDialog).off("Dialog.hide",g.abort)});c(n.attachScreenshotDialog).one("Dialog.hide",g.abort);return f.promise()};a.show=function(){var b=new m,d=c(".issueaction-attach-screenshot-html5");if(null!=t.current||0==d.length)return b.reject().promise();k.defer(function(){d.trigger("click")});c(document).on("dialogContentReady",function(c,d){d===n.attachScreenshotDialog&&a.dialogView.isEnabled()?b.resolve(d):b.reject()});c(document).on("ajaxComplete.jira.screenshot.dialog",
function(a,c,e){-1<e.url.indexOf(d.attr("href"))&&setTimeout(function(){"resolved"===!b.state()&&b.reject()},1E3)});b.always(function(){c(document).off("ajaxComplete.jira.screenshot.dialog")});return b.promise()}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/issue-paste.js' */
define("dndattachment/ctrlv/issue-paste",["require","exports"],function(h,p){function l(a,c){c.stateName=a;var b=function(){var b=c.apply(null,arguments);b.stateName=a;return b};b.stateName=a;return b}function q(a,c,b){return l(a,function(){var f=setTimeout(function(){e(9)},b),d=c.apply(null,arguments),g=function(a,b){if(a=d(a,b))return clearTimeout(f),a};g.stateName=a;return g})}function e(a,c){if(e.eventQueue)e.eventQueue.push({type:a,object:c});else{for(e.eventQueue=[{type:a,object:c}];0<e.eventQueue.length;)a=
e.eventQueue.splice(0,1)[0],(a=r(a.type,a.object))&&(r=a);delete e.eventQueue}}var k=h("jquery"),t=h("dndattachment/ctrlv/trace"),u=h("dndattachment/ctrlv/tracking"),f=h("dndattachment/ctrlv/utility"),y=h("dndattachment/ctrlv/html5"),z=h("dndattachment/ctrlv/base64decode"),v=h("jira/util/events"),A=h("dndattachment/util/events/types"),g=l("idle",function(){function a(a){if(!k(a.target).is(":input:not(.wiki-textfield, #summary)")&&!f.isContentEditable(a.target))return!0}return function(c,b){if(0==
c&&f.isKeyPasteEvent(b)){if(f.browserIsNativePaste()||!a(b))return;u.trigger("attach.screenshot.html5.catchClipboard");return new w(b)}if(1==c){if(f.isImagePasteEvent(b)){u.trigger("attach.screenshot.html5.handlePaste");if(!a(b)){t("jira/attach-images-plugin/pasteIgnored");return}k(b.target).is(":input.wiki-textfield")&&b.preventDefault();return new n(b)}t("jira/attach-images-plugin/pasteIgnoredNotImage")}}}),w=q("catchClipboard",function(a){var c=document.activeElement;a.selectionStart=a.target.selectionStart;
a.selectionEnd=a.target.selectionEnd;var b=k('\x3cdiv contenteditable\x3d"true" class\x3d"attach-screenshot-paste-catcher"\x3e\x3c/div\x3e').appendTo("body");b.focus();k(c).is(":focusable:input,:aui-focusable:input")&&setTimeout(function(){c.focus()});return function(e,d){if(1==e){if(f.isImagePasteEvent(d))return b.remove(),d.target=c,new n(d);if(f.isHtmlImagePasteEvent(d))return b.remove(),d.target=c,new x(d);if(f.isTextPasteEvent(d))return b.remove(),e=f.getTextPasteContent(d),f.insertToInput(e,
a.target,a.selectionStart,a.selectionEnd),d.preventDefault(),new g}if(9==e){b.remove();d=b.find("\x3eimg");if(d.is(":only-child")){d=d.attr("src");if(0===d.toLowerCase().indexOf("http"))return g();d=z.decodeBase64DataUri(d);d=new Blob([d],{type:"image/png"});return new m(d,a)}d=f.getTextContent(b[0]);f.insertToInput(d,a.target,a.selectionStart,a.selectionEnd);return g()}}}),x=l("imageLoading",function(a){var c=f.getHtmlImagePaste(a);c?f.loadImage(c).then(function(a){e(4,a)},e.bind(null,5)):e(5);return function(b,
c){if(4==b)return(b=f.convertImageToBlob(c))?new m(b,a):new g;if(9==b||5==b)return new g}}),n=q("fileLoading",function(a){y.getFileFromEvent(a).done(function(a){e(2,a)}).fail(function(){e(3)});return function(c,b){if(2==c)return new m(b,a);if(3==c||9==c)return new g}},1E3),m=l("attachImage",function(a,c){c=c.target;var b=f.generateFileName()+".png";a=f.convertBlobToImage(a,b);v.trigger(A.ATTACHMENT_FOR_PAGE_RECEIVED,{files:[a],isWikiTextfieldFocused:f.isWikiTextfield(k(c)),wikiTextfield:c,isPaste:!0,
successCallback:function(){e(6)}});return function(a,b){return new g}}),r=new g;p._getStateMap=function(){return{events:{EVENT_WINDOW_KEYDOWN:0,EVENT_WINDOW_PASTE:1,EVENT_FILE_LOADED:2,EVENT_FILE_LOAD_ERROR:3,EVENT_IMAGE_LOADED:4,EVENT_IMAGE_LOAD_ERROR:5,EVENT_DIALOG_LOADED:6,EVENT_DIALOG_CLOSED:7,EVENT_DIALOG_CANCELED:8,EVENT_TIMEOUT:9},states:{StateIdle:g,StateCatchClipboard:w,StateImageLoading:x,StateFileLoading:n,StateAttachImage:m}}};p.initIssuePaste=function(){k(window).on("keydown",function(a){e(0,
a)});k(window).on("paste",function(a){e(1,f.normalizePasteEvent(a))});v.bind("Dialog.hide",function(a,c,b){b?e(8,c):e(7,c)})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/trace.js' */
define("dndattachment/ctrlv/trace",["require"],function(a){return a("jira/util/logger").trace});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/tracking.js' */
define("dndattachment/ctrlv/tracking",["require","exports"],function(a,b){var c=a("jira/analytics");b.trigger=function(a,b){c.send({name:a,data:b||{}})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/executor.js' */
define("dndattachment/ctrlv/executor",["require","exports"],function(a,c){var g=a("jira/jquery/deferred"),b=a("jquery"),h=a("jira/util/events"),k=a("dndattachment/ctrlv/html5"),l=a("dndattachment/upload/handler");c.register=function(){l.registerExecutor({name:"JIRA Ctrl+V attachment executor",weight:5,isValid:function(a,b){return!!b.isPaste},processFiles:function(a,c){var d=g();k.show().done(function(c){var e=b("#attach-screenshot-placeholder-message"),f=b.Event("paste");f.clipboardData={files:a};
e.focus();setTimeout(function(){e.trigger(f)});h.bind("Dialog.hide",function(a,b,c){c?d.reject():d.resolve([b.find("#attachscreenshotname").val()+".png"])})});return d}})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'js/ctrlv/initialize.js' */
define("dndattachment/ctrlv/initialize",["require","exports"],function(a,b){var g=a("jira/jquery/deferred"),d=a("jquery"),c=a("dndattachment/ctrlv/html5"),h=a("dndattachment/ctrlv/issue-paste"),e=a("dndattachment/ctrlv/tracking"),k=a("dndattachment/ctrlv/executor"),f=a("jira/dialog/dialog-register"),l=a("jira/dialog/form-dialog");b.init=function(){var a=l.extend({options:{}});window.JIRA.ScreenshotDialog=a;h.initIssuePaste();d(document).ready(function(){var b=g();b.resolve();f.attachScreenshotDialog=
new a({id:"attach-screenshot-dialog",trigger:".issueaction-attach-screenshot-html5",isIssueDialog:!0,onContentRefresh:function(){this.$form.bind("before-submit",function(a){var b=c.validateFormData(c.screenshotFileUpload,d.trim(c.dialogView.getFileNameInput().val()));return 0==c.dialogView.getFileSize()?(a.preventDefault(),!1):0<Object.entries(b)?(c.dialogView.displayErrors(b),a.preventDefault(),!1):!0})},delayShowUntil:function(){return b}});d(document).bind("dialogContentReady",function(a,b){b===
f.attachScreenshotDialog&&null!==document.getElementById("attach-screenshot-form")&&(e.trigger("attach.screenshot.html5.contentReady"),c.initScreenshotPasteHandler())});d(document).ready(function(){d(document).on("click","#attach-screenshot-html5",function(){e.trigger("attach.screenshot.html5.display")})})});k.register()}});require(["dndattachment/ctrlv/initialize","jquery"],function(a,b){b(function(){a.init()})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'js/aui-amd.js' */
define("dndattachment/aui/dialog2",function(){return AJS.dialog2});define("dndattachment/aui/escape-html",function(){return AJS.escapeHtml});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'js/dnd-template-wrapper.js' */
define("dndattachment/templates",function(){return window.JIRA.Templates.DnDAttachmentPlugin});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachment-menu-link-init', location = 'js/menu/initAttachmentMenuLink.js' */
require(["jquery","jira/analytics","jira/util/events","dndattachment/util/events/types"],function(a,e,f,g){var h=function(){var b=a('\x3cinput type\x3d"file" multiple /\x3e');b.change(function(a){f.trigger(g.ATTACHMENT_FOR_PAGE_RECEIVED,{files:b[0].files})});b.click()},d=function(){a(document).on("click",".unified-attach-file",function(b){e.send({name:"issue.dnd.attachment.opsbar.attachFiles.linkClick",data:{}});var c=a(b.target);c.hasClass("issueaction-attach-file")||(b.preventDefault(),a(".issue-drop-zone").length&&
!c.data("issuekey")?h():(c.addClass("issueaction-attach-file"),c.click()))})},k=function(){d()};a.isReady?d():a(k)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.teams:teams-wr-custom-field-scripts-common', location = '/teams/scripts-plugin/field-common.js' */
!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){var r,o;r=[],void 0!==(o=function(){var e,t,n,r,o,i,s,a,u,l;return n=window.JIRA,e=AJS.$,r=AJS.SingleSelect,t=AJS.ItemDescriptor,l=AJS.escapeHTML,i=function(e){return n.bind(n.Events.NEW_CONTENT_ADDED,function(t,r,o){if(o!==n.CONTENT_ADDED_REASON.panelRefreshed)return e({context:r})})},s=function(e){var t,n,r;return r=e.url,t=e.createQueryData,n=e.formatResponse,{url:r,type:"POST",query:!0,data:function(e){return t({query:e})},dataType:"json",contentType:"application/json",formatResponse:n,keyInputPeriod:200}},u=function(e){var n,r;return r=e.text,n=e.additionalStyles,new t({label:r,html:l(r),highlighted:!0,styleClass:"jpo-dropdown-item-unselectable "+n,unselectableItem:!0})},o=function(e){var t;if(t=e.items,0===t.length)return t.push(u({text:"\u65e0\u5339\u914d\u9879",additionalStyles:"jpo-dropdown-item-italic"}))},a=function(t){var n,o;return n=t.ajaxOptions,o=t.getNoMatchingValueMessage,r.extend({init:function(t){return e.extend(t,{submitInputVal:!0,showDropdownButton:!0,ajaxOptions:n}),this._super(t)},setSelection:function(e){if(!e.properties.unselectableItem)return this._super.apply(this,arguments)},handleFreeInput:function(t){var n;if(this._super.apply(this,arguments),null==t&&(t=e.trim(this.$field.val())),null==this.model.getDescriptor(t)&&this.$container.hasClass("aui-ss-editing"))return n=null!=t&&t.length>0,n?(this.options.errorMessage=o(t),this.showErrorMessage(t),this.clear(),this.model.removeFreeInputVal()):this.hideErrorMessage()}})},{bindInitializationCallback:i,createDropdownAjaxOptions:s,createInfoMessageListItem:u,addNoMatchesItemIfEmpty:o,createDropdownClass:a}}.apply(t,r))&&(e.exports=o)}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.teams:teams-wr-custom-field-team', location = '/teams/scripts-plugin/field-team.js' */
!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){var r,a;r=[],void 0!==(a=function(){var e,t,n,r,a,i,o,s,u,l;return n=window.JIRA,e=AJS.$,r=AJS.SingleSelect,t=AJS.ItemDescriptor,l=AJS.escapeHTML,i=function(e){return n.bind(n.Events.NEW_CONTENT_ADDED,function(t,r,a){if(a!==n.CONTENT_ADDED_REASON.panelRefreshed)return e({context:r})})},o=function(e){var t,n,r;return r=e.url,t=e.createQueryData,n=e.formatResponse,{url:r,type:"POST",query:!0,data:function(e){return t({query:e})},dataType:"json",contentType:"application/json",formatResponse:n,keyInputPeriod:200}},u=function(e){var n,r;return r=e.text,n=e.additionalStyles,new t({label:r,html:l(r),highlighted:!0,styleClass:"jpo-dropdown-item-unselectable "+n,unselectableItem:!0})},a=function(e){var t;if(t=e.items,0===t.length)return t.push(u({text:"\u65e0\u5339\u914d\u9879",additionalStyles:"jpo-dropdown-item-italic"}))},s=function(t){var n,a;return n=t.ajaxOptions,a=t.getNoMatchingValueMessage,r.extend({init:function(t){return e.extend(t,{submitInputVal:!0,showDropdownButton:!0,ajaxOptions:n}),this._super(t)},setSelection:function(e){if(!e.properties.unselectableItem)return this._super.apply(this,arguments)},handleFreeInput:function(t){var n;if(this._super.apply(this,arguments),null==t&&(t=e.trim(this.$field.val())),null==this.model.getDescriptor(t)&&this.$container.hasClass("aui-ss-editing"))return n=null!=t&&t.length>0,n?(this.options.errorMessage=a(t),this.showErrorMessage(t),this.clear(),this.model.removeFreeInputVal()):this.hideErrorMessage()}})},{bindInitializationCallback:i,createDropdownAjaxOptions:o,createInfoMessageListItem:u,addNoMatchesItemIfEmpty:a,createDropdownClass:s}}.apply(t,r))&&(e.exports=a)},function(e,t,n){var r,a;r=[n(0)],void 0!==(a=function(e){var t,n,r,a,i,o,s,u,l,c,p,d,m,f,h;return t=AJS.$,a=AJS.ItemDescriptor,r=AJS.GroupDescriptor,l=AJS.contextPath,i=100,o=".jpo-team-selection-dropdown",s=l()+"/rest/teams/1.0/teams/find",n=l()+"/download/resources/com.atlassian.teams:jpo-wr-images-and-fonts/images/teams/default-avatar.svg",h=function(e){var t,n,a;return a=e.teams,t=new r({weight:0,items:[c()]}),n=new r({weight:1,label:"\u5171\u4eab\u56e2\u961f",items:f({teams:a})}),[t,n]},m=function(e){var t,r,i;return r=e.id,i=e.title,t=e.avatarUrl,new a({value:""+r,fieldText:i,label:i,icon:t||n})},f=function(t){var n,r,a;return a=t.teams,n=function(){var e,t,n;for(n=[],e=0,t=a.length;e<t;e++)r=a[e],n.push(m(r));return n}(),e.addNoMatchesItemIfEmpty({items:n}),n},c=function(){return e.createInfoMessageListItem({text:"\u7279\u5b9a\u4e8e\u8ba1\u5212\u7684\u56e2\u961f\u53ea\u80fd\u901a\u8fc7 Portfolio \u8ba1\u5212\u6765\u9009\u62e9\u3002",additionalStyles:"jpo-dropdown-item-italic"})},p=function(e){var t;return t=e.query,JSON.stringify({query:t,excludedIds:[],maxResults:i})},u=e.createDropdownClass({ajaxOptions:e.createDropdownAjaxOptions({url:s,createQueryData:p,formatResponse:h}),getNoMatchingValueMessage:function(e){return AJS.format("\u672a\u627e\u5230\u4e0e\u67e5\u8be2\u201c{0}\u201d\u5339\u914d\u7684\u56e2\u961f\u3002",e)}}),d=function(e){return t(o,e).each(function(){return new u({element:t(this)})})},e.bindInitializationCallback(function(e){var t;return t=e.context,d(t)})}.apply(t,r))&&(e.exports=a)}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:jira-analytics', location = '/includes/jira/analytics/analytics-init.js' */
require(["jquery","jira/analytics","jira/util/data/meta"],function(a,t,c){"use strict";function n(a){var t=c.get("analytics-prefix");return t&&(a=t+a),a}function i(){a("[data-track-pageview]").each(function(c,i){t.send({name:n(a(i).data("track-pageview"))})})}a(document).on("click","[data-track-click]",function(){t.send({name:n(a(this).data("track-click"))})}),a(document).on("auxclick","[data-track-auxclick]",function(){t.send({name:n(a(this).data("track-auxclick"))})}),a(i)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/initAvatarPickerTrigger.js' */
define("jira/admin/init/avatar-picker-trigger",["jira/ajs/layer/layer-constants","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/ajs/layer/inline-layer","jira/ajs/contentretriever/content-retriever","jira/ajs/avatarpicker/avatar","jira/ajs/avatarpicker/avatar-picker-factory","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jquery"],function(t,a,e,r,i,n,c,s,v,o,d){"use strict";function f(t){var a=d(".jira-avatar-picker-trigger"),e=d(".jira-avatar-picker-trigger img, img.jira-avatar-picker-trigger",t),r=d(t).find("#avatar-picker-avatar-id"),i=d(t).find("#avatar-picker-iconurl"),n=d(t).find("#avatar-type");""!==n.text()&&s.createUniversalAvatarPickerDialog({trigger:a,title:d(t).find("#avatar-dialog-title").text(),projectId:d(t).find("#avatar-owner-id").text(),projectKey:d(t).find("#avatar-owner-key").text(),defaultAvatarId:d(t).find("#default-avatar-id").text(),initialSelection:r.val(),avatarSize:c.getSizeObjectFromName(d(t).find("#avatar-size").text()),avatarType:n.text(),select:function(t,a){e.attr("src",a),i.val(a),r.val(t.getId())}})}function l(a){var e=d(".jira-inline-avatar-picker-trigger",a);e.length&&new j({offsetTarget:e,projectId:d(a).find("#avatar-owner-id").text(),projectKey:d(a).find("#avatar-owner-key").text(),defaultAvatarId:d(a).find("#default-avatar-id").text(),alignment:t.LEFT,width:420,allowDownsize:!0})}var g=n.extend({init:function(t){this.avatarPicker=t},content:function(t){this.avatarPicker.render(function(a){t(d("<div />").html(a))})},cache:function(){return!1},isLocked:function(){},startingRequest:function(){},finishedRequest:function(){}}),j=i.extend({init:function(t){var a=this;this.avatarPicker=v.createProjectAvatarPicker({projectId:t.projectId,projectKey:t.projectKey,defaultAvatarId:t.defaultAvatarId,select:function(e,r,i){t.select&&t.select.apply(this,arguments),i||a.hide(),a.offsetTarget().attr("src",r),a.offsetTarget().trigger("AvatarSelected")}}),t.contentRetriever=new g(this.avatarPicker),d(this.avatarPicker.imageEditor).bind(o.LOADED,function(){a.setWidth(a.layer().attr("scrollWidth"))}),this._super(t);var e=this.offsetTarget(),r=d("<span class='jira-avatar-picker-trigger'></span>");r.insertBefore(e).append(e),this._assignEvents("offsetTarget",r)},_events:{offsetTarget:{click:function(){this.show()}}}});a.bind(e.NEW_CONTENT_ADDED,function(t,a,e){e!==r.panelRefreshed&&(f(a),l(a))})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/init/init-avatar-picker.js' */
require("jira/admin/init/avatar-picker-trigger");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:croneditor', location = '/includes/js/cron/croneditor.js' */
define("jira/util/cron",["exports"],function(n){"use strict";var i=window.timesOnce=window.timesOnce||{};n.hideCronEdit=function(n){document.getElementById(n).style.display="none"},n.showCronEdit=function(n){document.getElementById(n).style.display=""},n.toggleFrequencyControl=function(i,e){"0"===document.getElementById(i+"interval").value?n.switchToOnce(i,e):n.switchToMany(i,e)},n.switchToOnce=function(e,o){n.hideCronEdit(e+"runMany"),n.showCronEdit(e+"runOnce"),o&&(i[e]=!0)},n.switchToMany=function(e,o){n.hideCronEdit(e+"runOnce"),n.showCronEdit(e+"runMany"),o&&(i[e]=!1)},n.switchToDaysOfMonth=function(i){n.hideCronEdit(i+"daysOfWeek"),n.showCronEdit(i+"daysOfMonth"),n.showCronEdit(i+"freqDiv"),n.hideCronEdit(i+"innerFreqDiv"),n.hideCronEdit(i+"advanced"),n.switchToOnce(i,!1)},n.switchToDaysOfWeek=function(i){n.showCronEdit(i+"daysOfWeek"),n.hideCronEdit(i+"daysOfMonth"),n.showCronEdit(i+"freqDiv"),n.showCronEdit(i+"innerFreqDiv"),n.hideCronEdit(i+"advanced"),n.switchToOriginal(i)},n.switchToDaily=function(i){n.hideCronEdit(i+"daysOfWeek"),n.hideCronEdit(i+"daysOfMonth"),n.showCronEdit(i+"freqDiv"),n.showCronEdit(i+"innerFreqDiv"),n.hideCronEdit(i+"advanced"),n.switchToOriginal(i)},n.switchToAdvanced=function(i){n.hideCronEdit(i+"daysOfWeek"),n.hideCronEdit(i+"daysOfMonth"),n.hideCronEdit(i+"runOnce"),n.hideCronEdit(i+"runMany"),n.hideCronEdit(i+"freqDiv"),n.showCronEdit(i+"advanced")},n.switchToOriginal=function(e){i[e]?n.switchToOnce(e,!1):n.switchToMany(e,!1)}}),function(){"use strict";var n=require("jira/util/cron");AJS.namespace("hideCronEdit",null,n.hideCronEdit),AJS.namespace("showCronEdit",null,n.showCronEdit),AJS.namespace("switchToOnce",null,n.switchToOnce),AJS.namespace("switchToMany",null,n.switchToMany),AJS.namespace("switchToDaysOfMonth",null,n.switchToDaysOfMonth),AJS.namespace("switchToDaysOfWeek",null,n.switchToDaysOfWeek),AJS.namespace("switchToDaily",null,n.switchToDaily),AJS.namespace("switchToAdvanced",null,n.switchToAdvanced),AJS.namespace("switchToOriginal",null,n.switchToOriginal),AJS.namespace("toggleFrequencyControl",null,n.toggleFrequencyControl)}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:loading-indicator', location = 'js/util/loading-indicator.js' */
define("quick-edit/util/loading-indicator",["jira/loading/loading","jira/flag"],function(b,c){var a=AJS.dim,d=AJS.undim;return{showLoadingIndicator:function(){a();b.showLoadingIndicator()},hideLoadingIndicator:function(a){d();b.hideLoadingIndicator();a&&c.showErrorMsg(null,"JIRA\u670d\u52a1\u5668\u65e0\u6cd5\u8fde\u63a5\u3002\u8fd9\u53ef\u80fd\u662f\u4e00\u4e2a\u4e34\u65f6\u6545\u969c\u6216\u670d\u52a1\u5668\u53ef\u80fd\u5df2\u5173\u95ed\u3002")}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue-bootstrap', location = 'js/init/create-bootstrap-wrm.js' */
require(["jquery","underscore","wrm/require","quick-edit/util/loading-indicator","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"],function(f,k,g,c,a){var h,d=!1;f(document).on("simpleClick",".create-issue, .create-issue-type",function(b){b.preventDefault();d||(d=!0,a.disable(),c.showLoadingIndicator(),g(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"]).done(function(){require("quick-edit/init/create").initIssueDialog(b);a.enable();d=!1}).fail(function(){c.hideLoadingIndicator(!0);
a.enable();d=!1}))});f(function(){if(h=document.getElementById("stqc_show"))h.onclick=null});var e=!1;f(document).on("simpleClick",".issueaction-create-subtask",function(b){b.preventDefault();e||(e=!0,a.disable(),c.showLoadingIndicator(),g(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"]).done(function(){require("quick-edit/init/create").initSubtaskDialog(b);a.enable();e=!1}).fail(function(){c.hideLoadingIndicator(!0);a.enable();e=!1}))})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:jira-page-atl-prefetch', location = '/includes/jira/page/prefetch.js' */
define("jira/page/atl/prefetch",["jira/util/data/meta","jira/data/local-storage","jira/ajs/dark-features","jquery","wrm/context-path"],function(e,t,r,n,i){"use strict";function a(e){n("<link />",{rel:"prefetch",href:e}).appendTo("head")}function s(e){var t=e.sections;if(t){var r=t.filter(function(e){return"issues_history_main"===e.id});if(r.length&&0!==r[0].items.length){return r[0].items[0].url}}}function c(e,t){for(var r=t.exec(e);r;){a(r[1].replace(/&amp;/g,"&")),r=t.exec(e)}}function u(){try{t.setItem(g,d)}catch(e){}}function f(e){c(e,/<script.+?src="(.+?)".+?<\/script>/g),c(e,/<link.+?rel="stylesheet".+?href="(.+?)".+?>/g),u()}function o(){return!!r.isEnabled("jira.issue.prefetch")&&(1===n("#isNavigator").length?(u(),!1):e.get("issue-key")?(u(),!1):d!==t.getItem(g))}function l(e){var t=s(e);t&&h(t)}function h(e){n.get(e,f)}function p(){o()&&n.ajax({url:i()+"/rest/api/1.0/menus/find_link?inAdminMode=false",dataType:"json"}).done(l)}var g="jira.issue.prefetch.last.superbatch",d=function(){var e=new Date,t=e.getFullYear().toString()+e.getMonth().toString()+e.getDate().toString(),r=n("head > script").filter(function(e,t){return t.src.indexOf("/_super")>0});return(r.length>0?r[0].src:"empty")+t}();return{prefetchResourcesForUrl:h,prefetchViewIssueResources:p}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:init-jira-page-atl-prefetch', location = '/includes/jira/page/initPrefetch.js' */
require(["jira/page/atl/prefetch","jquery"],function(e,r){"use strict";r(window).on("load",e.prefetchViewIssueResources.bind(e))});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:init-on-dcl', location = '/static/util/init-on-dcl.js' */
define("jira/util/init-on-dcl",["jira/util/logger"],function(t){"use strict";return function(e){if(!e||"function"!=typeof e)return void t.error("Failed to run init function - fn doesn't exist or isn't a function",e);"interactive"===document.readyState||"complete"===document.readyState?setTimeout(e,1):document.addEventListener("DOMContentLoaded",e,{once:!0})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:terminology-feature-service', location = '/includes/jira/terminology/TerminologyFeatureService.js' */
define("jira/terminology-feature-service",["jira/featureflags/feature-manager","jira/util/data/meta","underscore","wrm/data"],function(e,i,r,n){"use strict";var t=n.claim("jira.core:terminology-data.terminology")||{},o=e.isFeatureEnabled("com.atlassian.jiranomenclature");return{getTerminologyEntries:function(){return r.where(t.terminologyEntries,{isDefault:!1})||[]},getTerminologyEntryForTerm:function(e){return r.findWhere(this.getTerminologyEntries(),{originalName:e,isDefault:!1})},isTerminologyEnabled:function(){return o},isTerminologyChanged:function(){return t.isTerminologyActive},isEnglishLocale:function(){return i.get("user-locale").indexOf("en")>=0},isTerminologyActiveForUser:function(){return this.isTerminologyEnabled()&&this.isTerminologyChanged()&&this.isEnglishLocale()}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:init-terminology-help-dialog', location = '/includes/jira/terminology/InitTerminologyHelpDialog.js' */
require(["jira/data/local-storage","jira/dialog/dialog-register","jira/dialog/dialog-util","jira/dialog/form-dialog","jira/terminology-feature-service","jira/util/formatter","jira/util/init-on-dcl","jquery"],function(e,i,o,t,r,l,n,a){"use strict";n(function(){var n=e.getItem("jira.terminology.help.clicked"),s=e.getItem("jira.terminology.help.dismissed"),g=a("#terminology_help");if(s||!r.isEnglishLocale())return void g.parent("li").remove();if(i.terminologyHelp=new t({id:"terminology-help-dialog",trigger:"#terminology_help",widthClass:"medium",ajaxOptions:o.getDefaultAjaxOptions,defineResources:function(){this.requireResource("jira.webresources:terminology-help-dialog")}}),i.terminologyHelp.onContentReady(function(){var i=this;this.get$popupContent().find("#terminology-dismiss-btn").on("click",function(){e.setItem("jira.terminology.help.dismissed",!0),i.hide(),g.parent("li").remove()})}),!n){var m=a('<span class="aui-lozenge aui-lozenge-subtle aui-lozenge-new">'+"\u65b0\u5efa"+"</span>").css("margin-left","5px").appendTo(g);g.on("click",function(){e.setItem("jira.terminology.help.clicked",!0),m.remove()})}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.feedback.jira-feedback-plugin:button-resources-init', location = '/js/feedback-dialog-init.js' */
require(["jquery","jira/loading/loading","wrm/require"],function(n,i,e){"use strict";function o(){t=!0,AJS.dim(),i.showLoadingIndicator()}function r(n){t=!1,n&&AJS.dim.$dim.css("transition","none"),AJS.undim(),n&&AJS.dim.$dim&&AJS.dim.$dim.css("transition",""),i.hideLoadingIndicator()}var t=!1;n(document).on("click",".jira-feedback-plugin",function(n){n.preventDefault(),t||(o(),e(["wr!com.atlassian.feedback.jira-feedback-plugin:button-resources"]).done(function(){require("jira/feedback/feedback-dialog").show().then(function(){return r(!0)},function(n){console.error("Something went wrong in an attempt to show the issue collector dialog",n),r(!1)})}).fail(function(n){console.error("Something went wrong when loading feedback plugin resources",n),r(!1)}))})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init', location = 'static/components/newsletter/initNewsletterSignup.js' */
define("jira/newsletter/init-signup",["wrm/data","wrm/require-lazily","require"],function(e,i,r){"use strict";return function(){var t=e.claim("com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init.newsletterSignup");!t||t&&!t.showNewsletterTip||i("wr!com.atlassian.jira.jira-header-plugin:newsletter-signup-tip").then(function(){r("jira/newsletter/signuptip").render(t)})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-header-plugin:newsletter-signup-tip-init-init', location = 'static/components/newsletter/initInitNewsletterSignup.js' */
require(["jquery","jira/newsletter/init-signup"],function(i,e){"use strict";i(function(){e()})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/notification-helper-init.js' */
require(["jquery","jira/util/data/meta","wrm/require"],function(a,b,c){b.get("is-admin")&&a(document).delegate(".notificationhelper-trigger","click",function(a){a.preventDefault();c("wr!com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-async-resources").then(()=>{(new (require("jira/admin-helper/dialog"))({id:"notification-helper-dialog",content:function(a){const b=this;require(["jira/admin-helper/notification-helper/content-loader"],function(c){c.loadContent(b,a)})}})).show()})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/permission-helper-init.js' */
require(["jquery","jira/util/data/meta","wrm/require"],function(a,b,c){b.get("is-admin")&&a(document).delegate(".permissionhelper-trigger","click",function(a){a.preventDefault();c("wr!com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-async-resources").then(()=>{(new (require("jira/admin-helper/dialog"))({id:"permission-helper-dialog",content:function(a){const b=this;require(["jira/admin-helper/permission-helper/content-loader"],function(c){c.loadContent(b,a)})}})).show()})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'js/whereismycf-init.js' */
require(["jquery","jira/util/data/meta","jira/dialog/dialog-stack","wrm/require"],function(b,d,e,c){if(d.get("is-admin")){var f="\u67e5\u627e\u5b57\u6bb5\u540d";b(document).delegate(".whereismycf-trigger","click",function(a){a.preventDefault();c("wr!com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-async-resources").then(()=>{(new (require("jira/admin-helper/dialog"))({id:"whereismycf-dialog",width:500,content:function(a){var b=this;require(["jira/admin-helper/whereismycf/content-loader"],
function(g){g.loadContentForView(b,a)})}})).show()})});b(document).bind("aui-show",function(a){"qf-fieldpicker-inline"===a.target.id&&(a=b("#qf-fieldpicker-inline"),0==a.find(".whereismycf-qfpicker-link").length&&b("\x3cdiv\x3e\x3ca href\x3d'#' tabindex\x3d'0' class\x3d'whereismycf-qfpicker-link'\x3e"+f+"\x3c/a\x3e\x3c/div\x3e").prependTo(a.find(".qf-picker-header")).attr("tabindex",0).click(function(a){a.preventDefault();const b=e.current;c("wr!com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-async-resources").then(()=>
{(new (require("jira/admin-helper/dialog"))({id:"whereismycf-dialog",width:500,content:function(a){const c=this;require(["jira/admin-helper/whereismycf/content-loader"],function(d){d.loadContentForEditAndCreate(c,b,a)})}})).show()})}))})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/singleUserPicker.soy' */
// This file was automatically generated from singleUserPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.Pickers.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }
if (typeof JIRA.Templates.Fields.Pickers == 'undefined') { JIRA.Templates.Fields.Pickers = {}; }
if (typeof JIRA.Templates.Fields.Pickers.User == 'undefined') { JIRA.Templates.Fields.Pickers.User = {}; }


JIRA.Templates.Fields.Pickers.User.single = function(opt_data, opt_ignored) {
  var output = '<select id="' + soy.$$escapeHtml(opt_data.field.id) + '" name="' + soy.$$escapeHtml(opt_data.field.name) + '" class="single-user-picker js-' + ((opt_data.type) ? soy.$$escapeHtml(opt_data.type) : 'default-user-picker') + '"' + ((opt_data.inputText) ? ' data-input-text="' + soy.$$escapeHtml(opt_data.inputText) + '"' : '') + ((opt_data.editValue) ? ' data-edit-value="' + soy.$$escapeHtml(opt_data.editValue) + '"' : '') + ((opt_data.showDropdownButton) ? ' data-show-dropdown-button="true"' : '') + ((opt_data.userType) ? ' data-user-type="' + soy.$$escapeHtml(opt_data.userType) + '"' : '') + ((opt_data.containerClass) ? ' data-container-class="' + soy.$$escapeHtml(opt_data.containerClass) + '"' : '') + 'aria-hidden="true" aria-labelledby="' + soy.$$escapeHtml(opt_data.field.id) + '-field" >';
  var optionList40 = opt_data.options;
  var optionListLen40 = optionList40.length;
  for (var optionIndex40 = 0; optionIndex40 < optionListLen40; optionIndex40++) {
    var optionData40 = optionList40[optionIndex40];
    if (optionData40.optionGroup) {
      output += '<optgroup id="' + soy.$$escapeHtml(opt_data.field.id) + '-group-' + soy.$$escapeHtml(optionData40.id) + '" label="' + soy.$$escapeHtml(optionData40.display) + '"' + ((optionData40.footer) ? ' data-footer-text="' + soy.$$escapeHtml(optionData40.footer) + '"' : '') + ((optionData40.weight != -1) ? ' data-weight="' + soy.$$escapeHtml(optionData40.weight) + '"' : '') + '>';
      var groupOptionList61 = optionData40.groupOptions;
      var groupOptionListLen61 = groupOptionList61.length;
      for (var groupOptionIndex61 = 0; groupOptionIndex61 < groupOptionListLen61; groupOptionIndex61++) {
        var groupOptionData61 = groupOptionList61[groupOptionIndex61];
        output += JIRA.Templates.Fields.Pickers.User.option(groupOptionData61);
      }
      output += '</optgroup>';
    } else {
      output += JIRA.Templates.Fields.Pickers.User.option(optionData40);
    }
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.single.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.single';
}


JIRA.Templates.Fields.Pickers.User.option = function(opt_data, opt_ignored) {
  return '<option ' + ((opt_data.loggedInUser) ? 'class="current-user" ' : '') + ((opt_data.selected) ? 'selected="selected" ' : '') + 'value="' + soy.$$escapeHtml(opt_data.optionName) + '" data-field-text="' + soy.$$escapeHtml(opt_data.displayName) + '" data-field-label="' + soy.$$escapeHtml(opt_data.displayName) + ((opt_data.emailAddress) ? ' - ' + soy.$$escapeHtml(opt_data.emailAddress) : '') + ((opt_data.optionName && opt_data.optionName != '-1') ? ' (' + soy.$$escapeHtml(opt_data.optionName) + ')' : '') + '" data-icon="' + soy.$$escapeHtml(opt_data.avatarURL) + '" data-icon-type="rounded" >' + soy.$$escapeHtml(opt_data.displayName) + '</option>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.option.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.option';
}


JIRA.Templates.Fields.Pickers.User.popupTrigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.hasPermission) ? '<a class="' + ((opt_data['class']) ? soy.$$escapeHtml(opt_data['class']) : 'popup-trigger') + '"' + ((opt_data.fieldId) ? ' id="' + soy.$$escapeHtml(opt_data.fieldId) + '"' : '') + ' title="' + soy.$$escapeHtml(opt_data.imgTitle) + '" aria-label="' + soy.$$escapeHtml(opt_data.imgTitle) + '" href="' + ((opt_data.href) ? soy.$$escapeHtml(opt_data.href) : '#') + '"><span class="icon-default aui-icon aui-icon-small aui-iconfont-admin-roles"></span></a>' : '<span class="aui-icon aui-icon-small aui-iconfont-locked" title="' + soy.$$escapeHtml(opt_data.noPermissionTitle) + '"></span>');
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.popupTrigger.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.popupTrigger';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/assigneeField.soy' */
// This file was automatically generated from assigneeField.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Fields.Pickers.User.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Fields == 'undefined') { JIRA.Templates.Fields = {}; }
if (typeof JIRA.Templates.Fields.Pickers == 'undefined') { JIRA.Templates.Fields.Pickers = {}; }
if (typeof JIRA.Templates.Fields.Pickers.User == 'undefined') { JIRA.Templates.Fields.Pickers.User = {}; }


JIRA.Templates.Fields.Pickers.User.assignee = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.Fields.Pickers.User.single(soy.$$augmentMap(opt_data, {options: opt_data.assigneeOptions.options, showDropdownButton: true, userType: 'assignee', type: 'assignee-picker', containerClass: 'long-field'})) + ((opt_data.isLoggedInUserAssignable) ? '<button type="button" data-field-id="#' + soy.$$escapeHtml(opt_data.field.id) + '" class="aui-button aui-button-link" id="assign-to-me-trigger">' + soy.$$escapeHtml('\u5206\u914d\u7ed9\u6211') + '</button>' : '') + '<fieldset class="hidden parameters"><input type="hidden" title="projectKeys" value="' + soy.$$escapeHtml(opt_data.projectKeys) + '"/>' + ((opt_data.issueKey) ? '<input type="hidden" title="assigneeEditIssueKey" value="' + soy.$$escapeHtml(opt_data.issueKey) + '"/>' : '') + ((opt_data.actionDescriptorId) ? '<input type="hidden" title="actionDescriptorId" value="' + soy.$$escapeHtml(opt_data.actionDescriptorId) + '"/>' : '') + '</fieldset>';
};
if (goog.DEBUG) {
  JIRA.Templates.Fields.Pickers.User.assignee.soyTemplateName = 'JIRA.Templates.Fields.Pickers.User.assignee';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:jira-accessible-dialog', location = '/includes/jira/dialog/AccessibleDialog.js' */
define("jira/dialog/accessible-dialog",["jquery","aui/dialog"],function(e,t){"use strict";function i(e,t){e.handleFocusOnLoad=t||o.OnPageLoadFocusBehavior.Title}function a(t){return function(i){if("Tab"===i.key){var a=document.activeElement,o=e("#"+t).find(".dialog-components:visible"),n=o.find(":focusable:not([tabindex='-1'])"),s=n[0],r=n[n.length-1],l=a===s||e(a).hasClass("dialog-title"),d=e(a).hasClass("dialog-title"),u=a===r;i.shiftKey&&(l||d)?(r.focus(),i.preventDefault()):!i.shiftKey&&u&&(s.focus(),i.preventDefault())}}}var o=function(e){this.options=e,t.call(this,e),e&&i(this.getCurrentPage(),e.onPageLoadFocusBehavior)};return o.prototype=Object.assign({},t.prototype),o.prototype.removeHiddenPageMenu=function(e){e.find(".dialog-page-menu[style*='display: none']").remove()},o.prototype.getCurrentPage=function(){return this.page[this.curpage]},o.prototype.get$CurrentPageTitle=function(){return this.getCurrentPage().element.find(".dialog-title")},o.prototype._handleDialogHide=function(){document.removeEventListener("keydown",this.handleFocus),this.options&&this.options.$elementToFocusOnClose&&this.options.$elementToFocusOnClose.focus()},o.prototype._focusFirstInteractiveElement=function(e){e.find(":focusable:not([tabindex='-1']):first").focus()},o.prototype._handleFocusOnPageLoad=function(){this.getCurrentPage().handleFocusOnLoad(this)},o.prototype.show=function(){var e=this.popup.element;e.addClass(o.ClassNames.Dialog),this.popup.show(),AJS.trigger("show.dialog",{dialog:this}),this.handleFocus=a(this.id),document.addEventListener("keydown",this.handleFocus),e.attr({"aria-hidden":!1,"aria-modal":!0,role:"dialog"});var t=this.get$CurrentPageTitle();return e.attr("aria-labelledby",t.attr("id")),this.removeHiddenPageMenu(e),setTimeout(function(){this._handleFocusOnPageLoad()}.bind(this)),this},o.prototype.hide=function(){return this.popup.hide(),AJS.trigger("hide.dialog",{dialog:this}),this._handleDialogHide(),this},o.prototype.remove=function(){t.prototype.remove.call(this),this._handleDialogHide()},o.prototype.addHeader=function(t,i,a){var o=this.getCurrentPage();o.header&&o.header.remove();var n=e("<div class='dialog-header'></div>"),s=e("<h1 class='dialog-title' tabindex='-1'></h1>").text(t||"");i&&s.addClass(i);var r=o.element.attr("id");return!a&&r?a=r+"-title":a||r||(a=this.popup.element.attr("id")+"-page-"+this.curpage+"-title"),s.attr("id",a),this.popup.element.attr("aria-labelledby",a),n.append(s),o.element.prepend(n),o.header=n,o.recalcSize(),this},o.prototype._makePageAccessible=function(){var e=this.getCurrentPage().element,t=this.get$CurrentPageTitle();this.popup.element.attr("aria-labelledby",t.attr("id")),this.removeHiddenPageMenu(e),this._handleFocusOnPageLoad()},o.prototype.prevPage=function(){return t.prototype.prevPage.call(this),this._makePageAccessible(),this},o.prototype.nextPage=function(){return t.prototype.nextPage.call(this),this._makePageAccessible(),this},o.prototype.gotoPage=function(e){return t.prototype.gotoPage.call(this,e),this._makePageAccessible(),this},o.prototype.addPage=function(e,a){return t.prototype.addPage.call(this,e),i(this.getCurrentPage(),a),this},o.prototype.updateHeight=function(){t.prototype.updateHeight.call(this),this._handleFocusOnPageLoad()},o.ClassNames={Dialog:"jira-accessible-dialog"},o.OnPageLoadFocusBehavior={Title:function(e){e.get$CurrentPageTitle().focus()},FirstInteractiveElement:function(e){e._focusFirstInteractiveElement(e.getCurrentPage().element)}},o}),AJS.namespace("JIRA.AccessibleDialog",null,require("jira/dialog/accessible-dialog"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:create-user-popup-picker', location = '/includes/jira/field/createUserPickerPopupTrigger.js' */
define("jira/field/create-user-picker-popup-trigger",["exports"],function(e){"use strict";e.createUserPickerPopupTrigger=function(e){var r=e.urlBase,t=e.formName,o=e.fieldName,i=e.actionToOpen,n=e.multiSelect,a=e.fieldConfigId,c=e.triggerEvent,l=e.projectIds;return function(e){var s,f=r;if(e.preventDefault(),f+=i||"/secure/popups/UserPickerBrowser.jspa",f+="?formName="+t,f+="&multiSelect="+Boolean(n),f+="&decorator=popup",f+="&element="+o,a&&(f+="&fieldConfigId="+a),l){l=[].concat(l);var p=!0,u=!1,d=void 0;try{for(var g,m=l[Symbol.iterator]();!(p=(g=m.next()).done);p=!0){f+="&projectId="+g.value}}catch(e){u=!0,d=e}finally{try{!p&&m.return&&m.return()}finally{if(u)throw d}}}c&&(f+="&triggerEvent="+c),s=window.open(f,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes"),s.opener=self,s.focus()}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/userPickerUtil.js' */
define("jira/field/user-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery"],function(e,i,r){"use strict";return{formatResponse:function(t){var a=[];return r(t).each(function(t,s){var l=new i({weight:t,label:s.footer});r(s.users).each(function(){l.addItem(new e({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,iconType:"rounded",allowDuplicate:!1,highlighted:!0,userKey:this.key}))}),a.push(l)}),a}}}),AJS.namespace("JIRA.UserPickerUtil",null,require("jira/field/user-picker-util"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initSingleUserPickers.js' */
define("jira/field/init-single-user-pickers",["jquery","wrm/context-path","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/user-picker-util","jira/util/formatter","jira/field/create-user-picker-popup-trigger","jira/ajs/list/item-descriptor"],function(e,r,t,i,a,n,s,o,p,u){"use strict";function c(e){return e&&-1!==e.indexOf("customfield_")}function d(r){e(".js-default-user-picker",r).each(function(){var r=e(this);if(!r.data("aui-ss")){var i=c(r.attr("name")),a=i?"/rest/api/1.0/users/picker":"/rest/api/2/user/picker",n={showAvatar:!0,fieldName:i?r.prop("name"):void 0,fieldConfigId:i?r.data("field-config-id"):void 0,projectId:i?r.data("project-ids").split(",").filter(function(e){return e}):void 0},d=r.data("inputValue");r.data("has-popup-picker")&&r.next(".popup-trigger").on("click",p.createUserPickerPopupTrigger({urlBase:l,formName:r.data("form-name")||r.closest("form").attr("name"),fieldName:r.prop("name"),fieldConfigId:r.data("field-config-id"),projectIds:r.data("project-ids")?r.data("project-ids").split(",").filter(function(e){return e}):void 0,triggerEvent:"userpicker:onPopUpSelection"})),new t({element:r,submitInputVal:!0,hasAddonIcon:!!r.data("has-popup-picker"),showDropdownButton:!!r.data("show-dropdown-button"),errorMessage:o.format("\u6ca1\u6709\u7528\u6237\'\'{0}\'\'\u3002","'{0}'"),iconType:"rounded",ajaxOptions:{url:l+a,data:n,formatResponse:s.formatResponse},inputText:d,ariaLabel:"\u9009\u62e9\u4e00\u4e2a\u7528\u6237",events:{element:{"userpicker:onPopUpSelection":function(r,t,i,a){e.ajax({url:l+"/rest/api/2/user?username="+a,type:"GET",contentType:"application/json",success:function(e){i.setSelection(new u({value:a,label:e.displayName,icon:e.avatarUrls["24x24"]}),!0)},error:function(e){return console.error(e)}})}}}})}})}var l=r();return n.bind(a.NEW_CONTENT_ADDED,function(e,r,t){t!==i.panelRefreshed&&d(r)}),d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/NoBrowseUserNamePicker.js' */
define("jira/field/no-browser-user-name-picker",["require"],function(e){"use strict";var t=e("jquery"),r=e("jira/ajs/list/item-descriptor"),i=e("jira/ajs/select/multi-select"),a=e("jira/util/formatter"),n=e("wrm/context-path"),s=n();return i.extend({_getDefaultOptions:function(){return t.extend(!0,this._super(),{errorMessage:"\u7528\u6237\u4e0d\u5b58\u5728",showDropdownButton:!1,removeOnUnSelect:!0,itemAttrDisplayed:"label"})},_handleCharacterInput:function(){},_setSuggestions:function(){},_handleServerError:function(e){404===e.status?this.showErrorMessage():this._super()},_deactivate:function(){this.validateAndAdd()},validateAndAdd:function(){var e=this;""===t.trim(this.$field.val())?this.hideErrorMessage():t.ajax({url:s+"/rest/api/2/user",data:{username:t.trim(e.getQueryVal())},success:function(t){e.hideErrorMessage(),e.$field.val(""),e.addItem(new r({label:t.displayName,value:t.name}))},error:function(){e.showErrorMessage()}})},_handleSpace:function(){this.validate()},_handleServerSuggestions:function(){this.hideErrorMessage(),this.handleFreeInput()},handleFreeInput:function(){var e=t.trim(this.$field.val());""!==e&&(this.addItem({value:e,label:e}),this.model.$element.trigger("change")),this.$field.val("")},keys:{Return:function(e){e.preventDefault(),this.validateAndAdd()},Spacebar:function(e){e.preventDefault(),this.validateAndAdd()}}})}),AJS.namespace("AJS.NoBrowseUserNamePicker",null,require("jira/field/no-browser-user-name-picker"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initMultiUserPickers.js' */
define("jira/field/init-multi-user-pickers",["jquery","wrm/context-path","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/no-browser-user-name-picker","jira/field/user-picker-util","jira/ajs/list/item-descriptor","jira/field/create-user-picker-popup-trigger","jira/util/logger"],function(e,t,r,i,n,a,o,l,u,c,s){"use strict";function d(e){return!1!==e}function f(e){if(e)return String(e).split(",").filter(function(e){return e})}function p(e){return{useFrotherControl:e.data("use-frother-control"),userPickerEnabled:e.data("user-picker-enabled"),fieldName:e.data("field-name"),formName:e.data("form-name"),fieldConfigId:e.data("field-config-id"),multiSelect:e.data("multi-select"),projectId:f(e.data("project-id")),actionToOpen:e.data("action-to-open")}}function m(t){t.find(".js-default-multi-user-picker").each(function(){var r=e(this),i=r.attr("id"),n=t.find("#"+i+"_container").find(".popup-trigger"),a=p(r);n.length>0&&h(n,a),d(a.useFrotherControl)&&(a.userPickerEnabled?g(r,a):j(r))})}function j(e){new o({element:e})}function g(e,t){new r({element:e,itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,events:{element:{"userpicker:onPopUpSelection":function(e,t,r,i){try{JSON.parse(i).forEach(function(e){var t=e.id,i=e.displayName;r.addItem(new u({value:t,title:i,label:i}))})}catch(e){s.error("Cannot parse user names")}}}},ajaxOptions:{url:k+"/rest/api/1.0/users/picker",data:function(r){return{showAvatar:!0,query:r,exclude:e.val(),fieldName:t.fieldName,fieldConfigId:t.fieldConfigId,projectId:t.projectId}},formatResponse:l.formatResponse}})}function h(e,t){e.on("click",c.createUserPickerPopupTrigger({urlBase:k,formName:t.formName||e.closest("form").attr("name"),fieldName:t.fieldName,multiSelect:t.multiSelect,fieldConfigId:t.fieldConfigId,projectIds:t.projectId,actionToOpen:t.actionToOpen,triggerEvent:d(t.useFrotherControl)?"userpicker:onPopUpSelection":void 0}))}var k=t();return a.bind(n.NEW_CONTENT_ADDED,function(e,t,r){r!==i.panelRefreshed&&m(t)}),m});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/init/init-user-pickers-webresource.js' */
require("jira/field/init-multi-user-pickers"),require("jira/field/init-single-user-pickers");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/lib/jquery.dotdotdot-1.5.7.js' */
(function(i){if(i.fn.dotdotdot){return}i.fn.dotdotdot=function(v){if(this.length==0){if(!v||v.debug!==false){b(true,'No element found for "'+this.selector+'".')}return this}if(this.length>1){return this.each(function(){i(this).dotdotdot(v)})}var r=this;if(r.data("dotdotdot")){r.trigger("destroy.dot")}r.bind_events=function(){r.bind("update.dot",function(y,A){y.preventDefault();y.stopPropagation();t.maxHeight=(typeof t.height=="number")?t.height:o(r);t.maxHeight+=t.tolerance;if(typeof A!="undefined"){if(typeof A=="string"||A instanceof HTMLElement){A=i("<div />").append(A).contents()}if(A instanceof i){w=A}}s=r.wrapInner('<div class="dotdotdot" />').children();s.empty().append(w.clone(true)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var z=false,x=false;if(q.afterElement){z=q.afterElement.clone(true);q.afterElement.remove()}if(k(s,t)){if(t.wrap=="children"){x=d(s,t,z)}else{x=m(s,r,s,t,z)}}s.replaceWith(s.contents());s=null;if(i.isFunction(t.callback)){t.callback.call(r[0],x,w)}q.isTruncated=x;return x}).bind("isTruncated.dot",function(y,x){y.preventDefault();y.stopPropagation();if(typeof x=="function"){x.call(r[0],q.isTruncated)}return q.isTruncated}).bind("originalContent.dot",function(y,x){y.preventDefault();y.stopPropagation();if(typeof x=="function"){x.call(r[0],w)}return w}).bind("destroy.dot",function(x){x.preventDefault();x.stopPropagation();r.unwatch().unbind_events().empty().append(w).data("dotdotdot",false)});return r};r.unbind_events=function(){r.unbind(".dot");return r};r.watch=function(){r.unwatch();if(t.watch=="window"){var z=i(window),y=z.width(),x=z.height();z.bind("resize.dot"+q.dotId,function(){if(y!=z.width()||x!=z.height()||!t.windowResizeFix){y=z.width();x=z.height();if(p){clearInterval(p)}p=setTimeout(function(){r.trigger("update.dot")},10)}})}else{u=j(r);p=setInterval(function(){var A=j(r);if(u.width!=A.width||u.height!=A.height){r.trigger("update.dot");u=j(r)}},100)}return r};r.unwatch=function(){i(window).unbind("resize.dot"+q.dotId);if(p){clearInterval(p)}return r};var w=r.contents(),t=i.extend(true,{},i.fn.dotdotdot.defaults,v),q={},u={},p=null,s=null;q.afterElement=c(t.after,r);q.isTruncated=false;q.dotId=l++;r.data("dotdotdot",true).bind_events().trigger("update.dot");if(t.watch){r.watch()}return r};i.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:false,windowResizeFix:true,debug:false};var l=1;function d(s,w,v){var u=s.children(),p=false;s.empty();for(var r=0,q=u.length;r<q;r++){var t=u.eq(r);s.append(t);if(v){s.append(v)}if(k(s,w)){t.remove();p=true;break}else{if(v){v.remove()}}}return p}function m(s,r,A,t,q){var w=s.contents(),x=false;s.empty();var z="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style";for(var y=0,u=w.length;y<u;y++){if(x){break}var v=w[y],p=i(v);if(typeof v=="undefined"){continue}s.append(p);if(q){s[(s.is(z))?"after":"append"](q)}if(v.nodeType==3){if(k(A,t)){x=e(p,r,A,t,q)}}else{x=m(p,r,A,t,q)}if(!x){if(q){q.remove()}}}return x}function e(q,r,p,w,s){var D=false,A=q[0];if(typeof A=="undefined"){return false}var E=(w.wrap=="letter")?"":" ",t=h(A).split(E),F=-1,v=-1,G=0,y=t.length-1;while(G<=y){var x=Math.floor((G+y)/2);if(x==v){break}v=x;a(A,t.slice(0,v+1).join(E)+w.ellipsis);if(!k(p,w)){F=v;G=v}else{y=v}}if(F!=-1&&!(t.length==1&&t[0].length==0)){var u=f(t.slice(0,F+1).join(E),w);D=true;a(A,u)}else{var z=q.parent();q.remove();var C=(s)?s.length:0;if(z.contents().size()>C){var B=z.contents().eq(-1-C);D=e(B,r,p,w,s)}else{var A=z.prev().contents().eq(-1)[0];if(typeof A!="undefined"){var u=f(h(A),w);a(A,u);z.remove();D=true}}}return D}function k(q,p){return q.innerHeight()>p.maxHeight}function f(p,q){while(i.inArray(p.slice(-1),q.lastCharacter.remove)>-1){p=p.slice(0,-1)}if(i.inArray(p.slice(-1),q.lastCharacter.noEllipsis)<0){p+=q.ellipsis}return p}function j(p){return{width:p.innerWidth(),height:p.innerHeight()}}function a(q,p){if(q.innerText){q.innerText=p}else{if(q.nodeValue){q.nodeValue=p}else{if(q.textContent){q.textContent=p}}}}function h(p){if(p.innerText){return p.innerText}else{if(p.nodeValue){return p.nodeValue}else{if(p.textContent){return p.textContent}else{return""}}}}function c(p,q){if(typeof p=="undefined"){return false}if(!p){return false}if(typeof p=="string"){p=i(p,q);return(p.length)?p:false}if(typeof p=="object"){return(typeof p.jquery=="undefined")?false:p}return false}function o(s){var t=s.innerHeight(),r=["paddingTop","paddingBottom"];for(var u=0,q=r.length;u<q;u++){var p=parseInt(s.css(r[u]),10);if(isNaN(p)){p=0}t-=p}return t}function b(q,p){if(!q){return false}if(typeof p=="string"){p="dotdotdot: "+p}else{p=["dotdotdot:",p]}if(typeof window.console!="undefined"){if(typeof window.console.log!="undefined"){window.console.log(p)}}return false}var n=i.fn.html;i.fn.html=function(p){if(typeof p!="undefined"){if(this.data("dotdotdot")){if(typeof p!="function"){return this.trigger("update",[p])}}return n.call(this,p)}return n.call(this)};var g=i.fn.text;i.fn.text=function(q){if(typeof q!="undefined"){if(this.data("dotdotdot")){var p=i("<div />");p.text(q);q=p.html();p.remove();return this.trigger("update",[q])}return g.call(this,q)}return g.call(this)}})(require("jquery"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/ProjectTemplatesList.soy' */
// This file was automatically generated from ProjectTemplatesList.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.renderProjectTemplates = function(opt_data, opt_ignored) {
  return '' + ((soy.$$getMapKeys(opt_data.projectTemplates).length == 0) ? JIRA.Templates.errorMsg({closeable: false, msg: '\u6ca1\u6709\u627e\u5230\u9879\u76ee\u6a21\u677f\u3002'}) : JIRA.Templates.ProjectTemplates.renderTemplates(opt_data));
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplates';
}


JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.projectTemplatesByType.length == 0) {
    output += JIRA.Templates.errorMsg({closeable: false, msg: '\u6ca1\u6709\u627e\u5230\u9879\u76ee\u6a21\u677f\u3002'});
  } else {
    var projectTypeTemplatesGroupList18 = opt_data.projectTemplatesByType;
    var projectTypeTemplatesGroupListLen18 = projectTypeTemplatesGroupList18.length;
    for (var projectTypeTemplatesGroupIndex18 = 0; projectTypeTemplatesGroupIndex18 < projectTypeTemplatesGroupListLen18; projectTypeTemplatesGroupIndex18++) {
      var projectTypeTemplatesGroupData18 = projectTypeTemplatesGroupList18[projectTypeTemplatesGroupIndex18];
      output += '<div class="template-group" id="project-template-group-' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeKey) + '"><div class="template-group-header"><h6><img class="project-type-icon" src="data:image/svg+xml;base64, ' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.icon) + ' " alt=""/><span>' + soy.$$escapeHtml(projectTypeTemplatesGroupData18.projectTypeBean.projectTypeDisplayKey) + '</span></h6></div>' + JIRA.Templates.ProjectTemplates.renderTemplates({projectTemplates: projectTypeTemplatesGroupData18.projectTemplates}) + '</div>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType';
}


JIRA.Templates.ProjectTemplates.renderTemplates = function(opt_data, opt_ignored) {
  return '<div class="pt-templates-list">' + JIRA.Templates.ProjectTemplates.renderItems(opt_data) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderTemplates.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderTemplates';
}


JIRA.Templates.ProjectTemplates.renderItems = function(opt_data, opt_ignored) {
  var output = '<fieldset><legend class="assistive">' + soy.$$escapeHtml('Select a project template') + '</legend><div class="templates">';
  var templateList39 = opt_data.projectTemplates;
  var templateListLen39 = templateList39.length;
  for (var templateIndex39 = 0; templateIndex39 < templateListLen39; templateIndex39++) {
    var templateData39 = templateList39[templateIndex39];
    output += '<div class="template"' + ((templateData39.itemModuleCompleteKey) ? 'data-item-module-complete-key="' + soy.$$escapeHtml(templateData39.itemModuleCompleteKey) + '"' : '') + ((templateData39.projectTemplateModuleCompleteKey) ? 'data-project-template-module-complete-key="' + soy.$$escapeHtml(templateData39.projectTemplateModuleCompleteKey) + '"' : '') + ((templateData39.createProject) ? 'data-create-project="' + soy.$$escapeHtml(templateData39.createProject) + '"' : '') + ((templateData39.demoProject) ? 'data-demo-project="' + soy.$$escapeHtml(templateData39.demoProject) + '"' : '') + ((templateData39.backgroundIconUrl) ? 'data-background-icon-url="' + soy.$$escapeHtml(templateData39.backgroundIconUrl) + '"' : '') + ((templateData39.name) ? 'data-name="' + soy.$$escapeHtml(templateData39.name) + '"' : '') + ((templateData39.description) ? 'data-description="' + soy.$$escapeHtml(templateData39.description) + '"' : '') + ((templateData39.longDescriptionContent) ? 'data-long-description-content="' + soy.$$escapeHtml(templateData39.longDescriptionContent) + '"' : '') + ((templateData39.infoSoyPath) ? 'data-info-soy-path="' + soy.$$escapeHtml(templateData39.infoSoyPath) + '"' : '') + '><img class="template-preview" src="' + soy.$$escapeHtml(templateData39.iconUrl) + '" alt="" /><input type="radio" class="assistive" name="project-template" id="' + soy.$$escapeHtml(templateData39.itemModuleCompleteKey) + '"><label for="' + soy.$$escapeHtml(templateData39.itemModuleCompleteKey) + '" class="assistive">' + soy.$$escapeHtml(templateData39.name) + ', ' + soy.$$escapeHtml(templateData39.description) + '</label><div class="template-meta" aria-hidden="true"><div class="template-name" title="' + soy.$$escapeHtml(templateData39.name) + '">' + soy.$$escapeHtml(templateData39.name) + '</div><div class="template-description" title="' + soy.$$escapeHtml(templateData39.description) + '">' + soy.$$escapeHtml(templateData39.description) + '</div></div></div>';
  }
  output += '</div></fieldset>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.renderItems.soyTemplateName = 'JIRA.Templates.ProjectTemplates.renderItems';
}


JIRA.Templates.ProjectTemplates.loadingTemplatesList = function(opt_data, opt_ignored) {
  return '<div class="wait-container"><img class="wait-icon" src="' + soy.$$escapeHtml("") + '/images/icons/wait.gif"><span class="wait-text">' + soy.$$escapeHtml('\u8bfb\u53d6\u9879\u76ee\u6a21\u677f') + '&hellip;</span></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loadingTemplatesList.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loadingTemplatesList';
}


JIRA.Templates.ProjectTemplates.footerLinks = function(opt_data, opt_ignored) {
  return '<div class="footer-links"><a class="import-project-trigger button-panel-link" href="' + soy.$$escapeHtml("") + '/secure/admin/views/ExternalImport1.jspa">' + soy.$$escapeHtml('\u4ece\u5916\u90e8\u7cfb\u7edf\u5bfc\u5165') + '</a>|<a class="create-with-shared-config button-panel-link" href="#"><span class="aui-icon aui-icon-create-shared">' + soy.$$escapeHtml('\u521b\u5efa\u4e0e\u5171\u4eab\u914d\u7f6e') + '</span> ' + soy.$$escapeHtml('\u521b\u5efa\u4e0e\u5171\u4eab\u914d\u7f6e') + '</a>' + ((opt_data.showDemoLink) ? '| <a class="add-demo-project-trigger button-panel-link" href="#">' + soy.$$escapeHtml('\u521b\u5efa\u793a\u4f8b\u6570\u636e') + '</a>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.footerLinks.soyTemplateName = 'JIRA.Templates.ProjectTemplates.footerLinks';
}


JIRA.Templates.ProjectTemplates.addWorkflowsLink = function(opt_data, opt_ignored) {
  return '<a class="add-workflow-link" href="' + soy.$$escapeHtml(opt_data.baseUrl) + '/plugins/servlet/wfshare-import?src=projecttemplates">' + soy.$$escapeHtml('\u67e5\u770b\u5e02\u573a\u5de5\u4f5c\u6d41') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addWorkflowsLink.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addWorkflowsLink';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/AddProject.soy' */
// This file was automatically generated from AddProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.addProjectForm = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.errorMessages) {
    var errorList5 = opt_data.errors.errorMessages;
    var errorListLen5 = errorList5.length;
    for (var errorIndex5 = 0; errorIndex5 < errorListLen5; errorIndex5++) {
      var errorData5 = errorList5[errorIndex5];
      output += JIRA.Templates.errorMsg({closeable: false, msg: errorData5});
    }
  }
  output += '<div class="add-project-wrapper"><div class="add-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({legendContent: '', content: '' + JIRA.Templates.ProjectTemplates.longTextField({id: 'name', name: 'name', isRequired: false, maxLength: opt_data.maxNameLength, labelContent: '\u540d\u79f0', descriptionText: AJS.format('\u6700\u591a{0}\u5b57\u7b26',opt_data.maxNameLength), value: opt_data.currentName ? opt_data.currentName : '', errorTexts: opt_data.errors.errors.projectName ? [opt_data.errors.errors.projectName] : []}) + JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon({id: 'key', name: 'key', isRequired: false, maxLength: opt_data.maxKeyLength, labelContent: '\u952e\u503c', descriptionText: AJS.format('\u6700\u591a{0}\u5b57\u7b26',opt_data.maxKeyLength), helpTitle: '\u4ec0\u4e48\u662f\u9879\u76ee\u7684\u5173\u952e\u5b57\uff1f', value: opt_data.currentKey ? opt_data.currentKey : '', errorTexts: opt_data.errors.errors.projectKey ? [opt_data.errors.errors.projectKey] : []}) + ((opt_data.shouldShowLead) ? JIRA.Templates.ProjectTemplates.projectLeadField({field: opt_data.projectLeadPickerField, isRequired: false, errorTexts: opt_data.errors.errors.projectLead ? [opt_data.errors.errors.projectLead] : [], options: opt_data.leadOptions}) : '') + ((opt_data.addUserToLicense.displayCheckbox) ? JIRA.Templates.ProjectTemplates.addUserToLicense({fieldId: opt_data.addUserToLicense.fieldId, fieldName: opt_data.addUserToLicense.fieldName, applicationName: opt_data.addUserToLicense.applicationName, usedSeats: opt_data.addUserToLicense.usedSeats, totalSeats: opt_data.addUserToLicense.totalSeats, disableCheckbox: opt_data.addUserToLicense.disableCheckbox, licensingUrl: opt_data.addUserToLicense.licensingUrl}) : '') + '<input type="hidden" name="keyEdited" id="keyEdited" value="false"><input type="hidden" name="projectTemplateWebItemKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateWebItemKey) + '"><input type="hidden" name="projectTemplateModuleKey" value="' + soy.$$escapeHtml(opt_data.projectTemplateModuleKey) + '"><input type="submit" class="pt-hidden-submit offscreen-left" tabindex="-1" aria-hidden="true">'}), id: 'add-project-form'}) + '</div>' + ((opt_data.projectTemplateDescriptionContent) ? '<div class="add-project-description-wrapper"><div class="project-template-title"><h3>' + soy.$$escapeHtml(opt_data.projectTemplateTitle) + '</h3></div><div class="project-template-description">' + soy.$$filterNoAutoescape(opt_data.projectTemplateDescriptionContent) + '</div></div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addProjectForm';
}


JIRA.Templates.ProjectTemplates.keyHelpPopup = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog id="key-help-popup" class="project-key-help" alignment="top left" aria-label="' + soy.$$escapeHtml('\u4ec0\u4e48\u662f\u9879\u76ee\u7684\u5173\u952e\u5b57\uff1f') + ' ' + soy.$$escapeHtml('\u5b83\u4f1a\u6210\u4e3a\u9879\u76ee\u4e2d\u6bcf\u4e2a\u95ee\u9898\u7684\u524d\u7f00') + '; ' + soy.$$escapeHtml('\u5b83\u53ef\u4ee5\u88ab\u6539\u53d8\uff0c\u4f46\u662f\u8fd9\u4e0d\u662f\u4e00\u4e2a\u7410\u788e\u7684\u4efb\u52a1') + '." ><p><b>' + soy.$$escapeHtml('\u4ec0\u4e48\u662f\u9879\u76ee\u7684\u5173\u952e\u5b57\uff1f') + '</b></p><ul><li>' + soy.$$escapeHtml('\u5b83\u4f1a\u6210\u4e3a\u9879\u76ee\u4e2d\u6bcf\u4e2a\u95ee\u9898\u7684\u524d\u7f00') + '</li><li>' + soy.$$escapeHtml('\u5b83\u53ef\u4ee5\u88ab\u6539\u53d8\uff0c\u4f46\u662f\u8fd9\u4e0d\u662f\u4e00\u4e2a\u7410\u788e\u7684\u4efb\u52a1') + '</li></ul></aui-inline-dialog>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.keyHelpPopup.soyTemplateName = 'JIRA.Templates.ProjectTemplates.keyHelpPopup';
}


JIRA.Templates.ProjectTemplates.projectLeadField = function(opt_data, opt_ignored) {
  var param83 = '' + aui.form.label({forField: opt_data.field.name + '-field', isRequired: opt_data.isRequired, content: '\u9879\u76ee\u8d1f\u8d23\u4eba'}) + JIRA.Templates.Fields.Pickers.User.single({field: opt_data.field, options: opt_data.options, editValue: opt_data.value}) + aui.form.fieldDescription({message: '\u8f93\u5165\u9879\u76ee\u8d1f\u8d23\u4eba\u7684\u7528\u6237\u540d\u3002'});
  if (opt_data.errorTexts) {
    var errorList96 = opt_data.errorTexts;
    var errorListLen96 = errorList96.length;
    for (var errorIndex96 = 0; errorIndex96 < errorListLen96; errorIndex96++) {
      var errorData96 = errorList96[errorIndex96];
      param83 += aui.form.fieldError({message: errorData96});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param83});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.projectLeadField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.projectLeadField';
}


JIRA.Templates.ProjectTemplates.addUserToLicense = function(opt_data, opt_ignored) {
  var output = '';
  var labelMessage__soy102 = '' + soy.$$escapeHtml(AJS.format('\u7ed9\u6211\u4e00\u4e2a{0}\u8bb8\u53ef\u8bc1\uff0c\u8fd9\u6837\uff0c\u6211\u5c31\u53ef\u4ee5\u8fdb\u5165\u6b64\u9879\u76ee\u3002',opt_data.applicationName)) + ((opt_data.totalSeats > 0) ? '<br/>' + soy.$$escapeHtml(AJS.format('({0}\u7684{1}\u7684\u8bb8\u53ef\u8bc1\u73b0\u5728\u7528)',opt_data.usedSeats,opt_data.totalSeats)) : '');
  output += aui.form.fieldGroup({content: '' + aui.form.label({forField: opt_data.fieldName, content: 'License'}) + ((opt_data.disableCheckbox) ? aui.form.field({id: opt_data.fieldId, name: opt_data.fieldName, value: 'true', type: 'checkbox', isChecked: false, labelContent: labelMessage__soy102, isDisabled: true, descriptionContent: AJS.format('\u6211\u4eec\u4e0d\u80fd\u8ba9\u60a8\u8bbf\u95ee{0}\u81ea\u52a8\u7684\u3002\u60a8\u53ef\u4ee5\u5728{1}\u4e2d\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u8bbf\u95ee{2}\u7684\u5de5\u4f5c{0}\u9879\u76ee\u3002',opt_data.applicationName,'<a href="' + "" + opt_data.licensingUrl + '">','</a>')}) : aui.form.field({id: opt_data.fieldId, name: opt_data.fieldName, value: 'true', type: 'checkbox', isChecked: false, labelContent: labelMessage__soy102, isDisabled: false}))});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.addUserToLicense.soyTemplateName = 'JIRA.Templates.ProjectTemplates.addUserToLicense';
}


JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon = function(opt_data, opt_ignored) {
  var param134 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value}) + '<button class="help-lnk" id="' + soy.$$escapeHtml(opt_data.id) + '-help-trigger" data-aui-trigger aria-controls="key-help-popup"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml(opt_data.helpTitle) + '</span></button>' + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList156 = opt_data.errorTexts;
    var errorListLen156 = errorList156.length;
    for (var errorIndex156 = 0; errorIndex156 < errorListLen156; errorIndex156++) {
      var errorData156 = errorList156[errorIndex156];
      param134 += aui.form.fieldError({message: errorData156});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param134});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon.soyTemplateName = 'JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon';
}


JIRA.Templates.ProjectTemplates.longTextField = function(opt_data, opt_ignored) {
  var param162 = '' + aui.form.label({forField: opt_data.name, isRequired: opt_data.isRequired, content: opt_data.labelContent}) + aui.form.input({id: opt_data.id, name: opt_data.name, type: 'text', maxLength: opt_data.maxLength, value: opt_data.value, extraClasses: 'long-field'}) + ((opt_data.descriptionText) ? aui.form.fieldDescription({message: opt_data.descriptionText}) : '');
  if (opt_data.errorTexts) {
    var errorList180 = opt_data.errorTexts;
    var errorListLen180 = errorList180.length;
    for (var errorIndex180 = 0; errorIndex180 < errorListLen180; errorIndex180++) {
      var errorData180 = errorList180[errorIndex180];
      param162 += aui.form.fieldError({message: errorData180});
    }
  }
  var output = '' + aui.form.fieldGroup({content: param162});
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.longTextField.soyTemplateName = 'JIRA.Templates.ProjectTemplates.longTextField';
}


JIRA.Templates.ProjectTemplates.spinner = function(opt_data, opt_ignored) {
  return '<span id=\'' + soy.$$escapeHtml(opt_data.id) + '\' class=\'icon throbber loading\'/>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.spinner.soyTemplateName = 'JIRA.Templates.ProjectTemplates.spinner';
}


JIRA.Templates.ProjectTemplates.formatAnchor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.body) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.formatAnchor.soyTemplateName = 'JIRA.Templates.ProjectTemplates.formatAnchor';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/soy/CreateSharedProject.soy' */
// This file was automatically generated from CreateSharedProject.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }


JIRA.Templates.ProjectTemplates.createSharedProjectForm = function(opt_data, opt_ignored) {
  return '<div class="create-shared-project-wrapper"><div class="create-shared-project-form-wrapper">' + aui.form.form({content: '' + aui.form.fieldset({content: '<p>' + soy.$$escapeHtml('\u9009\u62e9\u60a8\u5e0c\u671b\u5171\u4eab\u914d\u7f6e\u7684\u73b0\u6709\u9879\u76ee\u3002') + '<a class="help-lnk" title="' + soy.$$escapeHtml('\u4ec0\u4e48\u4f1a\u88ab\u5171\u4eab\uff1f') + '" id="shared-help-icon"><span class="aui-icon aui-icon-help">' + soy.$$escapeHtml('\u4ec0\u4e48\u4f1a\u88ab\u5171\u4eab\uff1f') + '</span></a></p>' + aui.form.fieldGroup({extraClasses: 'project-picker-group', content: '' + aui.form.label({forField: 'project-picker', isRequired: false, content: '\u9009\u62e9\u4e00\u4e2a\u9879\u76ee'}) + aui.form.input({id: 'project-picker', name: 'project', type: 'text'}) + '<div id="project-picker-options" data-suggestions="' + soy.$$escapeHtml(opt_data.projectSuggestions) + '"></div>'}) + '<p class="create-shared-info">' + soy.$$escapeHtml('\u5f53\u4e00\u4e2a\u914d\u7f6e\u88ab\u591a\u4e2a\u9879\u76ee\u5171\u4eab\u65f6\uff0c\u8fd9\u610f\u5473\u7740\u5bf9\u914d\u7f6e\u7684\u4efb\u4f55\u6539\u52a8\u90fd\u4f1a\u5f71\u54cd\u6240\u6709\u9879\u76ee\u3002') + '</p>'}), id: 'create-shared-project-form'}) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.createSharedProjectForm.soyTemplateName = 'JIRA.Templates.ProjectTemplates.createSharedProjectForm';
}


JIRA.Templates.ProjectTemplates.loading = function(opt_data, opt_ignored) {
  return '<div><div class="dialog-spinner"></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.loading.soyTemplateName = 'JIRA.Templates.ProjectTemplates.loading';
}


JIRA.Templates.ProjectTemplates.noProjects = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('\u770b\u8d77\u6765\u6ca1\u6709\u5176\u4ed6\u9879\u76ee\u7684\u5b58\u5728\u3002\u8bf7\u521b\u5efa\u5168\u65b0\u7684\u9879\u76ee\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u4e4b\u524d\u8981\u5171\u4eab\u73b0\u6709\u9879\u76ee\u7684\u914d\u7f6e\u3002') + '</p>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.noProjects.soyTemplateName = 'JIRA.Templates.ProjectTemplates.noProjects';
}


JIRA.Templates.ProjectTemplates.sharedHelp = function(opt_data, opt_ignored) {
  return '<div class="shared-help"><p><strong>' + soy.$$escapeHtml('\u4ec0\u4e48\u4f1a\u88ab\u5171\u4eab\uff1f') + '</strong></p><p>' + soy.$$escapeHtml('\u914d\u7f6e\u5305\u542b\u9879\u76ee\u4f7f\u7528\u7684\u65b9\u6848\u7ec4\u5408') + '</p><ul><li>' + soy.$$escapeHtml('\u6743\u9650\u65b9\u6848') + '</li><li>' + soy.$$escapeHtml('\u901a\u77e5\u65b9\u6848') + '</li><li>' + soy.$$escapeHtml('\u95ee\u9898\u5b89\u5168\u65b9\u6848') + '</li><li>' + soy.$$escapeHtml('\u5de5\u4f5c\u6d41\u65b9\u6848') + '</li><li>' + soy.$$escapeHtml('\u95ee\u9898\u7c7b\u578b\u65b9\u6848') + '</li><li>' + soy.$$escapeHtml('\u95ee\u9898\u7c7b\u578b\u754c\u9762\u65b9\u6848') + '</li><li>' + soy.$$escapeHtml('\u5b57\u6bb5\u914d\u7f6e\u65b9\u6848') + '</li></ul></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.sharedHelp.soyTemplateName = 'JIRA.Templates.ProjectTemplates.sharedHelp';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/Config.js' */
define("jira/project-templates/config",{model:{}});AJS.namespace("JPT.ConfigModel",null,require("jira/project-templates/config"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/ProjectKeyGenerator.js' */
define("jira/project-templates/project-key-generator",["jquery","underscore"],function(d,h){var c={};c.IGNORED_WORDS=["THE","A","AN","AS","AND","OF","OR"];c.CHARACTER_MAP={};c.CHARACTER_MAP[199]="C";c.CHARACTER_MAP[231]="c";c.CHARACTER_MAP[252]="u";c.CHARACTER_MAP[251]="u";c.CHARACTER_MAP[250]="u";c.CHARACTER_MAP[249]="u";c.CHARACTER_MAP[233]="e";c.CHARACTER_MAP[234]="e";c.CHARACTER_MAP[235]="e";c.CHARACTER_MAP[232]="e";c.CHARACTER_MAP[226]="a";c.CHARACTER_MAP[228]="a";c.CHARACTER_MAP[224]="a";c.CHARACTER_MAP[229]="a";c.CHARACTER_MAP[225]="a";c.CHARACTER_MAP[239]="i";c.CHARACTER_MAP[238]="i";c.CHARACTER_MAP[236]="i";c.CHARACTER_MAP[237]="i";c.CHARACTER_MAP[196]="A";c.CHARACTER_MAP[197]="A";c.CHARACTER_MAP[201]="E";c.CHARACTER_MAP[230]="ae";c.CHARACTER_MAP[198]="Ae";c.CHARACTER_MAP[244]="o";c.CHARACTER_MAP[246]="o";c.CHARACTER_MAP[242]="o";c.CHARACTER_MAP[243]="o";c.CHARACTER_MAP[220]="U";c.CHARACTER_MAP[255]="Y";c.CHARACTER_MAP[214]="O";c.CHARACTER_MAP[241]="n";c.CHARACTER_MAP[209]="N";c.desiredKeyLength=4;c.maxKeyLength=10;c.getTotalLength=function a(k){return k.join("").length};c.removeIgnoredWords=function f(k){return h.reject(k,function(l){return d.inArray(l,c.IGNORED_WORDS)!==-1})};c.createAcronym=function b(l){var k="";d.each(l,function(m,n){k+=n.charAt(0)});return k};c.getFirstSyllable=function i(m){var l=false;var k;for(k=0;k<m.length;k++){if(c.isVowelOrY(m[k])){l=true}else{if(l){return m.substring(0,k+1)}}}return m};c.isVowelOrY=function g(k){return k&&k.length===1&&k.search("[AEIOUY]")!==-1};c.init=function j(l,k){c.desiredKeyLength=l;c.maxKeyLength=k};c.generate=function e(l){l=d.trim(l);if(!l){return""}var k=[];for(var n=0,p=l.length;n<p;n++){var o=c.CHARACTER_MAP[l.charCodeAt(n)];k.push(o?o:l[n])}l=k.join("");var r=[];d.each(l.split(/\s+/),function(s,t){if(t){t=t.replace(/[^a-zA-Z]/g,"");t=t.toUpperCase();t.length&&r.push(t)}});if(c.desiredKeyLength&&c.getTotalLength(r)>c.desiredKeyLength){r=c.removeIgnoredWords(r)}var m;if(r.length==0){m=""}else{if(r.length==1){var q=r[0];if(c.desiredKeyLength&&q.length>c.desiredKeyLength){m=c.getFirstSyllable(q)}else{m=q}}else{m=c.createAcronym(r)}}if(c.maxKeyLength&&m.length>c.maxKeyLength){m=m.substr(0,c.maxKeyLength)}return m};return c});AJS.namespace("JPT.ProjectKeyGenerator",null,require("jira/project-templates/project-key-generator"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/DialogView.js' */
define("jira/project-templates/dialog-view-impl",["require","backbone","underscore","jquery","jira/dialog/accessible-dialog"],function(d,g,c,f,e){var a=AJS.trigger;return g.View.extend({events:{"click   .add-project-trigger":"_onClickAddProject","click   .add-demo-project-trigger":"_onClickAddDemoProject","click   .add-workflow-link":"_onClickViewMarketplaceWorkflows","click   #add-project-dialog .add-demo-project-trigger":"_onCreateProjectAddDemoProjectClick","click   #add-project-dialog .import-project-trigger":"_onClickImportProject","click   #add-project-dialog .create-with-shared-config":"_onClickCreateShared","keydown #add-project-dialog .pt-templates-list":"_onKeydownInTemplatesList"},draw:function(){var h=this.$dialogTrigger;if(!h||h.is("#project_template_create_link_lnk")){h=f("#header nav #browse_link")}var i=new e({width:840,height:400,id:"add-project-dialog",closeOnOutsideClick:false,keypressListener:c.bind(this._onKeyPressed,this),$elementToFocusOnClose:h});var j=i.popup.element;i.addPage("project-templates-page");i.addHeader("\u9009\u62e9\u9879\u76ee\u7c7b\u578b","add-project-dialog-header");i.addPanel("ProjectTemplatesListPanel",JIRA.Templates.ProjectTemplates.loadingTemplatesList(),"pt-content");this._dialog=i;this._$dialogElement=j;i.show();return i},remove:function(){this._dialog&&this._dialog.remove()},showErrorMessage:function(h){this._dialog.getPanel(1,0).html(JIRA.Templates.errorMsg({closable:false,msg:h}))},get$PTContent:function b(){return this.getDialogController().$dialogElement.find(".pt-content")},_onKeyPressed:function(i){var h=27;if(this._dialog){if(i.keyCode===h){this.getDialogController().hideDialogFromNewUser("dismissed");this._dialog.remove();return false}}return true},_onKeydownInTemplatesList:function(i){var h=13;if(this._dialog){if(i.keyCode===h){this._$dialogElement.find(".pt-submit-button:visible").click();return false}}return true},_onClickAddProject:function(h){h.preventDefault();this.$dialogTrigger=f(h.target);this.getDialogController().handleProjectTemplateTriggered()},_onCreateProjectAddDemoProjectClick:function(){a("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.create.project.clicked"})},_onClickViewMarketplaceWorkflows:function(){a("analyticsEvent",{name:"jira.project.templates.dialog.create.viewmarketplaceworkflows.clicked"})},_onClickAddDemoProject:function(i){i.preventDefault();var h=this.getDialogController().dialog;if(h&&h.popup&&h.popup.element){h.remove()}this.getDialogController().handleDemoProjectTemplateTriggered()},_onClickImportProject:function(h){this.getDialogController().hideDialogFromNewUser("importproject")},_onClickCreateShared:function(h){this.getDialogController().handleCreateShared()},getDialogController:function(){return d("jira/project-templates/dialog-controller")}})});define("jira/project-templates/dialog-view",["jira/project-templates/dialog-view-impl","jquery"],function(b,a){return new b({el:a(document)})});AJS.namespace("JPT.DialogView",null,require("jira/project-templates/dialog-view"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/DialogController.js' */
define("jira/project-templates/dialog-controller",["jira/project-templates/dialog-view","jira/project-templates/config","jira/ajs/ajax/smart-ajax","jira/util/data/meta","jira/lib/class","jquery","underscore","wrm/data"],function(n,e,a,g,b,k,o,m){var d=AJS.contextPath();var f=AJS.isDevMode;var i=AJS.log;function h(p,q){AJS.trigger("analyticsEvent",{name:p,data:q})}var l;var c=function(){if(!l){l=m.claim("com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData")||{}}return l};var j=b.extend({WELCOME_REST_URL:d+"/rest/welcome/1.0/show/welcome",initialize:function(){o.bindAll(this,"handleProjectTemplateTriggered","hideDialogFromNewUser");if(g.getBoolean("show-welcome-screen")){this.handleProjectTemplateTriggered()}},handleProjectTemplateTriggered:function(){this.demoProject=false;h("jira.project.templates.dialog.create.show");this.openWithFirstProjectTemplateOfTypePreSelected()},handleDemoProjectTemplateTriggered:function(){this.demoProject=true;var p=this.getTemplateController().loadDemoProjectTemplatesData();this.openWithFirstProjectTemplateOfTypePreSelected(null,p);this._addAnalyticsToCreateDemoShow(p)},_addAnalyticsToCreateDemoShow:function(p){p.done(function(r){var s={};var q=function(t){return t.projectTemplatesGroupedByType.map(function(u){return u.projectTemplates.map(function(v){return v.itemModuleCompleteKey}).join()}).join()};s.demoSets=q(r);s.instanceCreatedDate=c().instanceCreatedDate;h("jira.project.templates.dialog.create.demo.show",s)}.bind(this))},openWithFirstProjectTemplateOfTypePreSelected:function(p,q){q=q||this.getTemplateController().loadProjectTemplatesData();this.dialog=n.draw();q.fail(o.bind(function(r){this._handleUnknownErrorOfPTRetrieval()},this));q.done(o.bind(function(r){this.$dialogElement=this.dialog.popup.element;var s;if(!o.isUndefined(e.model.selectedTemplate)){s=e.model.selectedTemplate}e.model=r;e.model.selectedTemplate=s;this.getTemplateController().init(r,p)},this))},handleCreateShared:function(){h("jira.project.templates.dialog.create.shared.clicked");this.demoProject=false;this.openWithCreateShared()},openWithCreateShared:function(){var p=require("jira/project-templates/create-shared-controller");p.initCreateShared()},callbackWithResize:function(p){return o.bind(o.wrap(p,function(q){q.call(this);this.dialog.updateHeight()}),this)},addPage:function(r){var q=this.dialog.addPage(r.name,r.onLoadFocusBehavior).page[this.dialog.curpage];this.dialog.addHeader(r.title,"add-project-dialog-header");this.dialog.addPanel(r.panelName,"","pt-content");if(r.backButton){this._addBackButton(q)}this.dialog.addButton(r.submitButtonText,this.callbackWithResize(r.submitButtonCallback),r.submitButtonClass+" pt-submit-button");var p=this.$dialogElement.find("."+r.submitButtonClass);p.removeClass("button-panel-button").addClass("aui-button aui-button-primary");this.dialog.addCancel("\u53d6\u6d88",o.bind(function(s){this.hideDialogFromNewUser("dismissed");this.dialog.remove()},this));return q},_backButtonOnClickCallback:function(p){return o.bind(function(){if(this.demoProject){h("jira.project.templates.dialog.demo.back")}else{h("jira.project.templates.dialog.create.back")}var q=n.get$PTContent();q.css("background-image","none");this.dialog.prevPage();p.remove();this.dialog.page.pop()},this)},_addBackButton:function(q){this.dialog.addButton("\u8fd4\u56de",this.callbackWithResize(this._backButtonOnClickCallback(q)),"add-project-back-button");var p=this.$dialogElement.find(".add-project-back-button");p.removeClass("button-panel-button").addClass("aui-button")},_handleUnknownErrorOfPTRetrieval:function(){n.showErrorMessage("\u8bd5\u56fe\u8fde\u63a5JIRA\u7684\u65f6\u5019\u53d1\u751f\u4e86\u4e00\u4e2a\u9519\u8bef\u3002")},hideDialogFromNewUser:function(p){if(p==="dismissed"){if(this.demoProject){h("jira.project.templates.dialog.demo.dismissed")}else{h("jira.project.templates.dialog.create.dismissed")}}else{if(p==="importproject"){h("jira.project.templates.dialog.import.clicked")}else{if(p==="templateselected"){if(this.demoProject){h("jira.project.templates.dialog.demo.templateselected")}else{h("jira.project.templates.dialog.create.templateselected")}}}}if(g.getBoolean("show-welcome-screen")){k.ajax({url:this.WELCOME_REST_URL+"/"+p,type:"DELETE",success:function(){if(f&&f()){i("don't show project template dialog anymore")}}})}},getTemplateController:function(){return require("jira/project-templates/select-project-template-controller")}});return new j()});AJS.namespace("JPT.DialogController",null,require("jira/project-templates/dialog-controller"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/AddProjectView.js' */
define("jira/project-templates/add-project-view-impl",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/util/events","jira/util/events/types","require","backbone","jquery","underscore","jira/dialog/accessible-dialog"],function(r,o,u,z,n,f,h,E,e){var g=AJS.InlineDialog;return f.View.extend({TIMEOUT_MS:100,postDrawCallbacks:[],events:{"submit #add-project-form":"onSubmitForm"},page:undefined,isSubmitting:false,initialize:function(G){E.bindAll(this,"bindHook")},addPostDrawCallback:function(G){this.postDrawCallbacks.push(G)},prepareDialog:function(G){this.page=r.addPage({name:"add-project",title:G,panelName:"add-project",backButton:true,submitButtonText:"\u63d0\u4ea4",submitButtonCallback:this.onSubmitForm.bind(this),submitButtonClass:"add-project-dialog-create-button",onLoadFocusBehavior:e.OnPageLoadFocusBehavior.FirstInteractiveElement})},draw:function(Y){function Z(aa){if(!aa.errors){aa.errors={}}return aa}this.isSubmitting=false;r.dialog.gotoPage(this.page.id);var H=Y.webItemData.projectTemplateModuleCompleteKey;var G=E.find(o.model.projectTemplatesGroupedByType,function(aa){return E.any(aa.projectTemplates,function(ab){return ab.itemModuleCompleteKey==H})});var P=(G&&G.applicationInfo&&G.applicationInfo.applicationName)||"";var M=(G&&G.applicationInfo&&G.applicationInfo.licenseUsedSeats)||0;var I=(G&&G.applicationInfo&&G.applicationInfo.licenseTotalSeats)||0;var X=(G&&G.applicationInfo&&G.applicationInfo.canUserBeAddedToApplication)||false;var L=(G&&G.applicationInfo&&G.applicationInfo.canUserUseApplication)||false;var T=(G&&G.applicationInfo&&G.applicationInfo.ondemand)||false;var J;if(!G||!G.applicationInfo){J=false}else{J=!L}var V={maxNameLength:o.model.maxNameLength,maxKeyLength:o.model.maxKeyLength,shouldShowLead:o.model.shouldShowProjectLead,projectTemplateWebItemKey:o.model.selectedTemplate||Y.webItemData.itemModuleCompleteKey,projectTemplateModuleKey:H,projectTemplateTitle:Y.webItemData.name,projectTemplateDescriptionContent:Y.webItemData.longDescriptionContent,currentKey:Y.currentKey||"",currentName:Y.currentName||"",errors:Z(Y.errors),projectLeadPickerField:{id:"lead",name:"lead"},addUserToLicense:{displayCheckbox:J,disableCheckbox:!X,applicationName:P,usedSeats:M,totalSeats:I,fieldId:"licenseUser",fieldName:"licenseUser",licensingUrl:T?"/admin/accessconfig":"/plugins/servlet/applications/versions-licenses"},leadOptions:[{selected:true,displayName:Y.currentUserDisplayName,optionName:Y.currentUserName,avatarURL:Y.currentUserAvatarUrl}]};var R=JIRA.Templates.ProjectTemplates.addProjectForm(V);r.dialog.getPanel(this.page.id,0).html(R);if(Y.webItemData&&Y.webItemData.backgroundIconUrl){var U=r.$dialogElement.find(".pt-content");U.css("background-image",'url("'+Y.webItemData.backgroundIconUrl+'")')}var S=h("#add-project-form");u.trigger(z.NEW_CONTENT_ADDED,[S]);this.nameElement=r.$dialogElement.find("#name");this.keyElement=r.$dialogElement.find("#key");this.keyEditedElement=r.$dialogElement.find("#keyEdited");this.leadDisplayElement=r.$dialogElement.find("#lead-field");this.leadValueElement=r.$dialogElement.find("#lead");var N=this.keyElement.parent().find("#key-help-trigger");if(N.length){var K=h(JIRA.Templates.ProjectTemplates.keyHelpPopup());N.after(K);K.bind("aui-show",function(){K.attr("role","tooltip")});var O=27;K.bind("keydown",function(aa){if(aa.key==="Escape"||aa.keyCode===O){aa.stopPropagation();K.removeAttr("open")}})}this.keyElement.attr("style","text-transform: uppercase");var W=n("jira/project-templates/add-project-controller");this.nameElement.focus(E.bind(function(aa){this.bindHook(aa,W.nameTimeout)},this));var Q=this;this.nameElement.change(function(aa){W.validateName();Q.unbindHook(aa)});this.keyElement.focus(E.bind(function(ab){var aa=h(ab.target);aa.data("lastValue",aa.val());this.bindHook(ab,W.keyTimeout)},this));this.keyElement.blur(E.bind(function(aa){this.unbindHook(aa)},this));this.keyElement.change(function(){W.validateKey();W.autofillKeyIfNeeded()});if(!E.isEmpty(this.postDrawCallbacks)){E.each(this.postDrawCallbacks,function(aa){aa()})}r.dialog.updateHeight()},onSubmitForm:function(H){var G=n("jira/project-templates/add-project-controller");G.submit();return false},get$SubmitButton:function(){return r.$dialogElement.find(".add-project-dialog-create-button")},get$BackButton:function(){return r.$dialogElement.find(".add-project-back-button")},bindHook:function q(J,H){var G=h(J.target),I;I=E.bind(function(){this.unbindHook(J);H.apply();if(G.is(":visible")){G.data("checkHook",setTimeout(I,this.TIMEOUT_MS))}},this);if(!G.data("checkHook")){G.data("checkHook",setTimeout(I,0))}},unbindHook:function(H){var G=h(H.target);clearTimeout(G.data("checkHook"));G.removeData("checkHook")},showInlineError:function(H,I){if(this.isSubmitting){return}var G=H.parent().find(".error");if(!G.length){G=h("<div class='error'></div>");H.parent().append(G)}G.text(I);G.show()},showInlineErrorForName:function F(G){this.showInlineError(this.nameElement,G)},showInlineErrorForKey:function B(G){this.showInlineError(this.keyElement,G)},hideInlineError:function A(G){G.parent().find(".error").hide()},hideInlineErrorForName:function c(){this.hideInlineError(this.nameElement)},hideInlineErrorForKey:function v(){this.hideInlineError(this.keyElement)},setName:function j(G){this.nameElement.val(G)},getName:function t(){return this.nameElement.val()},setKey:function b(G){this.keyElement.val(G)},getKey:function p(){return this.keyElement.val().toUpperCase()},getLeadDisplayName:function w(){return this.leadDisplayElement.val()},getLeadUserName:function x(){return this.leadValueElement.val()},getAvatarUrlOfSelectedLead:function s(){var G=r.$dialogElement.find("#lead-single-select .aui-ss-entity-icon").css("background-image");if(!E.isUndefined(G)){var H=G.match(/^url\((.+)\)$/);return(H&&H[1])?H[1]:""}else{return""}},setKeyEdited:function m(G){this.keyEditedElement.val(G)},getKeyEdited:function C(){return this.keyEditedElement.val()},setKeyEdited:function m(){var G=this.getKey();if(this.keyElement.data("lastValue")!==G){this.keyEditedElement.val((G)?"true":"false")}this.keyElement.data("lastValue",G)},hasNameErrors:function d(){return this.nameElement.parent().find(".error").size()>0},getAddProjectForm:function i(){return h("#add-project-form")},get$FormFields:function l(){return r.$dialogElement.find(":input")},enterLoadingState:function k(){$submitButton=this.get$SubmitButton();if(!$submitButton.attr("disabled")){$backButton=this.get$BackButton();$submitButton.attr("disabled","disabled");$backButton.attr("disabled","disabled");$backButton.before(JIRA.Templates.ProjectTemplates.spinner({id:"addproject-loading"}));this.get$FormFields().attr("disabled","disabled");this.isSubmitting=true;return true}else{return false}},hideLoadingState:function y(){r.$dialogElement.find("[id^='addproject-loading']").remove();this.get$SubmitButton().removeAttr("disabled");this.get$BackButton().removeAttr("disabled");this.get$FormFields().removeAttr("disabled")},avoidDirtyFormWarning:function a(){if(h.fn.removeDirtyWarning){this.getAddProjectForm().removeDirtyWarning()}},hasInlineErrors:function D(){return r.$dialogElement.find(".field-group .error:visible").length!=0}})});define("jira/project-templates/add-project-view",["jira/project-templates/add-project-view-impl","jira/project-templates/dialog-view","jquery"],function(b,a,c){return new b({el:c(document),dialogView:a})});AJS.namespace("JPT.AddProjectView",null,require("jira/project-templates/add-project-view"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/AddProjectController.js' */
define("jira/project-templates/add-project-controller-impl",["jira/project-templates/add-project-view","jira/project-templates/project-key-generator","jira/project-templates/dialog-controller","jira/project-templates/config","jira/lib/class","jquery","underscore"],function(m,i,k,e,b,l,o){var d=AJS.contextPath();var c=AJS.trigger;return b.extend({postProjectCreationCallbacks:[],projectKeyValidationCallbacks:[],projectNamesUpperCased:[],init:function(p){this._window=p.window||window;o.bindAll(this,"projectCreatedHandler","projectValidationFailedHandler","nameTimeout","keyTimeout","submit")},initCreateShared:function(p){this.existingProjectData=p;this._initAddProject("\u521b\u5efa\u4e0e\u5171\u4eab\u914d\u7f6e")},initProjectTemplate:function(p){this.existingProjectData=undefined;this.webItemData=p;this._initAddProject(p.name)},_initAddProject:function(p){this.desiredKeyLength=4;this.lastKeyValidated="";this._getExistingProjects();i.init(this.desiredKeyLength,e.model.maxKeyLength);m.prepareDialog(p);m.draw({webItemData:this.webItemData||{},maxKeyLength:e.model.maxKeyLength,maxNameLength:e.model.maxNameLength,currentUserName:e.model.currentUserName,currentUserDisplayName:e.model.currentUserDisplayName,currentUserAvatarUrl:e.model.currentUserAvatarUrl,errors:{}})},_resetProjectLeadValues:function(){e.model.currentUserDisplayName="";e.model.currentUserName="";e.model.currentUserAvatarUrl=""},_hasFullyConfiguredProjectLead:function(){return m.getLeadDisplayName()&&m.getAvatarUrlOfSelectedLead()!=""},submit:function(p){var q;if(this.existingProjectData){q={key:m.getKey(),name:m.getName(),lead:m.getLeadUserName()&&m.getLeadUserName()[0]}}else{q=jQuery.param(m.getAddProjectForm().serializeArray().map(function(r){if(r.name==="key"){r.value=r.value.toUpperCase()}return r}))}if(m.hasInlineErrors()){return}if(m.enterLoadingState()){if(this._hasFullyConfiguredProjectLead()){e.model.currentUserDisplayName=m.getLeadDisplayName();e.model.currentUserName=e.model.currentUserDisplayName?m.getLeadUserName():"";e.model.currentUserAvatarUrl=m.getAvatarUrlOfSelectedLead()}else{this._resetProjectLeadValues()}if(this.existingProjectData){l.ajax({url:d+"/rest/project-templates/1.0/createshared/"+this.existingProjectData.existingProjectId,type:"POST",contentType:"application/json",data:JSON.stringify(q)}).done(this.projectCreatedHandler).fail(this.projectValidationFailedHandler)}else{l.ajax({url:d+(this.webItemData.demoProject?"/rest/jira-importers-plugin/1.0/demo/create":"/rest/project-templates/1.0/templates"),type:"POST",data:q,headers:{"X-Atlassian-Token":"no-check"}}).done(this.projectCreatedHandler).fail(this.projectValidationFailedHandler)}}},registerPostProjectCreationCallback:function(p){this.postProjectCreationCallbacks.push(p)},registerProjectKeyValidationCallback:function(p){this.projectKeyValidationCallbacks.push(p)},localStoragePrefix:"jira.projecttemplates.",projectCreatedHandler:function(q){if(this.existingProjectData){c("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.success"})}else{if(this.webItemData.demoProject){c("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.success"})}else{c("analyticsEvent",{name:"jira.project.templates.dialog.create.project.success"})}}m.avoidDirtyFormWarning();var p=this.localStoragePrefix;var r=["confluenceProject","fisheyeProject","crucibleProject","bambooProject"];o.map(r,function(s){if(q.remoteProjectLinks&&q.remoteProjectLinks[s]){localStorage.setItem(p+s,q.remoteProjectLinks[s])}});if(!o.isEmpty(this.postProjectCreationCallbacks)){k.dialog.addPage("post-project-created-page");o.each(this.postProjectCreationCallbacks,function(s){s(k.dialog,q.returnUrl,q.projectId,q.projectKey,q.projectName)})}else{this._window.location=d+q.returnUrl}},projectValidationFailedHandler:function(q,s){if(this.existingProjectData){c("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.failure"})}else{if(this.webItemData.demoProject){c("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.failure"})}else{c("analyticsEvent",{name:"jira.project.templates.dialog.create.project.failure"})}}var r={};if(this.isBadRequest(q)){r=JSON.parse(q.responseText)}else{if(this.isUnDefinedServerSideError(q)){r={errorMessages:["\u55ef...\u6211\u4eec\u65e0\u6cd5\u521b\u5efa\u60a8\u7684\u9879\u76ee\u7531\u4e8e\u672a\u77e5\u7684\u9519\u8bef\u3002\u8bf7\u5c1d\u8bd5\u5237\u65b0\u9875\u9762\u5e76\u91cd\u65b0\u5f00\u59cb\u3002"]}}else{if(this.isDefinedServerSideError(q)){var p=JSON.parse(q.responseText);JIRA.Messages.showReloadErrorMsg(p.message);m.avoidDirtyFormWarning();this._window.location=d+p.returnUrl;return}else{if(this.isTimeoutError(s)){r={errorMessages:["\u521b\u5efa\u9879\u76ee\u7684\u65f6\u5019\u8bf7\u6c42\u8d85\u65f6"]}}else{r={errorMessages:[AJS.format("\u521b\u5efa\u9879\u76ee {0} \u65f6\u53d1\u751f\u9519\u8bef ",q.responseText)]}}}}}m.draw({webItemData:this.webItemData||{},errors:r,currentName:m.getName(),currentKey:m.getKey(),currentUserDisplayName:e.model.currentUserDisplayName,currentUserName:e.model.currentUserName,currentUserAvatarUrl:e.model.currentUserAvatarUrl});m.hideLoadingState()},isBadRequest:function(p){return(p.status===400)},isUnDefinedServerSideError:function(p){if(p.status===500){try{JSON.parse(p.responseText)}catch(q){return true}}return false},isDefinedServerSideError:function(p){return p.status===500&&!o.isUndefined(JSON.parse(p.responseText).message)},isTimeoutError:function(p){return p==="timeout"},_updateAndValidateKey:function a(p){m.setKey(p);this.validateKey()},_shouldUpdateKey:function h(){return(m.getKeyEdited()!="true")},autofillKeyIfNeeded:function n(){if(this._shouldUpdateKey()){var p=i.generate(m.getName());if(p.length>1){this._updateAndValidateKey(p)}else{m.setKey("")}}},_doesProjectNameExists:function(q){var p;for(p in this.projectNamesUpperCased){if(q.toUpperCase()==this.projectNamesUpperCased[p]){return true}}return false},validateName:function(){var p=l.trim(m.getName());if(!p){return}if(p.length<e.model.minNameLength){m.showInlineErrorForName(AJS.format("\u9879\u76ee\u540d\u79f0\u81f3\u5c11\u5e94\u8be5 {0} \u4e2a\u5b57\u3002",e.model.minNameLength));return}if(p.length>e.model.maxNameLength){m.showInlineErrorForName(AJS.format("\u9879\u76ee\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc7 {0} \u4e2a\u5b57\u7b26\u3002",e.model.maxNameLength));return}if(this._doesProjectNameExists(p)){m.showInlineErrorForName("\u5df2\u7ecf\u5b58\u5728\u540c\u540d\u9879\u76ee");return}m.hideInlineErrorForName()},_performKeyValidationChecks:function(p){var q=l.ajax({url:d+"/rest/api/latest/projectvalidate/key?key="+p.toUpperCase()});q.done(o.bind(function(s){if(s.errors&&s.errors.projectKey){m.showInlineErrorForKey(s.errors.projectKey)}else{var r=false;o.each(this.projectKeyValidationCallbacks,function(u){var t=u(p.toUpperCase());if(t.errors&&t.errors.projectKey){r=true;m.showInlineErrorForKey(t.errors.projectKey)}});if(!r){m.hideInlineErrorForKey()}}},this))},validateKey:function g(){var p=m.getKey();if(this.lastKeyValidated===p){return}if(p){this.lastKeyValidated=p;this._performKeyValidationChecks(p)}else{m.hideInlineErrorForKey()}},nameTimeout:function j(){this.autofillKeyIfNeeded()},keyTimeout:function f(){m.setKeyEdited()},_getExistingProjects:function(){if(this.projectNamesUpperCased.length>0){return this.projectNamesUpperCased}var p=l.ajax({url:d+"/rest/api/latest/project"});p.done(o.bind(function(q){this.projectNamesUpperCased=o.map(q,function(r){return r.name.toUpperCase()})},this))}})});define("jira/project-templates/add-project-controller",["jira/project-templates/add-project-controller-impl","jquery"],function(a,b){return new a({el:b(document)})});AJS.namespace("JPT.AddProjectController",null,require("jira/project-templates/add-project-controller"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/TemplateInfoView.js' */
define("jira/project-templates/template-info-view",["jira/project-templates/dialog-controller","require","backbone","jquery","underscore"],function(e,c,f,d,b){var a=AJS.trigger;return f.View.extend({initialize:function(g){b.bindAll(this,"draw","onNext")},draw:function(i,h){var j=e.addPage({name:"template-info",title:h,panelName:"template-info",backButton:true,submitButtonText:"\u9009\u62e9",submitButtonCallback:this.onNext,submitButtonClass:"template-info-dialog-create-button"});var g=this._nameToObj(i)();e.dialog.getPanel(j.id,0).html(g);e.dialog.gotoPage(j.id)},_nameToObj:function(g){return b.reduce(g.split("."),function(i,h){if(i){return i[h]}},window)},onNext:function(h){a("analyticsEvent",{name:"jira.project.templates.dialog.create.templateinfo.next"});var g=c("jira/project-templates/template-info-controller");g.next();return false}})});AJS.namespace("JPT.TemplateInfoView",null,require("jira/project-templates/template-info-view"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/TemplateInfoController.js' */
define("jira/project-templates/template-info-controller",["jira/project-templates/template-info-view","jira/lib/class","require","underscore"],function(e,a,c,b){var d=a.extend({init:function(f){b.bindAll(this,"initTemplateInfo","next")},initTemplateInfo:function(g){this.projectTemplateData=g;var f=new e();f.draw(g.infoSoyPath,g.name)},next:function(){var f=c("jira/project-templates/select-project-template-controller");f.openAddProjectPage(this.projectTemplateData)}});return new d()});AJS.namespace("JPT.TemplateInfoControllerImpl",null,require("jira/project-templates/template-info-controller"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/SelectProjectTemplateView.js' */
define("jira/project-templates/select-project-template-view",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/featureflags/feature-manager","require","backbone","jquery","underscore"],function(g,a,b,e,h,f,d){var c=AJS.contextPath();return{ROW_LENGTH:2,DIALOG_BODY_CLASS:"select-project-templates-page",DIALOG_WIDTH:800,draw:function(m,k){var i=e("jira/project-templates/select-project-template-controller");this.page=g.addPage({name:this.DIALOG_BODY_CLASS,title:m.demoProjects?"\u4f7f\u7528\u793a\u4f8b\u6570\u636e\u521b\u5efa\u65b0\u9879\u76ee":"\u9009\u62e9\u9879\u76ee\u7c7b\u578b",panelName:"ProjectTemplatesListPanel",backButton:false,submitButtonText:"\u4e0b\u4e00\u6b65",submitButtonCallback:i.dialogSubmitted,submitButtonClass:"create-project-dialog-create-button"});function o(){if(i.isProjectTypesEnabled(m)){return JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType({projectTemplatesByType:m.projectTemplatesGroupedByType})}return JIRA.Templates.ProjectTemplates.renderProjectTemplates({projectTemplates:m.projectTemplates})}g.dialog.getPanel(this.page.id,0).html(o());var l=g.$dialogElement;if(a.model.projectCount>=2&&!m.demoProjects){f(JIRA.Templates.ProjectTemplates.addWorkflowsLink({baseUrl:c})).appendTo(l.find(".dialog-header"))}var n=l.find(".create-project-dialog-create-button");var j=this;this.getTemplateItems().click(function(){j.selectTemplate(l,f(this))}).dblclick(function(){n.click()});if(!m.demoProjects){f(JIRA.Templates.ProjectTemplates.footerLinks({showDemoLink:b.isFeatureEnabled("jira.onboarding.cyoa")})).prependTo(l.find(".dialog-button-panel"))}if(i.isProjectTypesEnabled(m)){if((m.projectTemplatesGroupedByType).length==0){n.attr("disabled","disabled")}}else{if((m.projectTemplates).length==0){n.attr("disabled","disabled")}}this.selectFirstTemplate(k);g.dialog.updateHeight();this.truncateTemplateDescriptions()},selectTemplate:function(j,i){$templates=j.find(".template-group .template");$templates.removeClass("selected").find("input[type='radio']").removeAttr("checked");i.addClass("selected").find("input[type='radio']").attr("checked","true")},get$TemplatesContainer:function(){return g.$dialogElement.find(".templates")},selectFirstTemplate:function(i){if(i){this.getFirstTemplateItemOfProjectType(i).click()}else{this.getFirstTemplateItem().click()}},getSelectedTemplateData:function(){var i=g.$dialogElement.find(".template.selected");return i.data()},scrollToSelectedElement:function(k){var n=f(".dialog-panel-body.pt-content");var i=n.offset().top;var j=k.offset().top;var m=j+k.height();var l=i+n.height();if(j<i){n.scrollTop(n.scrollTop()-(i-j))}else{if(m>(i+n.height())){n.scrollTop(n.scrollTop()+m-l)}}},get$NextButton:function(){return g.$dialogElement.find(".create-project-dialog-create-button")},disableNextButton:function(){this.get$NextButton().attr("disabled","disabled")},truncateTemplateDescriptions:function(){var i=AJS.Meta.get("user-locale");var j="word";if(i==="ja_JP"){j="letter"}g.$dialogElement.find(".template-description").each(function(){f(this).dotdotdot({wrap:j,lastCharacter:{remove:[" ",",",";",".","!","?",""],noEllipsis:[]}})})},getFirstTemplateItem:function(){return this.getTemplateItems().first()},getFirstTemplateItemOfProjectType:function(i){return this.getTemplateItems().filter("#project-template-group-"+i+" *").first()},getTemplateItems:function(){return g.$dialogElement.find(".template")}}});AJS.namespace("JPT.SelectProjectTemplateView",null,require("jira/project-templates/select-project-template-view"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/SelectProjectTemplateController.js' */
define("jira/project-templates/select-project-template-controller",["jira/project-templates/select-project-template-view","jira/project-templates/template-info-controller","jira/project-templates/add-project-controller","jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/project-templates/config","wrm/context-path","jquery","underscore"],function(f,h,k,l,o,g,n,m,p){var e=n();var d={init:function q(s,r){f.draw(s,r)},isProjectTypesEnabled:function c(r){return r.projectTemplatesGroupedByType!=null},loadProjectTemplatesData:function j(){return m.ajax({url:e+"/rest/project-templates/1.0/templates",type:"GET"})},loadDemoProjectTemplatesData:function j(){return m.ajax({url:e+"/rest/project-templates/1.0/templates/demo-projects",type:"GET"}).done(function(r){r.demoProjects=true;return r})},dialogSubmitted:function b(){var r=f.getSelectedTemplateData();l.hideDialogFromNewUser("templateselected");d.raiseAtlassianEvent(r.itemModuleCompleteKey);if(!p.isUndefined(r.infoSoyPath)){h.initTemplateInfo(r)}else{d.openAddProjectPage(r)}},openAddProjectPage:function i(r){if(!r){o.showErrorMessage("\u8bd5\u56fe\u8fde\u63a5JIRA\u7684\u65f6\u5019\u53d1\u751f\u4e86\u4e00\u4e2a\u9519\u8bef\u3002");return}if(r.createProject){k.initProjectTemplate(r)}else{l.dialog.addPage("blank-template-page");m("body").trigger(r.itemModuleCompleteKey,l.dialog)}},raiseAtlassianEvent:function a(r){g.model.selectedTemplate=r;if(AJS.EventQueue){AJS.EventQueue.push({name:"projecttemplates.templateselected",properties:{selectedTemplate:r}})}}};return d});AJS.namespace("JPT.SelectProjectTemplateController",null,require("jira/project-templates/select-project-template-controller"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/CreateSharedView.js' */
define("jira/project-templates/create-shared-view",["jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","require","backbone","jquery"],function(d,h,g,i,c,j,e){var f=AJS.InlineDialog;var b=AJS.trigger;var a=j.View.extend({events:{"submit #create-shared-project-form":"onSubmitForm"},page:undefined,prepareDialog:function(l){var k=c("jira/project-templates/create-shared-controller");this.page=d.addPage({name:"create-shared-project",title:l,panelName:"create-shared-project",backButton:true,submitButtonText:"\u4e0b\u4e00\u6b65",submitButtonCallback:k.dialogSubmitted,submitButtonClass:"create-shared-dialog-button"})},draw:function(l){d.dialog.gotoPage(this.page.id);var k=JIRA.Templates.ProjectTemplates.createSharedProjectForm({projectSuggestions:JSON.stringify(l.projectSuggestions)});d.dialog.getPanel(this.page.id,0).html(k);this._createProjectPicker();var m=d.$dialogElement.find("#shared-help-icon");if(m.length){new f(m,"shared-project-help-popup",function(p,o,n){p.html(JIRA.Templates.ProjectTemplates.sharedHelp());n()},{width:330,offsetX:-30})}d.$dialogElement.find(".dialog-button-panel button").removeAttr("disabled")},showProjectMissingError:function(){this._clearFormErrors();this._getProjectPickerInput().after(aui.form.fieldError({extraClasses:"project-picker-missing-error",message:"\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u73b0\u6709\u7684\u9879\u76ee"}))},drawEmptyInfo:function(){var k=JIRA.Templates.ProjectTemplates.noProjects();d.dialog.getPanel(this.page.id,0).html(k);d.$dialogElement.find(".dialog-button-panel button").hide()},drawError:function(k){d.dialog.getPanel(this.page.id,0).html(JIRA.Templates.errorMsg({closable:false,msg:k}))},drawLoading:function(){d.dialog.gotoPage(this.page.id);var k=JIRA.Templates.ProjectTemplates.loading();d.dialog.getPanel(this.page.id,0).html(k);d.$dialogElement.find(".dialog-spinner").spin();d.$dialogElement.find(".dialog-button-panel button").attr("disabled","disabled")},_clearFormErrors:function(){d.$dialogElement.find(".project-picker-missing-error").remove()},_getProjectPickerInput:function(){return d.$dialogElement.find("#project-picker")},onSubmitForm:function(l){this._clearFormErrors();var k=c("jira/project-templates/create-shared-controller");k.dialogSubmitted();return false},_getExtraInfoMessage:function(){return d.$dialogElement.find(".create-shared-info")},_createProjectPicker:function(){this._getExtraInfoMessage().hide();this.projectSelect=new g({element:this._getProjectPickerInput(),revertOnInvalid:true,pageSize:50,pagingThreshold:100,model:i});this.projectSelect.$field.focus();var k=this;this._getProjectPickerInput().on("selected",function(m,l){if(l.value()){b("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.selected"});k._getExtraInfoMessage().show()}})},getSelectedProject:function(){return this.projectSelect.getSelectedDescriptor()&&this.projectSelect.getSelectedDescriptor().value()}});return new a({el:e(document),dialogView:h})});AJS.namespace("JPT.CreateSharedView",null,require("jira/project-templates/create-shared-view"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/CreateSharedController.js' */
define("jira/project-templates/create-shared-controller-impl",["jira/project-templates/add-project-controller","jira/project-templates/create-shared-view","jira/lib/class","jquery","underscore"],function(e,f,a,d,c){var b=AJS.contextPath();return a.extend({init:function(g){this._window=g.window||window;c.bindAll(this,"dialogSubmitted")},initCreateShared:function(){f.prepareDialog("\u521b\u5efa\u4e0e\u5171\u4eab\u914d\u7f6e");var g=this;this._getProjectSuggestions().done(function(h){if(g._hasSuggestions(h)){f.draw({projectSuggestions:h})}else{f.drawEmptyInfo()}}).fail(function(){f.drawError("\u8bd5\u56fe\u8fde\u63a5JIRA\u7684\u65f6\u5019\u53d1\u751f\u4e86\u4e00\u4e2a\u9519\u8bef\u3002")});f.drawLoading()},_hasSuggestions:function(h){var g=false;d.each(h,function(j,k){if(k&&k.items&&k.items.length>0){g=true}});return g},_getProjectSuggestions:function(){return d.ajax({url:b+"/rest/project-templates/1.0/createshared"})},dialogSubmitted:function(){var g=f.getSelectedProject();if(g){e.initCreateShared({existingProjectId:g})}else{f.showProjectMissingError()}}})});define("jira/project-templates/create-shared-controller",["jira/project-templates/create-shared-controller-impl","jquery"],function(a,b){return new a({el:b(document)})});AJS.namespace("JPT.CreateSharedController",null,require("jira/project-templates/create-shared-controller"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = '/js/RemoteProjectsCreatedMessage.js' */
var $=require("jquery");$(function(){var i=AJS.format;var e=require("jira/project-templates/add-project-controller");var b=localStorage.getItem(e.localStoragePrefix+"confluenceProject");var j=localStorage.getItem(e.localStoragePrefix+"fisheyeProject");var g=localStorage.getItem(e.localStoragePrefix+"crucibleProject");var d=localStorage.getItem(e.localStoragePrefix+"bambooProject");localStorage.removeItem(e.localStoragePrefix+"confluenceProject");localStorage.removeItem(e.localStoragePrefix+"fisheyeProject");localStorage.removeItem(e.localStoragePrefix+"crucibleProject");localStorage.removeItem(e.localStoragePrefix+"bambooProject");var k;function c(m,l){return JIRA.Templates.ProjectTemplates.formatAnchor({href:m,body:l,title:l})}function a(n,o,m,p){var l=[];l.push("JIRA \u9879\u76ee");if(n){l.push(c(n,"Confluence \u7a7a\u95f4"))}if(o){l.push(c(o,"FishEye\u5e93"))}if(m){l.push(c(m,"Crucible\u9879\u76ee"))}if(p){l.push(c(p,"Bamboo\u9879\u76ee"))}return l}function h(m,o,l,r){var q="\u4ee5\u4e0b\u5217\u793a\u4e86\u521b\u5efa\u7684\u5185\u5bb9: {0} \u4e0e {1}\u3002";var n=a(m,o,l,r);var p=n.pop();return(n.length>0)?i(q,n.join(", "),p):null}function f(l){var m=$(l).offset();if(m){window.scrollTo(m.left,m.top)}}if(b||j||g||d){k=h(b,j,g,d);if(k){JIRA.Messages.showSuccessMsg(k,{closeable:true})}f("#project-config-webpanel-summary-settings")}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira-core-project-templates:jira-core-project-templates-resources', location = '/soy/CoreProjectTemplates.soy' */
// This file was automatically generated from CoreProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectTemplates.CoreTemplates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectTemplates == 'undefined') { JIRA.Templates.ProjectTemplates = {}; }
if (typeof JIRA.Templates.ProjectTemplates.CoreTemplates == 'undefined') { JIRA.Templates.ProjectTemplates.CoreTemplates = {}; }


JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: '\u521b\u5efa\u7b80\u5355\u7684\u4efb\u52a1, \u7ec4\u7ec7\u4ed6\u4eec, \u8ba9\u4ed6\u4eec\u53bb\u505a\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u9879\u76ee\u6765\u7ba1\u7406\u60a8\u7684\u4efb\u52a1\u6216\u5c06\u5b83\u4eec\u5206\u914d\u7ed9\u5176\u4ed6\u4eba\u3002', projectTemplate: 'taskManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: '\u521b\u5efa\u60a8\u7684\u4efb\u52a1\u3001\u7ec4\u7ec7\u548c\u8ddf\u8e2a\u4ed6\u4eec\u7684\u8fdb\u5c55\u3001\u63d0\u4f9b\u60a8\u7684\u5de5\u4f5c\u65f6\u95f4\u3002\u4f30\u8ba1\u548c\u65f6\u95f4\u8ddf\u8e2a\u8ba9\u60a8\u62a5\u544a\u5728\u54ea\u91cc\u60a8\u7684\u9879\u76ee\u6240\u5904\u7684\u9636\u6bb5\u3002', projectTemplate: 'projectManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: '\u521b\u5efa\u60a8\u7684\u4efb\u52a1\u548c\u8ddf\u8e2a\u4ed6\u4eec\u7684\u6bcf\u4e2a\u6b65\u9aa4, \u4ece\u5f00\u59cb\u5230\u7ed3\u675f\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u9879\u76ee, \u5ba1\u67e5\u6587\u6863\u3001\u5ba1\u6279\u8d39\u7528\u3001\u6216\u5176\u4ed6\u8fdb\u7a0b\u3002', projectTemplate: 'processManagement'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description: '\u8de8\u56e2\u961f\u677f\u9762\u53ef\u89c6\u5316\u5de5\u4f5c\u3002', projectTemplate: 'projectManagement', issueTypesHtml: '' + JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null)});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.boardBetaInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('\u95ee\u9898\u7c7b\u578b') + '</h6><ul class="project-template-issuetype-list">' + ((opt_data.issueTypesHtml != null) ? soy.$$filterNoAutoescape(opt_data.issueTypesHtml) : JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null) + JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType(null)) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('\u5de5\u4f5c\u6d41') + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.projectTemplate) + '"></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.issueType = function(opt_data, opt_ignored) {
  return '<li><span class="issuetype-list-label"><span class="issuetype-icon ' + soy.$$escapeHtml(opt_data.iconKey) + '"></span><span class="issuetype-name">' + soy.$$escapeHtml(opt_data.label) + '</span></span></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.issueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.issueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'task', label: '\u4efb\u52a1'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType';
}


JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey: 'subtask', label: '\u5b50\u4efb\u52a1'});
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType.soyTemplateName = 'JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-analytics-tracker', location = 'includes/js/jira-agile/rapid/analytics-tracker.js' */
"use strict";define("jira-agile/rapid/analytics-tracker",["jira/util/logger","underscore","jquery"],function(t,a,n){function e(e,i,t){if(a.isUndefined(e))throw new Error("You must specify a category");this.params={};this.params.category=e;e=0;if(!a.isUndefined(i)){this.params.action=i;e++;if(!a.isUndefined(t)){this.params.label=t;e++}}this.requiredArgumentNames=["action","label","value"].slice(e);this.useAsync=!0}e.prototype.setAsync=function(e){this.useAsync=e;return this};e.prototype.trigger=function(){this.requiredArgumentNames.length<arguments.length&&t.log("Warning: too many arguments passed in. Needed at most "+this.requiredArgumentNames.length+" but got "+arguments.length);for(var e=a.clone(this.params),i=0;i<arguments.length&&!a.isUndefined(this.requiredArgumentNames[i]);i++)e[this.requiredArgumentNames[i]]=arguments[i];this._validateParams(e);n(document).trigger("gh.analytics.async",e)};e.prototype._validateParams=function(i){a.each(["category","action","label"],function(e){a.isUndefined(i[e])||a.isString(i[e])?a.isUndefined(i[e])&&(i[e]=""):i[e]=i[e].toString()});a.each(["category","action"],function(e){i[e]=i[e].replace(/\s+/g,"")});if(!a.isUndefined(i.value)){i.value=parseInt(i.value,10);isNaN(i.value)&&(i.value=void 0)}};return e});AJS.namespace("GH.AnalyticsTracker",null,require("jira-agile/rapid/analytics-tracker"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/jira-agile/rapid/ui/help/HelpAnalytics.js' */
"use strict";require(["jira-agile/rapid/analytics-tracker","jira/util/init-on-dcl","jquery"],function(t,e,i){e(function(){function n(e){return new t(e).setAsync(!1)}i("#gh_view_help").click(function(e){n("gh.gethelp").trigger("usermenu","docs");return r(i(this))});i("#greenhopper-my-jira-home-enablement").click(function(e){n("gh.myjirahome").trigger("usermenu","enabled");return r(i(this))});i("#greenhopper-my-jira-home-enablement-ondemand").click(function(e){n("gh.myjirahome").trigger("usermenu","set");return r(i(this))});i("#greenhopper-my-jira-home-disablement-ondemand").click(function(e){n("gh.myjirahome").trigger("usermenu","disable");return r(i(this))});i("#greenhopper-my-jira-home-set").click(function(e){n("gh.myjirahome").trigger("usermenu","set");return r(i(this))});i("#beta_gh\\.configuration\\.rapid\\.removal").click(function(e){var r=i(this).attr("checked")?"on":"off";n("gh.labs.feature").trigger("rapid_removal",r);return!0});i(document).on("click","#js-classic-link_lnk",function(){n("gh.agile.menu").trigger("classic");return!0});var r=function(e){if("_blank"===e.attr("target"))return!0;setTimeout('document.location = "'+e.attr("href")+'"',100);return!1}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'includes/js/jira-agile/rapid/analytics.js' */
"use strict";define("jira-agile/rapid/analytics",["jquery","underscore"],function(n,i){GH.AnalyticsEnabled=!0;n(document).on("gh.analytics.async",function(n,a){!function(n){var a={},e=n.category;i.isUndefined(n.action)||(e=e+"."+n.action);i.isUndefined(n.label)||(a.label=n.label);i.isUndefined(n.value)||(a.value=n.value);AJS.trigger("analytics",{name:e,data:a})}(a)});var a={isEnabled:function(){return GH.AnalyticsEnabled},setEnabled:function(n){return GH.AnalyticsEnabled=n}};return a});AJS.namespace("GH.Analytics",null,require("jira-agile/rapid/analytics"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-notification', location = 'includes/js/jira-agile/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format('\u6b64\u7248\u672c\u7684{0}\u4e0d\u662f\u7cfb\u7edf\u652f\u6301\u7684\u6d4f\u89c8\u5668\u3002',opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml('\u67e5\u770b\u6587\u6863\u4e86\u89e3\u652f\u6301\u7684\u6d4f\u89c8\u5668\u3002') + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' aui-message-' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml('\u6b64\u677f\u5df2\u7ecf\u66f4\u65b0') + ': <a href="" class="js-refresh-now" data-track-click="gh.rapidboard.updated.message.refresh.click">' + soy.$$escapeHtml('\u5237\u65b0') + '</a><span class="ghx-divider" role="presentation">&bull;</span><a href="" class="js-ignore-refresh" data-track-click="gh.rapidboard.updated.message.cancel.click">' + soy.$$escapeHtml('\u5ffd\u7565') + '</a></p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-notification', location = 'includes/js/jira-agile/rapid/ui/notification/Notification.js' */
"use strict";define("jira-agile/rapid/ui/notification/Notification",["require"],function(e){var t=e("jquery"),r=e("underscore"),i=e("aui/flag"),a=e("jira/util/logger"),s=e("jira/analytics"),o={showErrors:function(e){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],s=2<arguments.length?arguments[2]:void 0,t="\u9519\u8bef",e=GH.tpl.rapid.notification.renderErrorMessages(e);o.showError(t,e,a,s)},showError:function(e,a){n(a,e,r.extend({},{autoHide:!1,closeable:!(2<arguments.length&&void 0!==arguments[2])||arguments[2],showTitle:!0,type:"error"},3<arguments.length?arguments[3]:void 0))},showWarnings:function(e,a){n((a=r.extend({},{preRendered:!1,autoHide:!0,closeable:!0,showTitle:!1,type:"warning"},a)).preRendered?e:GH.tpl.rapid.notification.renderErrorMessages({errors:e}),"\u8b66\u544a",a)},showWarning:function(e){o.showWarnings(e,{preRendered:!0})},showSuccess:function(e,a){n(e,null,a=r.extend({},{closeable:!0,autoHide:!0,showTitle:!1,type:"success"},a))},clear:function(){t("#aui-flag-container").empty()},handleDateFormatMismatchError:function(e){var a='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';a+="\u9ad8\u7ea7\u8bbe\u7f6e";a+="</a>";a=AJS.format("\u60a8\u7684 Jira \u65e5\u671f\u683c\u5f0f\u8bbe\u7f6e\u4e0d\u6b63\u786e\u3002\u8bf7\u68c0\u67e5 {0} \u5e76\u786e\u4fdd \'\'jira.date.time.picker.java.format\'\' \u53ca \'\'jira.date.time.picker.javascript.format\'\' \u5b58\u5728\u5339\u914d\u8f93\u51fa\u3002",a);o.showWarnings(a,{autoHide:!1,preRendered:!0})},auiMessage:function(){a.warn("[deprecated] GH.Notification.auiMessage has no effect")},showIssueMessage:function(e){var a,s,t=JIRA.SessionStorage;if(e=e||t.getItem("selectedIssueId")){s=t.getItem("selectedIssueKey");a=t.getItem("selectedIssueMsg");o.showIssueMessageImpl(e,a,s)}t.removeItem("selectedIssueId");t.removeItem("selectedIssueKey");t.removeItem("selectedIssueMsg")},showIssueMessageImpl:function(e,a,s){a=a||"thanks_issue_updated";a=AJS.params[a];if(a&&s){a=AJS.format(a,s);o.showSuccess(a)}},addPageLoadMessage:function(e,a){var s=GH.storage.get("gh.pageloadmessages",!0)||[];s.push({message:e,type:a||"success"});GH.storage.put("gh.pageloadmessages",s,!0)},_displayPageLoadMessages:function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var a=e[0].type,s="";r.each(e,function(e){0<s.length&&(s+="<br>");s+=e.message});switch(a){case"warning":o.showWarning(s);break;case"success":default:o.showSuccess(s)}GH.storage.put("gh.pageloadmessages",null,!0)}},showBoardUpdatedMessage:function(){o.triggerShowMessageAnalytics();o.clearBoardUpdatedMessage();var a=t.Deferred(),s=t(GH.tpl.rapid.notification.renderGHtvMessage()).appendTo("#gh");s.data("deferred",a);s.find(".js-refresh-now").click(function(e){e.preventDefault();s.removeData("deferred");o.clearBoardUpdatedMessage();a.resolve()});s.find(".js-ignore-refresh").click(function(e){e.preventDefault();o.clearBoardUpdatedMessage()});return a.promise()},clearBoardUpdatedMessage:function(){var e=t("#ghx-update-message");if(e.length){var a=e.data("deferred");a&&a.reject&&a.reject();e.remove()}},isBoardUpdatedMessageVisible:function(){return 0<t("#ghx-update-message").length},triggerShowMessageAnalytics:function(){s.send({name:"gh.rapidboard.updated.message.show",properties:{initial:!o.isBoardUpdatedMessageVisible()}})}};function n(e,a,s){return function(e){var a=t(e).find(".title");""===t.trim(a.text())&&a.remove();return e}(i({body:e,title:s.showTitle?a:void 0,close:s.autoHide?"auto":s.closeable?"manual":"never",type:s.type}))}return o});AJS.namespace("GH.Notification",null,require("jira-agile/rapid/ui/notification/Notification"));AJS.$(document).ready(function(){GH.Notification.showIssueMessage();GH.storage&&GH.Notification._displayPageLoadMessages()});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-namespace', location = 'includes/js/jira-agile/gh-namespace.js' */
"use strict";AJS.namespace("GH.namespace",null,AJS.namespace);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/jira-agile/field/EpicPicker.js' */
"use strict";define("jira-agile/field/EpicPicker",["jira/ajs/layer/inline-layer","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/ajs/select/single-select","jira/util/formatter","jira/util/strings","jquery","underscore","wrm/context-path"],function(s,p,h,e,u,g,o,d,f){e=e.extend({init:function(e){var r,n=e.element,c=this;o.extend(e,{submitInputVal:!0,showDropdownButton:!0,removeDuplicates:!0,ajaxOptions:{url:f()+"/rest/greenhopper/1.0/epics",data:function(e){var t=!l();return{searchQuery:e,projectKey:o(n).attr("data-project-key"),maxResults:100,hideDone:t}},formatResponse:function(i){if(!i||!i.epicLists||0===i.total)return[];for(var a=[],s=c.getQueryVal(),o=0,e=function(e){var t=i.epicLists[e],r=t.epicNames,n=(e=e+1,t=t.listDescriptor,new p({weight:e,label:t,replace:!0}));if(0<r.length){d.each(r,function(e){n.addItem((r=s,i=(t=e).key,e=t.name,t=t.isDone,r=function(e,t,r,i){e=g.escapeHtml(String(e));t=g.escapeHtml(String(t));var n=(i=g.escapeHtml(String(i))).toUpperCase(),a=e.toUpperCase(),s=t.toUpperCase();n=(n+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1");var o,n=new RegExp("("+n+")","gi"),a=a.search(n);if(-1<a){o=e.slice(a,a+i.length);e=e.replace(o,"<em>"+o+"</em>")}if(-1<(a=s.search(n))){o=t.slice(a,a+i.length);t=t.replace(o,"<em>"+o+"</em>")}r=r?" &#8226; "+"\u5b8c\u6210":"";return e+" - <span class='epic-menu-metadata'>("+t+r+")</span>"}(e,i,t,r),new h({value:"key:"+i,fieldText:e,label:r,html:r,allowDuplicate:!1,highlighted:!0})));var t,r,i});a.push(n)}o+=r.length},t=0;t<i.epicLists.length;t++)e(t);if(0<o){var r=new p({weight:0,showLabel:!1,items:[new h({label:s,highlighted:!0,styleClass:"ghx-epic-menu-header",customItem:!0,html:"<li><h5>"+u.format("\u663e\u793a{1}\u4e2d\u7684{0}\u4e2a\u5339\u914d\u53f2\u8bd7",o,i.total)+"</h5><label for='chkShowDoneEpic'><input type='checkbox' id='chkShowDoneEpic'"+(l()?" checked":"")+">"+"\u663e\u793a\u5df2\u5b8c\u6210\u7684\u53f2\u8bd7"+"</label></li>"})]});a.unshift(r)}return a},error:function(e,t,r){var i=o(n);i.siblings(".ghx-error").remove();i.before(GH.tpl.rapid.notification.renderAuiMessage({message:"\u9519\u8bef"+": "+r,type:"error",className:"ghx-error aui-ss"}))}}});var i=this.setSelection;this.setSelection=function(e,t){e.properties.customItem||i.apply(this,arguments)};!function(){c._super(e);r=c.handleFreeInput;c.handleFreeInput=t;c.dropdownController.bind(s.EVENTS.show,function(e,t){t.off("click",'.ghx-epic-menu-header label[for="chkShowDoneEpic"]',a);t.on("click",'.ghx-epic-menu-header label[for="chkShowDoneEpic"]',a)})}();function t(e){var t;r.apply(c,[e]);e=e||o.trim(c.$field.val());if(!c.model.getDescriptor(e)&&c.$container.hasClass("aui-ss-editing"))if((t=function(e){var t="",r=!1;if(e&&0<e.length){t=u.format("\u5173\u952e\u5b57\u4e3a\u201c{0}\u201d\u7684Epic\u4e0d\u5b58\u5728\u3002",e);r=!0}return{isError:r,message:t}}(e)).isError){c.options.errorMessage=t.message;c.showErrorMessage(e)}else c.hideErrorMessage()}function l(){return"true"===localStorage.getItem("gh.epicpicker.showdone")}function a(e){e.preventDefault();e=!l();try{localStorage.setItem("gh.epicpicker.showdone",e)}catch(e){}c.$field.click();return!1}}});e.READY_EVENT="gh.epic-picker.ready";return e});AJS.namespace("JIRA.EpicPicker",null,require("jira-agile/field/EpicPicker"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/jira-agile/field/SprintPicker.soy' */
// This file was automatically generated from SprintPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.customfields.sprintpicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.customfields == 'undefined') { GH.tpl.customfields = {}; }
if (typeof GH.tpl.customfields.sprintpicker == 'undefined') { GH.tpl.customfields.sprintpicker = {}; }


GH.tpl.customfields.sprintpicker.renderSuggestionMeta = function(opt_data, opt_ignored) {
  return '' + ((opt_data.boardName) ? '<span class=\'ghx-sprint-picker-meta\'> (' + GH.tpl.customfields.sprintpicker.renderMetaWithBoardName(opt_data) + ')</span>' : '<span class=\'ghx-sprint-picker-meta\'> (' + GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName(opt_data) + ')</span>');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderSuggestionMeta.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderSuggestionMeta';
}


GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml('\u5728\u7528 sprint') : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('\u672a\u6765 Sprint') : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName';
}


GH.tpl.customfields.sprintpicker.renderMetaWithBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('\u5728\u7528 Sprint \u5728 {0}',opt_data.boardName)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml(AJS.format('\u672a\u6765 sprint \u5728 {0}',opt_data.boardName)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderMetaWithBoardName.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderMetaWithBoardName';
}


GH.tpl.customfields.sprintpicker.renderShowAllButtonChecked = function(opt_data, opt_ignored) {
  return '<li><h5> ' + soy.$$escapeHtml('\u663e\u793a\u6240\u9009\u9879\u76ee\u7684 sprint') + ' </h5><label for=\'chkShowAllSprints\'><input type=\'checkbox\' id=\'show-all-sprints-toggle\' checked>' + soy.$$escapeHtml('\u663e\u793a\u5168\u90e8') + '</label></li>';
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderShowAllButtonChecked.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderShowAllButtonChecked';
}


GH.tpl.customfields.sprintpicker.renderShowAllButtonUnchecked = function(opt_data, opt_ignored) {
  return '<li><h5> ' + soy.$$escapeHtml('\u663e\u793a\u6240\u9009\u9879\u76ee\u7684 sprint') + ' </h5><label for=\'chkShowAllSprints\'><input type=\'checkbox\' id=\'show-all-sprints-toggle\'>' + soy.$$escapeHtml('\u663e\u793a\u5168\u90e8') + '</label></li>';
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderShowAllButtonUnchecked.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderShowAllButtonUnchecked';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/jira-agile/field/SprintPicker.js' */
"use strict";define("jira-agile/field/SprintPicker",["jira/ajs/select/single-select"],function(e){return e.extend({element:void 0,Storage:void 0,_isShowAll:function(){return"true"===this.Storage.getItem("gh.sprintpicker.showall")},_constructRequestData:function(e){return"true"!==AJS.$(this.element).attr("data-relevant-sprints-enabled")||this._isShowAll()?{query:e}:{project:AJS.$(this.element).attr("data-project-key"),query:e}},_formatResponse:function(e){var t=this;function n(e){var t=AJS.escapeHTML(String(e.name));return new AJS.ItemDescriptor({value:e.id.toString(),label:e.name,html:t,stateKey:e.stateKey,boardName:e.boardName,allowDuplicate:!1})}function i(e){return _.sortBy(e,function(e){return e.name.toLowerCase()})}if(!e.suggestions&&!e.allMatches)return[];var r=new AJS.GroupDescriptor({weight:0,label:"\u5efa\u8bae"}),s=new AJS.GroupDescriptor({weight:1,label:"\u5168\u90e8 Sprint"});_.each(i(e.suggestions),function(e){r.addItem(n(e))});_.each(i(e.allMatches),function(e){s.addItem(n(e))});var o=[];o.push(r);o.push(s);if("true"===AJS.$(this.element).attr("data-relevant-sprints-enabled")){this.getQueryVal();e=new AJS.GroupDescriptor({weight:0,showLabel:!1});e.addItem(new AJS.ItemDescriptor({label:"",highlighted:!0,styleClass:"ghx-epic-menu-header",customItem:!0,html:t._isShowAll()?GH.tpl.customfields.sprintpicker.renderShowAllButtonChecked():GH.tpl.customfields.sprintpicker.renderShowAllButtonUnchecked()}));o.unshift(e)}return o},_handleClickOnShowAllCheckbox:function(e){e.preventDefault();e=!this._isShowAll();try{this.Storage.setItem("gh.sprintpicker.showall",e)}catch(e){console.log("Failed to set item in localStorage ",e)}this.$field.click();return!1},init:function(t){this.element=t.element;this.Storage=localStorage;var n,r,i,s=this._handleClickOnShowAllCheckbox.bind(this),o={ACTIVE:"ACTIVE",FUTURE:"FUTURE",CLOSED:"CLOSED"},a=this.element.data("saved-state"),l=this.element.data("saved-id"),c=this,p=AJS.SelectSuggestHandler.extend({formatSuggestions:function(e,t){e=this._super(e,t);0===t.length&&e[e.length-1].footerText("\u5f00\u59cb\u8f93\u5165Sprint\u4fe1\u606f\u3002");return e}}),e=require("wrm/context-path"),d=this.setSelection;this.setSelection=function(e,t){e.properties.customItem||d.apply(this,arguments)};AJS.$.extend(t,{submitInputVal:!1,showDropdownButton:!0,removeOnUnSelect:!1,maxInlineResultsDisplayed:10,ajaxOptions:{url:e()+"/rest/greenhopper/1.0/sprint/picker",data:this._constructRequestData.bind(this),formatResponse:this._formatResponse.bind(this),error:function(e,t,n){var i=AJS.$(c.element);i.siblings(".ghx-error").remove();i.before(GH.tpl.rapid.notification.renderAuiMessage({message:"\u9519\u8bef"+": "+n,type:"error",className:"ghx-error aui-ss"}))}}});!function(){c._super(t);var e=require("jira/ajs/layer/inline-layer");n=c.listController._renders.suggestion;r=c.showErrorMessage;c.listController._renders.suggestion=g;c.showErrorMessage=u;c.dropdownController.bind(e.EVENTS.show,function(e,t){t.off("click",'.ghx-epic-menu-header label[for="chkShowAllSprints"]',s);t.on("click",'.ghx-epic-menu-header label[for="chkShowAllSprints"]',s)});if(f()){var i=0<c.$container.closest(".inline-edit-fields").size();i&&c.element.parent().find("input").on("focus",function(){c.showErrorMessage()})}c.element.bind("selected",function(e,t,n){f()&&i||n.showErrorMessage(n.getQueryVal());h(t);c.showErrorMessage()});c.suggestionsHandler=new p(c.options,c.model)}();function g(e){var t=n.apply(this,arguments);t.find("a").append(GH.tpl.customfields.sprintpicker.renderSuggestionMeta(e.properties));return t}function u(e){var t=this.getSelectedDescriptor();e||t||h(null);!function(){if(i){i.remove();i=null}}();this.hideErrorMessage();if((e=t?function(e){var t=!1;a===o.ACTIVE?t=!!f()||parseInt(l,10)!==e.properties.value:a!==o.FUTURE&&a||e.properties.stateKey===o.ACTIVE&&(t=!0);return{message:null,needsScopeChangeWarning:t}}(t):function(e){var t=null,n=!1;if(e&&0<e.length)if(a){t=AJS.format("{0} \u4e0d\u662f\u6709\u6548\u7684Sprint\u540d\u79f0\u4e0d\u5b8c\u6574\u7684\u95ee\u9898\u5c06\u4f1a\u79fb\u5230\u5f85\u529e\u4e8b\u9879\u3002",e);a===o.ACTIVE&&(n=!0)}else t=AJS.format("{0} \u4e0d\u662f\u6709\u6548\u7684Sprint\u540d\u79f0",e);else a===o.ACTIVE&&(n=!0);return{message:t,needsScopeChangeWarning:n}}(e)).message){this.options.errorMessage=e.message;r.apply(this,arguments);this.$errorMessage.addClass("inline-edit-error")}e.needsScopeChangeWarning&&function(){if(!i){f()||(i=AJS.$(GH.tpl.rapid.notification.renderAuiMessage({type:"warning",className:"ghx-sprint-picker-scope-warning",icon:!0,title:"\u8fd9\u4e2a\u64cd\u4f5c\u5c06\u4f1a\u5f71\u54cd\u8fdb\u884c\u4e2dSprint\u7684\u8303\u56f4\uff01"})));var e=c.$container.closest(".inline-edit-fields");if(0<e.size())if(f()){(i=AJS.$('<div class="ghx-estimate-scope-warning"></div>')).text("\u8fd9\u4e2a\u64cd\u4f5c\u5c06\u4f1a\u5f71\u54cd\u8fdb\u884c\u4e2dSprint\u7684\u8303\u56f4\uff01");e.find(".field-group").append(i)}else e.closest(".editable-field").append(i);else{f()&&(i=AJS.$(GH.tpl.rapid.notification.renderAuiMessage({type:"warning",className:"ghx-sprint-picker-scope-warning",icon:!0,title:"\u8fd9\u4e2a\u64cd\u4f5c\u5c06\u4f1a\u5f71\u54cd\u8fdb\u884c\u4e2dSprint\u7684\u8303\u56f4\uff01"})));c.$container.closest(".field-group").append(i)}}i.show()}()}function h(e){GH.SprintConfig&&AJS.$(GH).trigger("QuickEdit.fieldChange",{fieldId:GH.SprintConfig.getSprintFieldId(),fieldChangeData:{original:l,updated:e?e.properties.value:null}})}function f(){return!(!GH||!GH.DetailsObjectFactory)}}})});AJS.namespace("JIRA.SprintPicker",null,require("jira-agile/field/SprintPicker"));JIRA.SprintPicker.READY_EVENT="gh.sprint-picker.ready";
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/jira-agile/field/SprintMultiselect.soy' */
// This file was automatically generated from SprintMultiselect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.customfields.sprintmultiselect.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.customfields == 'undefined') { GH.tpl.customfields = {}; }
if (typeof GH.tpl.customfields.sprintmultiselect == 'undefined') { GH.tpl.customfields.sprintmultiselect = {}; }


GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$escapeHtml(opt_data.name) + '</div><div><span class=\'ghx-sprint-multiselect-meta\'> ' + ((opt_data.boardName) ? GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName(opt_data) : GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName(opt_data)) + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta';
}


GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml('\u6d3b\u8dc3') : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('\u672a\u6765') : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml('\u5df2\u5173\u95ed') : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName';
}


GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('\u6d3b\u52a8\u7684 {0}',opt_data.boardName)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml(AJS.format('\u672a\u6765{0}',opt_data.boardName)) : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml(AJS.format('\u5df2\u5173\u95ed{0}',opt_data.boardName)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName';
}


GH.tpl.customfields.sprintmultiselect.renderTooltip = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('\u5f00\u59cb\u4e8e{0}',opt_data.date)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('\u672a\u6765') : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml(AJS.format('\u5173\u95ed\u4e8e{0}',opt_data.date)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderTooltip.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderTooltip';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/jira-agile/field/SprintMultiselect.js' */
"use strict";require(["jira-agile/field/SprintSuggestHandler","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/ajs/select/checkbox-multi-select","jira/moment","jira/util/events","jira/util/events/types","jira/util/formatter","jquery","underscore","wrm/context-path"],function(n,r,a,l,o,e,t,u,c,d,m){e.bind(t.NEW_CONTENT_ADDED,function(e,t){function i(e){return[new r({weight:0,label:"\u5efa\u8bae",items:d.map(e.suggestions,s)}),new r({weight:1,label:"\u5168\u90e8 Sprint",items:d.map(e.allMatches,s)})]}function s(e){e.date=o(e.date,"YYYY-MM-DDTHH:mm:ssZ").format("LL");var t=GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta(e);return new a({value:e.id,label:e.name,html:t,title:GH.tpl.customfields.sprintmultiselect.renderTooltip(e),date:e.date,boardName:e.boardName,stateKey:e.stateKey,highlighted:!0,allowDuplicate:!1})}c(".js-sprint-checkboxmultiselect",t).each(function(){var e=new l({element:this,maxInlineResultsDisplayed:10,content:"ajax",removeOnUnSelect:!0,ajaxOptions:{url:m()+"/rest/greenhopper/1.0/sprint/picker",error:function(){e._setSuggestions([])},data:{excludeCompleted:!1,maxResults:11},formatResponse:i},suggestionsHandler:n,hideSuggestionCount:!0})})})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/jira-agile/field/SprintSuggestHandler.js' */
"use strict";define("jira-agile/field/SprintSuggestHandler",["jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"],function(e){return e.extend({formatSuggestions:function(e,t){var r,i=this.model.getDisplayableSelectedDescriptors();r=i,_.each(r,function(e){var t=JSON.parse(e.properties.meta);t.date=moment(t.date).format("LL");e.properties.title=GH.tpl.customfields.sprintmultiselect.renderTooltip(t);e.properties.html=GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta(t)});function s(e){for(var t in i)if(i[t].properties.value===e.properties.value.toString())return!1;return!0}e=_.map(e,function(e){var t=_.filter(e.properties.items,s);e.properties.items=t;return e});return this._super(e,t)}})});AJS.namespace("GH.SprintSuggestHandler",null,require("jira-agile/field/SprintSuggestHandler"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/jira-agile/field/EpicLinkMultiselect.js' */
"use strict";define("jira-agile/field/EpicLinkMultiselect",["require"],function(e){var n=e("jquery"),c=e("underscore");function r(e){return 0!==e.indexOf("project")?"":(function(e){return(e=e.match(/\bproject\s*=\s*(\S+)/i))?e[1]:null}(e=e)||function(e){return(e=e.match(/\bproject\s+in\s+\((.*?)\)/i))?e[1]:null}(e)).trim()}JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t){var i=n("#jql",this).val();t.find(".js-epiclink-checkboxmultiselect").each(function(){var e=new AJS.CheckboxMultiSelect({element:this,matchingStrategy:"(^|.*?(.*))({0})(.*)",maxInlineResultsDisplayed:5,content:"ajax",removeOnUnSelect:!0,ajaxOptions:{url:AJS.contextPath()+"/rest/greenhopper/1.0/epics",error:function(){e._setSuggestions([])},data:{searchQuery:"",projectKey:r(i),filterEpicsByGivenProjects:!0,maxResults:100},query:!0,minQueryLength:0,formatResponse:function(e){var t=[];t.push(new AJS.GroupDescriptor({weight:1,items:[new AJS.ItemDescriptor({highlighted:!0,label:"\u6ca1\u6709 Epic \u94fe\u63a5",value:"EMPTY",title:"EMPTY"})]}));if(!e||!e.epicLists||0===e.total)return t;for(var i=0;i<e.epicLists.length;i++){var n=e.epicLists[i],r=n.epicNames,s=new AJS.GroupDescriptor({label:n.listDescriptor,weight:i});if(0<r.length){c.each(r,function(e){s.addItem(new AJS.ItemDescriptor({highlighted:!0,label:e.name+" - ("+e.key+")",value:e.key,title:e.key}))});t.push(s)}}return t}},suggestionsHandler:GH.EpicLinkSuggestHandler})})})});require("jira-agile/field/EpicLinkMultiselect");
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/jira-agile/field/EpicLinkSuggestHandler.js' */
"use strict";define("jira-agile/field/EpicLinkSuggestHandler",["jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"],function(e){return e.extend({formatSuggestions:function(e,r){function i(e){for(var r in t)if(t[r].properties.value===e.properties.value.toString())return!1;return!0}var t=this.model.getDisplayableSelectedDescriptors();e=_.map(e,function(e){var r=_.filter(e.properties.items,i);e.properties.items=r;return e});return this._super(e,r)}})});AJS.namespace("GH.EpicLinkSuggestHandler",null,require("jira-agile/field/EpicLinkSuggestHandler"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'includes/js/jira-agile/field/initFieldPickers.js' */
"use strict";!function(){var e=require("jira/util/events"),i=require("jira/util/events/types"),t=require("jira/util/events/reasons"),n=require("jira-agile/field/EpicPicker"),u=require("jira-agile/field/SprintPicker"),c=require("jquery");e.bind(i.NEW_CONTENT_ADDED,function(e,i,r){if(r!==t.panelRefreshed){c(".js-epic-picker",i).each(function(){var e=c(this),e=new n({element:e});c(document).trigger(n.READY_EVENT,e)});c(".js-sprint-picker",i).each(function(){var e=c(this),e=new u({element:e});c(document).trigger(u.READY_EVENT,e)})}})}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:project-template-resources', location = '/projecttemplates/soy/ProjectTemplates.soy' */
// This file was automatically generated from ProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.projecttemplates.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.projecttemplates == 'undefined') { GH.tpl.projecttemplates = {}; }


GH.tpl.projecttemplates.kanbanInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: '\u4f7f\u7528\u6b64\u9879\u76ee\u53ef\u4ee5\u4f18\u5316\u7684\u5de5\u4f5c\u6d41\u7a0b\u5728\u60a8\u7684\u5f00\u53d1\u9879\u76ee\u3002\u5c06\u7ea6\u675f\u6dfb\u52a0\u5230\u5de5\u4f5c\u4e2d--\u8fdb\u5ea6\u3001\u5206\u6790\u9700\u8981\u591a\u957f\u65f6\u95f4\u624d\u80fd\u5b8c\u6210\u7684\u95ee\u9898\u3001\u627e\u5230\u7684\u74f6\u9888\u60a8\u7684\u8fdb\u7a0b, \u548c\u66f4\u591a\u3002\u8fd9\u4e00\u9879\u76ee\u5305\u62ec\u5728\u770b\u677f\u677f\u3001\u57fa\u672c\u7684\u7075\u6d3b\u7684\u5de5\u4f5c\u6d41\u7a0b\u548c\u95ee\u9898\u7c7b\u578b\u7684\u914d\u7f6e, \u60a8\u53ef\u4ee5\u5728\u4ee5\u540e\u66f4\u6539\u3002', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'kanban-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.kanbanInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.kanbanInfoPageJira7';
}


GH.tpl.projecttemplates.scrumInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: '\u4f7f\u7528\u6b64\u9879\u76ee\u53ef\u7ba1\u7406\u60a8\u7684\u654f\u6377\u5f00\u53d1\u7684\u5de5\u4f5c\u3002\u521b\u5efa\u79ef\u538b\u3001\u7b79\u529e\u5de5\u4f5c\u8fdb\u5165\u51b2\u523a\u3001\u68c0\u67e5\u4f7f\u7528\u7684\u8fdb\u5c55\u60c5\u51b5\u7684\u62a5\u544a, \u4ee5\u53ca\u66f4\u591a\u3002\u8fd9\u4e00\u9879\u76ee\u5305\u62ec Scrum \u677f\u3001\u57fa\u672c\u7684\u7075\u6d3b\u5de5\u4f5c\u6d41\u7a0b\u548c\u95ee\u9898\u7c7b\u578b\u7684\u914d\u7f6e, \u60a8\u53ef\u4ee5\u5728\u4ee5\u540e\u66f4\u6539\u3002', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'scrum-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.scrumInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.scrumInfoPageJira7';
}


GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: '\u4f7f\u7528\u6b64\u9879\u76ee\u5de5\u4f5c\u7684\u65b0\u529f\u80fd\u4e3a\u60a8\u7684\u4ea7\u54c1\u4ee5\u53ca\u8ddf\u8e2a\u7684\u4efb\u4f55 bug\u3002\u672c\u9879\u76ee\u4e3a\u60a8\u63d0\u4f9b\u4e86\u57fa\u672c\u7684\u5de5\u4f5c\u6d41\u7a0b\u548c\u95ee\u9898\u7c7b\u578b\u7684\u914d\u7f6e, \u60a8\u53ef\u4ee5\u5728\u4ee5\u540e\u66f4\u6539\u3002', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon improvement"></span><span class="issuetype-name">' + soy.$$escapeHtml('\u6539\u8fdb') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon newfeature"></span><span class="issuetype-name">' + soy.$$escapeHtml('\u65b0\u529f\u80fd') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'basic-development-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7';
}


GH.tpl.projecttemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('\u95ee\u9898\u7c7b\u578b') + '</h6><ul class="project-template-issuetype-list" ><li><span class="issuetype-list-label"><span class="issuetype-icon bug"></span><span class="issuetype-name">' + soy.$$escapeHtml('\u7f3a\u9677') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon task"></span><span class="issuetype-name">' + soy.$$escapeHtml('\u4efb\u52a1') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon subtask"></span><span class="issuetype-name">' + soy.$$escapeHtml('\u5b50\u4efb\u52a1') + '</span></span></li>' + soy.$$filterNoAutoescape(opt_data.extraIssueTypes) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('\u5de5\u4f5c\u6d41') + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.workflowScreenshotClass) + '"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.templateInfoDialog.soyTemplateName = 'GH.tpl.projecttemplates.templateInfoDialog';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalkeyboardshortcuts', location = 'includes/js/jira-agile/gh-globalkeyboardshortcuts.js' */
"use strict";define("jira-agile/gh-globalkeyboardshortcuts",["jira-agile/rapid/ui/notification/Notification","jira/ajs/ajax/smart-ajax","jira/data/session-storage","jira/issuenavigator/issue-navigator/shortcuts","jira/issue","jira/issuenavigator/issue-navigator","jira/dialog/dialog","jquery","jira/util/browser"],function(e,t,a,s,o,i,n,r,u){var c={},d=require("wrm/context-path");c.findSelectedIssueId=function(){var e;return e=!(e=i&&i.getSelectedIssueId?i.getSelectedIssueId():e)&&o&&o.getIssueId?o.getIssueId():e};c.goToAgile=function(){var e="/secure/RapidBoard.jspa",s=d();s&&(e=s+e);window.location.href=e};c.followLink=function(e){e=r(e);if(0<e.length&&("a"===e[0].nodeName.toLowerCase()||"link"===e[0].nodeName.toLowerCase())){e.click();window.location.href=e.attr("href")}};c.sendToTop=function(e,s){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToTop){GH.Shortcut.sendToTop(e);c.closeDialogAndPopMessage()}else if("Action"===e){var o=s||c.findSelectedIssueId(),s=d()||"";t.makeRequest({type:"post",contentType:"application/json",url:s+"/rest/greenhopper/1.0/rank/global/first",data:JSON.stringify({issueId:o}),success:c.handleRankSuccess});r(document).trigger("gh.global.rankissues",{action:"rankToTop"+(e||""),count:1})}};c.sendToBottom=function(e,s){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToBottom){GH.Shortcut.sendToBottom(e);c.closeDialogAndPopMessage()}else if("Action"===e){var o=s||c.findSelectedIssueId(),s=d()||"";t.makeRequest({type:"post",contentType:"application/json",url:s+"/rest/greenhopper/1.0/rank/global/last",data:JSON.stringify({issueId:o}),success:c.handleRankSuccess});r(document).trigger("gh.global.rankissues",{action:"rankToBottom"+(e||""),count:1})}};c.closeDialogAndPopMessage=function(){if(i.isNavigator())u.reloadViaWindowLocation();else{n&&n.current&&n.current.hide();if(window.GH){GH.RapidBoard&&e&&e.showIssueMessage&&e.showIssueMessage();window.Boards&&window.Boards.refreshAll()}else i&&s&&s.flashIssueRow&&s.flashIssueRow()}};c.handleRankSuccess=function(e,s,o){c.storeSuccessMessage(e.issueId,e.issueKey,"thanks_issue_updated");c.closeDialogAndPopMessage()};c.storeSuccessMessage=function(e,s,o){var t=a;try{t.setItem("selectedIssueId",e);t.setItem("selectedIssueKey",s);t.setItem("selectedIssueMsg",o)}catch(e){}};return c});require(["jquery","jira-agile/gh-globalkeyboardshortcuts"],function(s,o){s(document).delegate(".issueaction-greenhopper-rank-top-operation","click",function(e){e.preventDefault();e=s(this).attr("data-issueid");o.sendToTop("Action",e)});s(document).delegate(".issueaction-greenhopper-rank-bottom-operation","click",function(e){e.preventDefault();e=s(this).attr("data-issueid");o.sendToBottom("Action",e)})});AJS.namespace("gh.app.globalkeyboardshortcuts",null,require("jira-agile/gh-globalkeyboardshortcuts"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugin.ext.bamboo:bamboo-soy-resources', location = 'templates/plugins/bamboo/components.soy' */
// This file was automatically generated from components.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.components.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.components == 'undefined') { bamboo.components = {}; }


bamboo.components.pageHeader = function(opt_data, opt_ignored) {
  return '' + aui.page.pageHeader({content: '' + ((opt_data.headerImageContent) ? aui.page.pageHeaderImage({content: opt_data.headerImageContent}) : '') + aui.page.pageHeaderMain({content: opt_data.headerMainContent}) + ((opt_data.headerActionsContent) ? aui.page.pageHeaderActions({content: opt_data.headerActionsContent}) : '')});
};
if (goog.DEBUG) {
  bamboo.components.pageHeader.soyTemplateName = 'bamboo.components.pageHeader';
}


bamboo.components.icon = function(opt_data, opt_ignored) {
  return '<span class="bamboo-icon bamboo-icon-' + soy.$$escapeHtml(opt_data.type) + '"' + ((opt_data.text && opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  bamboo.components.icon.soyTemplateName = 'bamboo.components.icon';
}


bamboo.components.buildDetail = function(opt_data, opt_ignored) {
  return '<dl><dt class="' + soy.$$escapeHtml(opt_data.keyClass) + '">' + soy.$$escapeHtml(opt_data.key) + '</dt><dd>' + soy.$$filterNoAutoescape(opt_data.value) + '</dd></dl>';
};
if (goog.DEBUG) {
  bamboo.components.buildDetail.soyTemplateName = 'bamboo.components.buildDetail';
}


bamboo.components.artifacts = function(opt_data, opt_ignored) {
  var output = '<ul id="shared-artifacts">';
  var artifactList42 = opt_data.artifacts;
  var artifactListLen42 = artifactList42.length;
  for (var artifactIndex42 = 0; artifactIndex42 < artifactListLen42; artifactIndex42++) {
    var artifactData42 = artifactList42[artifactIndex42];
    output += bamboo.components.artifactItem(soy.$$augmentMap(artifactData42, {id: artifactData42.name, url: artifactData42.link.href}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.artifacts.soyTemplateName = 'bamboo.components.artifacts';
}


bamboo.components.artifactItem = function(opt_data, opt_ignored) {
  return '<li>' + bamboo.components.icon({type: 'artifact-shared'}) + ' <a class="artifact-link" id="artifact-' + soy.$$escapeHtml(opt_data.id) + '" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</a><span class="filesize">(' + soy.$$escapeHtml(opt_data.prettySizeDescription) + ')</span></li>';
};
if (goog.DEBUG) {
  bamboo.components.artifactItem.soyTemplateName = 'bamboo.components.artifactItem';
}


bamboo.components.labels = function(opt_data, opt_ignored) {
  var output = '<ul class="labels">';
  var labelList65 = opt_data.labels;
  var labelListLen65 = labelList65.length;
  for (var labelIndex65 = 0; labelIndex65 < labelListLen65; labelIndex65++) {
    var labelData65 = labelList65[labelIndex65];
    output += bamboo.components.labelItem(soy.$$augmentMap(labelData65, {url: opt_data.baseBambooUrl + '/browse/label/' + labelData65.name}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.labels.soyTemplateName = 'bamboo.components.labels';
}


bamboo.components.labelItem = function(opt_data, opt_ignored) {
  return '<li><a class="lozenge" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '"><span>' + soy.$$escapeHtml(opt_data.name) + '</span></a></li>';
};
if (goog.DEBUG) {
  bamboo.components.labelItem.soyTemplateName = 'bamboo.components.labelItem';
}


bamboo.components.errorResponseMessage = function(opt_data, opt_ignored) {
  return '' + bamboo.components.auiWarning({body: '' + ((opt_data.errorMessage.messageBody) ? '<p>' + soy.$$escapeHtml(opt_data.errorMessage.messageBody) + '</p>' : (opt_data.errorMessage.oauthCallback) ? '<p><a href="' + soy.$$filterNoAutoescape(opt_data.errorMessage.oauthCallback) + '&amp;redirectUrl=' + soy.$$filterNoAutoescape(opt_data.oAuthDanceReturnUrl) + '" id="oauthDanceLink">' + soy.$$escapeHtml('\u767b\u5f55\u548c\u5ba1\u6279') + '</a></p>' : '<p>' + soy.$$escapeHtml(opt_data.errorMessage.message) + '</p>')});
};
if (goog.DEBUG) {
  bamboo.components.errorResponseMessage.soyTemplateName = 'bamboo.components.errorResponseMessage';
}


bamboo.components.auiWarning = function(opt_data, opt_ignored) {
  return '<div class="aui-message aui-message-warning warning">' + soy.$$filterNoAutoescape(opt_data.body) + '</div>';
};
if (goog.DEBUG) {
  bamboo.components.auiWarning.soyTemplateName = 'bamboo.components.auiWarning';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_aui.component.expander', location = 'aui.chunk.4bb3fb8824decc4cf2df--64de944b44cf1d53c8f2.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.expander"],{ufFX:function(e,t,r){"use strict";r.r(t);var a=r("+x/D"),n=Object(a.default)(document),i=function(e){var t={};return t.$trigger=Object(a.default)(e.currentTarget),t.$content=n.find("#"+t.$trigger.attr("aria-controls")),t.triggerIsParent=0!==t.$content.parent().filter(t.$trigger).length,t.$shortContent=t.triggerIsParent?t.$trigger.find(".aui-expander-short-content"):null,t.height=t.$content.css("min-height"),t.isCollapsible=!1!==t.$trigger.data("collapsible"),t.replaceText=t.$trigger.attr("data-replace-text"),t.replaceSelector=t.$trigger.data("replace-selector"),t},c=function(e){if(e.replaceText){var t=e.replaceSelector?e.$trigger.find(e.replaceSelector):e.$trigger;e.$trigger.attr("data-replace-text",t.text()),t.text(e.replaceText)}},g={"aui-expander-invoke":function(e){var t=Object(a.default)(e.currentTarget),r=n.find("#"+t.attr("aria-controls")),i=!1!==t.data("collapsible");"true"===r.attr("aria-expanded")&&i?t.trigger("aui-expander-collapse"):t.trigger("aui-expander-expand")},"aui-expander-expand":function(e){var t=i(e);"true"!==t.$content.attr("aria-expanded")&&(t.$content.attr("aria-expanded","true"),t.$trigger.attr("aria-expanded","true"),t.$content.get(0).removeAttribute("hidden"),c(t),t.triggerIsParent&&t.$shortContent.hide(),t.$trigger.trigger("aui-expander-expanded"))},"aui-expander-collapse":function(e){var t=i(e);"true"===t.$content.attr("aria-expanded")&&(c(t),t.$content.attr("aria-expanded","false"),t.$trigger.attr("aria-expanded","false"),t.triggerIsParent&&t.$shortContent.show(),0===t.$content.outerHeight()&&t.$content.get(0).setAttribute("hidden",""),t.$trigger.trigger("aui-expander-collapsed"))},"click.aui-expander":function(e){Object(a.default)(e.currentTarget).trigger("aui-expander-invoke",e.currentTarget)}};n.on(g,".aui-expander-trigger")}},[["ufFX","runtime","aui.splitchunk.71c59684a5","aui.splitchunk.739b9ec8cc"]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.hascode.plugin.jira-quick-subtasks:web-resources', location = 'webresource/js/quickSubtasks-help-min.js' */
function SubtasksHelp(){}SubtasksHelp.prototype.url=AJS.contextPath()+"/rest/subtasks/1.0/extension";SubtasksHelp.prototype.display=function(a){this.toHtml(function(b){a.empty();a.html(b);a.show();AJS.$("#close-hint",a).click(function(){AJS.$("#replace-text-trigger").trigger("click")})},function(b){alert(b)})};SubtasksHelp.prototype.toHtml=function(b,a){this.fetchRemote().then(function(c){b(Hascode.Templates.QuickSubtasks.usageHint({extensions:c}))}).fail(function(c){a(c)})};SubtasksHelp.prototype.fetchRemote=function(){return AJS.$.ajax({type:"GET",cache:false,dataType:"json",contentType:"application/json; charset=utf-8",url:this.url,success:function(b,c,a){AJS.log("extension information received: ",b);return b},error:function(c,a,b){AJS.log("Error: Unable to load help information");return[]}})};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.hascode.plugin.jira-quick-subtasks:web-resources', location = 'webresource/js/quickSubtasks-min.js' */
(function(b){function a(){}a.prototype.projectKeyPattern=new RegExp("issue/([^-]{1,})-[0-9]+.*$");a.prototype.fetchProjectKey=function(c){AJS.log("extracting key from url: "+c);var e=this.projectKeyPattern.exec(c);if(e===null){AJS.warn("unable to extract project key!");return null}else{var d=e[1];AJS.log("project key extracted: "+d);return d}};a.prototype.handleError=function(d,c){d.remove();alert(c)};a.prototype.activateTooltips=function(){AJS.$(".subtasks-tooltip").tooltip({aria:true})};a.prototype.disableSubmitButton=function(){b("#subtasks-overlay .button-panel-submit-button").attr("disabled",true)};a.prototype.enableSubmitButton=function(){b("#subtasks-overlay .button-panel-submit-button").removeAttr("disabled")};a.prototype.hasTemplates=function(c){return this.hasTemplatesFor(c,"globalTemplates")||this.hasTemplatesFor(c,"userTemplates")||this.hasTemplatesFor(c,"projectTemplates")};a.prototype.hasTemplatesFor=function(d,c){if(!d[c]||Object.prototype.toString.call(d[c])!=="[object Array]"){return false}if(d[c].length>0){return true}return false};a.prototype.renderTemplateSelectionOptGroup=function(f,d,c){var e=b('<optgroup label="'+d+'"></optgroup>');if(!f||f.length===0){e.append("<option>-- No template defined --</option>")}else{b(f).each(function(g,h){var i=b("<option>"+h.title+"</option>").data("template",h);e.append(i)})}c.append(e)};a.prototype.renderTemplates=function(e){var c=b(".template-selection");var d=b("#template-selection");if(this.hasTemplates(e)){c.show();d.children().remove();d.append("<option>Please feel free to select a template..</option>");this.renderTemplateSelectionOptGroup(e.userTemplates,"User Templates",d);this.renderTemplateSelectionOptGroup(e.projectTemplates,"Project Templates",d);this.renderTemplateSelectionOptGroup(e.globalTemplates,"Global Templates",d)}else{c.hide()}d.change(function(){var h=b("option:selected",d);if(!h.length){AJS.log("no template selected");i.val("");return}AJS.log("user selected a template");var i=b("#tasks-code");var g=h.data("template");if(g===undefined){AJS.log("no data bound");i.val("");return}var f=g.text;AJS.log("setting subtask template to: "+f);i.val(f)})};a.prototype.filterUrlSuffix=function(c){var d=c.split("?")[0];AJS.log(c+" filtered to "+d);return d};a.prototype.sanitizeUrl=function(c){return c.split("&")[0]};a.prototype.showSubtasksDialog=function(k){var d=this;var j=b(k.target);this.enableSubmitButton();AJS.log("element clicked to open subtask dialog:",j);var i=undefined;if(j[0].hasAttribute("href")){i=j.attr("href")}if(i===undefined&&j.parent()[0].hasAttribute("href")){i=j.parent().attr("href")}if(i===undefined){i=this.filterUrlSuffix(j.closest("a").attr("href"))}if(i===undefined){i=this.filterUrlSuffix(j.closest(".aui-list-item").find(".multi-subtasks-link").attr("href"))}AJS.log("subtask rest baseUrl set to"+i);var c=this.fetchProjectKey(i);var h=new AJS.Dialog({width:700,height:620,id:"subtasks-overlay",closeOnOutsideClick:false});h.addHeader("Quick Sub-Tasks","quick-subtasks-header");h.addPanel("",Hascode.Templates.QuickSubtasks.subtasksForm());h.addSubmit("Create Sub-Tasks",function(){d.disableSubmitButton();var e=b("#issue_type option:selected").val();d.triggerCreateSubtasks(i,e,h)});h.addCancel("Cancel",function(){b("#tasks-code").val("");h.remove()});var g=b("#issue_type");var f=new SubtasksHelp();f.display(b("#usage-examples"));AJS.log("fetching subtask-issue-types");g.children().remove();this.fetchSubtaskIssueTypes(i,h,g);b("#tasks-code").val("");this.fetchTemplates(c);this.activateTooltips();h.show()};a.prototype.triggerCreateSubtasks=function(f,c,e){var d=this;b.ajax({type:"POST",cache:false,dataType:"json",url:d.sanitizeUrl(f),data:{issueType:c,tpl:b("#tasks-code").val(),prefixSubtasks:b("#prefix_subtasks option:selected").val()},success:function(h,i,g){b("#tasks-code").val("");e.remove();if(h.success===false){this.enableSubmitButton();this.handleError(e,h.result)}else{window.location.reload()}},error:function(i,g,h){this.enableSubmitButton();b("#tasks-code").val("");this.handleError(e,h)}})};a.prototype.fetchSubtaskIssueTypes=function(f,e,d){var c=this;b.ajax({type:"GET",cache:false,dataType:"json",contentType:"application/json; charset=utf-8",url:c.sanitizeUrl(f),success:function(j,k,h){if(j.issueTypes!==undefined){for(var g=0;g<j.issueTypes.length;g++){d.append('<option value="'+j.issueTypes[g].id+'">'+j.issueTypes[g].nameTranslated+"</option>")}}},error:function(i,g,h){AJS.log("fetching subtask-issue-types failed: "+h);c.handleError(e,h)}})};a.prototype.fetchTemplates=function(c){var d=this;b.ajax({type:"GET",cache:false,dataType:"json",contentType:"application/json; charset=utf-8",url:AJS.contextPath()+"/rest/subtasks/1.0/repository/project/"+c,success:function(f,g,e){AJS.log("templates received: "+f.globalTemplates.length+" global templates, "+f.userTemplates.length+" user templates, "+f.projectTemplates.length+" project templates.");d.renderTemplates(f)},error:function(g,e,f){alert("An error has occurred, please try again!")}})};b(document).ready(function(){b(".multi-subtasks-link, .aui-list-item aui-list-item-li-create-multiple-sub-tasks, #subtasks-link-link").live("click",function(c){c.preventDefault();var d=new a();d.showSubtasksDialog(c)})})})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.hascode.plugin.jira-quick-subtasks:web-resources', location = 'webresource/js/userTemplate-min.js' */
(function(a){function b(){}b.prototype.baseUrl=AJS.contextPath()+"/rest/subtasks/1.0/repository/template/currentuser/";b.prototype.handleError=function(d,c){d.hide();alert(c)};b.prototype.resetMessageBar=function(){a("#aui-message-bar").children().remove()};b.prototype.createTemplate=function(){var d=a("#create-template");var f=a("#subtask-title",d);var h=f.val();var c=a("#subtask-user-template",d);var e=c.val();if(!h||!e){this.resetMessageBar();AJS.messages.error({title:"Missing input",body:"Please enter a title and a subtask template!",fadeout:true,delay:5000});return}var g={title:h,text:e,id:null};AJS.log("trying to create a new template with title: "+h+" and template: "+e);this.pushCreateToServer(g,f,c)};b.prototype.pushCreateToServer=function(f,e,c){var d=this;a.ajax({type:"POST",cache:false,dataType:"json",url:AJS.contextPath()+"/rest/subtasks/1.0/repository/template/currentuser",data:JSON.stringify(f),contentType:"application/json; charset=utf-8",success:function(h,i,g){d.fetchTemplates();d.resetMessageBar();d.resetValues(e,c);AJS.messages.success({title:"User Template created",body:"User Template successfully created",fadeout:true,delay:5000})},error:function(i,g,h){AJS.log("error",h)}})};b.prototype.resetValues=function(){for(var d=0;d<arguments.length;d++){var c=arguments[d];if(c instanceof jQuery){c.val("")}}};b.prototype.fetchTemplates=function(){var c=this;a.ajax({type:"GET",cache:false,dataType:"json",url:c.baseUrl,success:function(e,f,d){c.updateTemplateView(e)},error:function(f,d,e){AJS.log("error")}})};b.prototype.updateTemplateView=function(c){var d=a("#template-list-container");d.html(Hascode.Templates.QuickSubtasks.userTemplateList({userTemplates:c}))};b.prototype.removeTemplate=function(d){var c=this;a.ajax({type:"DELETE",cache:false,url:c.baseUrl+d,success:function(f,g,e){c.fetchTemplates();c.resetMessageBar();AJS.messages.success({title:"User Template removed",body:"User Template successfully removed",fadeout:true,delay:5000})},error:function(g,e,f){AJS.log("error")}})};b.prototype.showTemplateDialog=function(i){i.preventDefault();var h=i.target.href;var f=new AJS.Dialog({width:700,height:540,id:"user-templates-overlay",closeOnOutsideClick:true});var g=Hascode.Templates.QuickSubtasks.userTemplateEditor({userTemplates:[]});f.addHeader("Quick Subtasks User Templates","quick-subtasks-header");f.addPanel("",g);f.addCancel("Close Dialog",function(){f.remove()});var d=AJS.$("#user-templates-overlay #usage-examples");var c=new SubtasksHelp();c.display(d);f.show()};a(document).ready(function(){a("#subtasks-usertemplate-link").live("click",function(d){var c=new b();c.showTemplateDialog(d);a("#trigger-create").click(function(f){f.preventDefault();c.createTemplate()});c.fetchTemplates();AJS.$(document.body).on("click",".remove-template",function(e){e.preventDefault();var f=a(e.target).attr("rel");AJS.log("removing user template with id: "+f);c.removeTemplate(f)})})})})(jQuery);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.hascode.plugin.jira-quick-subtasks:web-resources', location = 'webresource/js/projectTemplateController-min.js' */
function ProjectTemplateController(){}ProjectTemplateController.prototype.serviceBaseUrl=AJS.contextPath()+"/rest/subtasks/1.0/repository/project/";ProjectTemplateController.prototype.contentType="application/json; charset=utf-8";ProjectTemplateController.prototype.getTemplates=function(a){var b=this;AJS.log("fetching subtask-templates for given project key: "+a);return AJS.$.ajax({type:"GET",cache:false,dataType:"json",url:b.serviceBaseUrl+a,contentType:b.contentType,success:function(d,e,c){AJS.log("project templates successfully received");return d},error:function(e,c,d){AJS.log("error trying to receive project's subtask templates",d);return d}})};ProjectTemplateController.prototype.createTemplate=function(a,c){var b=this;AJS.log("creating new subtask-template for given project key: "+a+", template: "+c);return AJS.$.ajax({type:"POST",cache:false,dataType:"json",url:b.serviceBaseUrl+a,contentType:b.contentType,data:JSON.stringify(c),success:function(e,f,d){AJS.log("new project template successfully created",c);return e},error:function(f,d,e){AJS.log("error trying to save new project subtask template",c,e);return e}})};ProjectTemplateController.prototype.removeTemplate=function(a,c){var b=this;AJS.log("removing subtask-template with id: "+c+" for given project key: "+a);return AJS.$.ajax({type:"DELETE",cache:false,dataType:"json",url:b.serviceBaseUrl+a+"/template/"+c,contentType:b.contentType,success:function(e,f,d){AJS.log("project template successfully removed: "+c);return e},error:function(f,d,e){AJS.log("error trying to remove project's subtask template with id "+c,e);return e}})};ProjectTemplateController.prototype.updateTemplate=function(a,c){var b=this;AJS.log("updating subtask-template for given project key: "+a+", template: "+c);return AJS.$.ajax({type:"PUT",cache:false,dataType:"json",url:b.serviceBaseUrl+a,contentType:b.contentType,data:JSON.stringify(c),success:function(e,f,d){AJS.log("project template successfully updated",c);return e},error:function(f,d,e){AJS.log("error trying to update project's subtask template",c,e);return e}})};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.hascode.plugin.jira-quick-subtasks:web-resources', location = 'webresource/js/projectTemplateForm-min.js' */
function ProjectTemplateForm(a,b){this._projectKey=a;this._$rootElement=b;this._helper=new SubtasksHelp();this._projectTemplateController=new ProjectTemplateController();this._extensionList=[];this._$titleField={};this._$textField={};this._$idField={};this._$actionButton={};this._messageFadeout=true;this._messageFadeoutDelay=2000;this._saveButtonSelector="#add-subtask-template";this._removeLinkSelector=".qtask-remove-template";this._editLinkSelector=".qtask-update-template"}ProjectTemplateForm.prototype.load=function(){var a=this;this._helper.fetchRemote().then(function(b){a._extensionList=b;a.refreshView(function(){a.bindEvents()})}).fail(function(b){a.errorMessage("An error occurred",b.responseText)})};ProjectTemplateForm.prototype.bindEvents=function(){var a=this;AJS.$(document.body).on("click",this._saveButtonSelector,function(b){a.handleCreateOrUpdate(b)});AJS.$(document.body).on("click",this._removeLinkSelector,function(b){a.handleRemove(b)});AJS.$(document.body).on("click",this._editLinkSelector,function(b){a.prepareUpdate(b)})};ProjectTemplateForm.prototype.refreshView=function(b){var a=this;this._projectTemplateController.getTemplates(this._projectKey).then(function(c){var d=Hascode.Templates.QuickSubtasks.projectTemplateEditor({projectKey:a._projectKey,templates:c.projectTemplates,extensions:a._extensionList});a._$rootElement.html(d);a._$titleField=AJS.$("#addTitle");a._$textField=AJS.$("#addTemplate");a._$idField=AJS.$("#addId");a._$actionButton=AJS.$("#add-subtask-template");if(typeof b==="function"){b()}}).fail(function(c){a.errorMessage("Loading Project Templates failed",c.responseText)})};ProjectTemplateForm.prototype.createDto=function(){var a=(this._$idField.val()==="")?null:this._$idField.val();return{title:this._$titleField.val(),text:this._$textField.val(),id:a}};ProjectTemplateForm.prototype.handleCreateOrUpdate=function(a){a.preventDefault();var b=this.createDto();if(b.id){this.handleUpdate(a,b)}else{this.handleCreate(a,b)}};ProjectTemplateForm.prototype.handleCreate=function(a,c){a.preventDefault();var b=this;this._projectTemplateController.createTemplate(this._projectKey,c).then(function(){b.refreshView(function(){b.successMessage("Project Template created","Project Template successfully created")})}).fail(function(d){b.errorMessage("Creating Project Template failed",d.responseText)})};ProjectTemplateForm.prototype.handleUpdate=function(a,c){a.preventDefault();var b=this;this._projectTemplateController.updateTemplate(this._projectKey,c).then(function(){b.refreshView(function(){b.successMessage("Project Template updated","Project Template successfully updated")})}).fail(function(d){b.errorMessage("Updating Project Template failed",d.responseText)})};ProjectTemplateForm.prototype.prepareUpdate=function(b,a){b.preventDefault();var c=AJS.$(b.target);var f=c.attr("rel");var e=c.attr("data-title");var d=c.attr("data-text");this._$titleField.val(e);this._$textField.val(d);this._$idField.val(f);this._$actionButton.val("Update");this._$titleField[0].scrollIntoView()};ProjectTemplateForm.prototype.handleRemove=function(a){a.preventDefault();var b=this;var c=AJS.$(a.target);var e=c.attr("rel");var d=c.attr("data-title");if(confirm("Do you really remove this project-template?\n\nTitle: "+d)){this._projectTemplateController.removeTemplate(this._projectKey,e).then(function(){b.refreshView(function(){b.successMessage("Project Template removed","Project Template successfully removed")})}).fail(function(f){b.errorMessage("Removing Project Template failed",f.responseText)})}};ProjectTemplateForm.prototype.successMessage=function(b,a){AJS.messages.success(this.createMessageBody(b,a))};ProjectTemplateForm.prototype.errorMessage=function(b,a){AJS.messages.error(this.createMessageBody(b,a))};ProjectTemplateForm.prototype.createMessageBody=function(b,a){return{title:b,body:"<p>"+a+"</p>",fadeout:this._messageFadeout,delay:this._messageFadeoutDelay}};
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.hascode.plugin.jira-quick-subtasks:web-resources', location = '/template/soy/quick-subtasks.soy' */
// This file was automatically generated from quick-subtasks.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Hascode.Templates.QuickSubtasks.
 */

if (typeof Hascode == 'undefined') { var Hascode = {}; }
if (typeof Hascode.Templates == 'undefined') { Hascode.Templates = {}; }
if (typeof Hascode.Templates.QuickSubtasks == 'undefined') { Hascode.Templates.QuickSubtasks = {}; }


Hascode.Templates.QuickSubtasks.usageHint = function(opt_data, opt_ignored) {
  var output = '<div id="usage-hint-expander-content" class="aui-expander-content"><div class="hint-inner-wrapper"><div id="close-hint" class="aui-button aui-button-subtle"><span class="aui-icon aui-icon-small aui-iconfont-view" title="' + 'Hide usage hints' + '"> </span></div><h3>' + opt_data.extensions.length + ' ' + 'Quick Subtasks Extensions available' + '</h3><div class="qtask-navi"><ul>';
  var extensionList10 = opt_data.extensions;
  var extensionListLen10 = extensionList10.length;
  for (var extensionIndex10 = 0; extensionIndex10 < extensionListLen10; extensionIndex10++) {
    var extensionData10 = extensionList10[extensionIndex10];
    output += '<li><a href="#' + extensionData10.identifier + '">' + extensionData10.title + '</li>';
  }
  output += '</ul></div><table class="aui aui-table-sortable"><tbody>';
  var extensionList18 = opt_data.extensions;
  var extensionListLen18 = extensionList18.length;
  if (extensionListLen18 > 0) {
    for (var extensionIndex18 = 0; extensionIndex18 < extensionListLen18; extensionIndex18++) {
      var extensionData18 = extensionList18[extensionIndex18];
      output += '<tr><td colspan="2"><div class="qtask-title">' + extensionData18.title + ' <a name="' + extensionData18.identifier + '"/></div><div class="qtask-info"><span class="qtask-identifier">Id: ' + extensionData18.identifier + '</span> <span class="qtask-version">(v' + extensionData18.version + ')</span></div></td></tr><tr><td><div class="qtask-description">' + extensionData18.description + '</div></td><td><span class="qtask-hint">' + extensionData18.usageHint + '</span></td></tr>';
    }
  } else {
    output += '<tr><td colspan="2"><span class="qtask-noextension">' + 'No extensions found' + '</span></td></tr>';
  }
  output += '</tbody></table></div></div><a id="replace-text-trigger" data-replace-text="' + 'Hide usage hint' + '" class="aui-expander-trigger" aria-controls="usage-hint-expander-content">' + 'Show usage hint' + '</a>';
  return output;
};
if (goog.DEBUG) {
  Hascode.Templates.QuickSubtasks.usageHint.soyTemplateName = 'Hascode.Templates.QuickSubtasks.usageHint';
}


Hascode.Templates.QuickSubtasks.subtasksForm = function(opt_data, opt_ignored) {
  return '<div class="template-selection" class="qtask-hidden"><form class="aui"><select size="1" id="template-selection"><option>' + soy.$$escapeHtml('Please feel free to select a template..') + '</option><optgroup label="' + soy.$$escapeHtml('User Templates') + '"><option>' + soy.$$escapeHtml('-- No template defined --') + '</option></optgroup><optgroup label="' + soy.$$escapeHtml('Project Templates') + '"><option>' + soy.$$escapeHtml('-- No template defined --') + '</option></optgroup></select></form></div><div class="examples"><div id="usage-examples"></div></div><div><textarea id="tasks-code"></textarea><br/><table class="aui"><tr><th id="select_issue_types" title="' + soy.$$escapeHtml('Sets the issue type for each subtask created. You may modify or create additional issue types in the administration area.') + '" class="subtasks-tooltip">' + soy.$$escapeHtml('Issue Type') + '<span class="aui-icon aui-icon-small aui-iconfont-info">' + soy.$$escapeHtml('Info') + '</span></th><td><select id="issue_type" size="1"></select></td><th id="select-subtask-prefix" title="' + soy.$$escapeHtml('Prefixes every subtask created with the parent issues summary.') + '" class="subtasks-tooltip">' + soy.$$escapeHtml('Prefix Subtasks') + '<span class="aui-icon aui-icon-small aui-iconfont-info">' + soy.$$escapeHtml('Info') + '</span></th><td><select id="prefix_subtasks" size="1"><option value="false" selected="selected">' + soy.$$escapeHtml('Dont prefix subtasks') + '</option><option value="true">' + soy.$$escapeHtml('Prefix subtasks') + '</option></select></td></tr></table></div>';
};
if (goog.DEBUG) {
  Hascode.Templates.QuickSubtasks.subtasksForm.soyTemplateName = 'Hascode.Templates.QuickSubtasks.subtasksForm';
}


Hascode.Templates.QuickSubtasks.projectTemplateEditor = function(opt_data, opt_ignored) {
  var output = '<div class="subtasks-templates-configuration"><div class="dataentry"><h2>' + soy.$$escapeHtml('Add a new template') + '</h2><div class="qtask-usage-hint">' + Hascode.Templates.QuickSubtasks.usageHint(opt_data) + '</div><form action="/' + soy.$$escapeHtml(opt_data.projectKey) + '" method="post" class="aui"><input type="hidden" name="addId" id="addId" value=""/><div class="field-group"><label for="addTitle">' + soy.$$escapeHtml('Title') + '</label><input class="text" type="text" id="addTitle" name="title" title="' + soy.$$escapeHtml('Add the template title') + '"></div><div class="field-group"><label for="addTemplate">' + soy.$$escapeHtml('Template Markup') + '</label><textarea class="textarea" type="text" id="addTemplate" name="text" title="' + soy.$$escapeHtml('Add the template markup') + '"></textarea></div><div class="field-group"><input class="button submit" type="submit" value="' + soy.$$escapeHtml('Create template') + '" id="add-subtask-template"/></div></form></div><div class="template-list"><h2>' + soy.$$escapeHtml('Existing templates') + '</h2><div id="aui-message-bar"></div><table class="aui aui-zebra project-template-list"><thead><tr><th id="title">' + soy.$$escapeHtml('Title') + '</th><th id="content">' + soy.$$escapeHtml('Template Markup') + '</th><th id="action">' + soy.$$escapeHtml('Action') + '</th></tr></thead><tbody>';
  var templateList97 = opt_data.templates;
  var templateListLen97 = templateList97.length;
  if (templateListLen97 > 0) {
    for (var templateIndex97 = 0; templateIndex97 < templateListLen97; templateIndex97++) {
      var templateData97 = templateList97[templateIndex97];
      output += '<tr><td headers="title">' + soy.$$escapeHtml(templateData97.title) + '</td><td headers="content"><pre>' + soy.$$escapeHtml(templateData97.text) + '</pre></td><td class="action" headers="action"><span style="cursor:pointer" rel="' + soy.$$escapeHtml(templateData97.id) + '" data-title="' + soy.$$escapeHtml(templateData97.title) + '" data-text="' + soy.$$escapeHtml(templateData97.text) + '" class="aui-icon aui-icon-small aui-iconfont-edit qtask-update-template">' + soy.$$escapeHtml('Edit') + '</span> |<span style="cursor:pointer" rel="' + soy.$$escapeHtml(templateData97.id) + '" data-title="' + soy.$$escapeHtml(templateData97.title) + '" class="aui-icon aui-icon-small aui-iconfont-remove qtask-remove-template">' + soy.$$escapeHtml('Delete') + '</span></td></tr>';
    }
  } else {
    output += '<tr><td colspan="3"><span class="qtask-notemplates">' + soy.$$escapeHtml('No subtask templates for this project found') + '</span></td></tr>';
  }
  output += '</tbody></table><div></div>';
  return output;
};
if (goog.DEBUG) {
  Hascode.Templates.QuickSubtasks.projectTemplateEditor.soyTemplateName = 'Hascode.Templates.QuickSubtasks.projectTemplateEditor';
}


Hascode.Templates.QuickSubtasks.userTemplateList = function(opt_data, opt_ignored) {
  var output = '<div id="template-list"><h2><span id="template-count">' + soy.$$escapeHtml(opt_data.userTemplates.length) + '</span> ' + soy.$$escapeHtml('custom template/s') + '.</h2><table class="aui">';
  var templateList129 = opt_data.userTemplates;
  var templateListLen129 = templateList129.length;
  if (templateListLen129 > 0) {
    for (var templateIndex129 = 0; templateIndex129 < templateListLen129; templateIndex129++) {
      var templateData129 = templateList129[templateIndex129];
      output += '<tr><td>' + soy.$$escapeHtml(templateData129.title) + '</td><td><pre>' + soy.$$escapeHtml(templateData129.text) + '</pre></td><td><span style="cursor:pointer" class="aui-icon aui-icon-small aui-iconfont-remove remove-template" href="#" rel="' + soy.$$escapeHtml(templateData129.id) + '">' + soy.$$escapeHtml('Remove') + '</span></tr>';
    }
  } else {
    output += '<tr><td colspan="3">' + soy.$$escapeHtml('No subtask templates for this project found') + '</td></tr>';
  }
  output += '</table></div>';
  return output;
};
if (goog.DEBUG) {
  Hascode.Templates.QuickSubtasks.userTemplateList.soyTemplateName = 'Hascode.Templates.QuickSubtasks.userTemplateList';
}


Hascode.Templates.QuickSubtasks.userTemplateEditor = function(opt_data, opt_ignored) {
  return '<div class="user-template-wrapper"><div id="aui-message-bar"></div><br/><div id="template-list-container">' + Hascode.Templates.QuickSubtasks.userTemplateList({userTemplates: []}) + '</div><br/><div id="create-template"><div><h3>' + soy.$$escapeHtml('Create new Subtask Template') + '</h3><div class="examples"><div id="usage-examples"></div></div></div><table><tbody><tr><td><label for="subtask-title">' + soy.$$escapeHtml('Title') + '<span class="aui-icon icon-required"></span></label></td><td><input type="text" title="' + soy.$$escapeHtml('Title') + '" id="subtask-title" class="text"></td></tr><tr><td><label for="subtask-user-template">' + soy.$$escapeHtml('Template') + ' <span class="aui-icon icon-required"></span></label></td><td><textarea placeholder="' + soy.$$escapeHtml('Enter your subtask template here...') + '" id="subtask-user-template" class="textarea"></textarea></td></tr></tbody></table><div class="buttons-container"><div class="buttons"><input type="button" id="trigger-create" value="' + soy.$$escapeHtml('Save') + '" class="button submit"></div></div></div></div>';
};
if (goog.DEBUG) {
  Hascode.Templates.QuickSubtasks.userTemplateEditor.soyTemplateName = 'Hascode.Templates.QuickSubtasks.userTemplateEditor';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.administration.atlassian-admin-quicksearch-jira:admin-quicksearch-webresources', location = 'com/atlassian/administration/quicksearch/jira/js/adminQuickNav.js' */
/**
 * Shifter group for admin search
 */
require([
    'jquery',
    'underscore',
    'jira/ajs/ajax/smart-ajax',
    'jira/shifter',
    'wrm/context-path'
], function (jQuery,
             _,
             SmartAjax,
             Shifter,
             contextPath) {
    Shifter.register(function () {
        var suggestionsDeferred = jQuery.Deferred();

        function formatItem(item) {
            return {
                label: item.label,
                value: item.linkUrl,
                keywords: item.aliases
            };
        }

        function getItemsInSection(section) {
            return _.map(section.items, formatItem).concat(_.map(section.sections, getItemsInSection));
        }

        function formatResponse(data) {
            return _.flatten(getItemsInSection(data));
        }

        SmartAjax.makeRequest({
            dataType: 'json',
            url: contextPath() + '/rest/adminquicksearch/latest/links/default'
        })
            .pipe(formatResponse)
            .done(function (suggestions) {
                suggestionsDeferred.resolve(suggestions);
            })
            .fail(function () {
                suggestionsDeferred.reject();
            });

        return {
            id: 'admin',
            name: "\u7ba1\u7406",
            weight: 500,
            getSuggestions: function () {
                return suggestionsDeferred;
            },
            onSelection: function (value) {
                window.location = value;
                return jQuery.Deferred();
            }
        };
    });
});

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jpo:jpo-wr-dialog-bootstrap', location = '/jpo2/scripts-plugin/dialog-bootstrap.js' */
!function(o){function t(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return o[e].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var i={};t.m=o,t.c=i,t.d=function(o,i,e){t.o(o,i)||Object.defineProperty(o,i,{configurable:!1,enumerable:!0,get:e})},t.n=function(o){var i=o&&o.__esModule?function(){return o.default}:function(){return o};return t.d(i,"a",i),i},t.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)},t.p="",t(t.s=1)}([,function(o,t){window.AJS.$(function(){return null==window.JIRA.Portfolio&&(window.JIRA.Portfolio={}),window.JIRA.Portfolio.createDialog=new window.JIRA.FormDialog({id:"jpo-create-dialog",trigger:"li.jpo-create-dialog a, a.jpo-create-dialog",ajaxOptions:window.JIRA.Dialogs.getDefaultAjaxOptions,autoClose:!0,widthClass:"large"}),window.JIRA.Portfolio.quickCreateDialog=new window.JIRA.FormDialog({id:"jpo-quick-create-dialog",trigger:"li.jpo-quick-create-dialog a, a.jpo-quick-create-dialog",ajaxOptions:window.JIRA.Dialogs.getDefaultAjaxOptions,autoClose:!0,widthClass:"large"}),window.JIRA.Portfolio.keyboardShortcutsDialog=new window.JIRA.FormDialog({id:"jpo-keyboard-shortcuts-dialog",trigger:"a.jpo-keyboard-shortcuts",ajaxOptions:window.JIRA.Dialogs.getDefaultAjaxOptions,autoClose:!0,width:500})})}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jpo:jpo-wr-custom-field-scripts-parent', location = '/jpo2/scripts-plugin/field-parent.js' */
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){var r,i;r=[],void 0!==(i=function(){var e,t,n,r,i,o,s,u,a,c;return n=window.JIRA,e=AJS.$,r=AJS.SingleSelect,t=AJS.ItemDescriptor,c=AJS.escapeHTML,o=function(e){return n.bind(n.Events.NEW_CONTENT_ADDED,function(t,r,i){if(i!==n.CONTENT_ADDED_REASON.panelRefreshed)return e({context:r})})},s=function(e){var t,n,r;return r=e.url,t=e.createQueryData,n=e.formatResponse,{url:r,type:"POST",query:!0,data:function(e){return t({query:e})},dataType:"json",contentType:"application/json",formatResponse:n,keyInputPeriod:200}},a=function(e){var n,r;return r=e.text,n=e.additionalStyles,new t({label:r,html:c(r),highlighted:!0,styleClass:"jpo-dropdown-item-unselectable "+n,unselectableItem:!0})},i=function(e){var t;if(t=e.items,0===t.length)return t.push(a({text:"\u65e0\u5339\u914d\u9879",additionalStyles:"jpo-dropdown-item-italic"}))},u=function(t){var n,i;return n=t.ajaxOptions,i=t.getNoMatchingValueMessage,r.extend({init:function(t){return e.extend(t,{submitInputVal:!0,showDropdownButton:!0,ajaxOptions:n}),this._super(t)},setSelection:function(e){if(!e.properties.unselectableItem)return this._super.apply(this,arguments)},handleFreeInput:function(t){var n;if(this._super.apply(this,arguments),null==t&&(t=e.trim(this.$field.val())),null==this.model.getDescriptor(t)&&this.$container.hasClass("aui-ss-editing"))return n=null!=t&&t.length>0,n?(this.options.errorMessage=i(t),this.showErrorMessage(t),this.clear(),this.model.removeFreeInputVal()):this.hideErrorMessage()}})},{bindInitializationCallback:o,createDropdownAjaxOptions:s,createInfoMessageListItem:a,addNoMatchesItemIfEmpty:i,createDropdownClass:u}}.apply(t,r))&&(e.exports=i)},,function(e,t,n){var r;r=[n(0)],function(e){var t,n,r,i,o,s,u,a,c,l,p,f,d,m,h,g,y,v,j,I,x,w,S,T,A,E,D,b,J,M,N,O,_,k;if(a=window.JIRA,t=AJS.$,u=AJS.ItemDescriptor,r=AJS.GroupDescriptor,m=AJS.contextPath,x=AJS.escapeHTML,c=100,l=".jpo-parent-selection-dropdown",o=".jpo-initial-issue-type-name",i=".jpo-initial-epic-link",n=".jpo-client-error-message-container.jpo-parent-link",s="#issuetype-field",p=m()+"/rest/jpo/1.0/parent/suggest",E="",J=void 0,I=void 0,T=function(e){var t,n,r,i;for(t={},r=0,i=e.length;r<i;r++)n=e[r],t[n.id]=n;return t},O=function(){return E=t(o).val()},b=function(){return t(s).change(function(e){var t;if(null!=(t=e.target.value)&&t.length>0)return E=t})},A=function(){return null!=I&&I.length>0},N=function(){return I=t(i).val()},D=function(e){return e.$field.change(function(e){return I=e.target.value,d()})},d=function(){return A()?k("\u8bbe\u7f6e\u957f\u7bc7\u6545\u4e8b\u94fe\u63a5\u65f6\u65e0\u6cd5\u4f7f\u7528\u7236\u94fe\u63a5"):S()},_=function(e){if(null!=J)return J.$container.toggle(e)},k=function(e){return _(!1),t(n).html("<span class='error'>"+x(e)+"</span>")},S=function(){return _(!0),t(n).empty()},w=function(e){var t,n,i,o,s;return i=e.issues,n=e.issueTypes,s=e.projects,t=new r({weight:0,showLabel:!1,items:[h()]}),o=new r({weight:1,items:j({issues:i,issueTypes:n,projects:s})}),[t,o]},v=function(e){var t,n,r,i,o,s,a;return r=e.issue,s=e.issueType,a=e.project,i=r.issueKey,o=r.issueSummary,t=a.key+"-"+i,n=t+" "+o,new u({value:t,fieldText:n,label:n,icon:s.iconUrl})},j=function(t){var n,r,i,o,s,u,a;return o=t.issues,r=t.issueTypes,u=t.projects,i=T(r),a=T(u),s=function(){var e,t,r;for(r=[],e=0,t=o.length;e<t;e++)n=o[e],r.push(v({issue:n,issueType:i[n.issueTypeId],project:a[n.projectId]}));return r}(),e.addNoMatchesItemIfEmpty({items:s}),s},h=function(){return e.createInfoMessageListItem({text:"\u8981\u5c06\u957f\u7bc7\u6545\u4e8b\u8bbe\u7f6e\u4e3a\u7236\u9879\uff0c\u8bf7\u6539\u4e3a\u4f7f\u7528\u957f\u7bc7\u6545\u4e8b\u94fe\u63a5",additionalStyles:"jpo-dropdown-item-italic"})},g=function(e){var t;return t=e.query,JSON.stringify({query:t,issueTypeName:E,maxResults:c})},f=e.createDropdownClass({ajaxOptions:e.createDropdownAjaxOptions({url:p,createQueryData:g,formatResponse:w}),getNoMatchingValueMessage:function(e){return AJS.format("\u672a\u627e\u5230\u4e0e\u201c{0}\u201d\u5339\u914d\u7684\u6709\u6548\u7236\u9879\u3002",e)}}),y=function(e){return t(l,e).each(function(){return J=new f({element:t(this)}),d()})},e.bindInitializationCallback(function(e){var t;return t=e.context,N(),O(),b(),y(t)}),null!=(null!=(M=a.EpicPicker)?M.READY_EVENT:void 0))return a.bind(a.EpicPicker.READY_EVENT,function(e,t){return D(t)})}.apply(t,r)}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jpo:jpo-wr-custom-field-scripts-target-dates', location = '/jpo2/scripts-plugin/field-target-dates.js' */
!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){var r,o;r=[],void 0!==(o=function(){var e,t,n,r,o,i,a,u,s,l;return n=window.JIRA,e=AJS.$,r=AJS.SingleSelect,t=AJS.ItemDescriptor,l=AJS.escapeHTML,i=function(e){return n.bind(n.Events.NEW_CONTENT_ADDED,function(t,r,o){if(o!==n.CONTENT_ADDED_REASON.panelRefreshed)return e({context:r})})},a=function(e){var t,n,r;return r=e.url,t=e.createQueryData,n=e.formatResponse,{url:r,type:"POST",query:!0,data:function(e){return t({query:e})},dataType:"json",contentType:"application/json",formatResponse:n,keyInputPeriod:200}},s=function(e){var n,r;return r=e.text,n=e.additionalStyles,new t({label:r,html:l(r),highlighted:!0,styleClass:"jpo-dropdown-item-unselectable "+n,unselectableItem:!0})},o=function(e){var t;if(t=e.items,0===t.length)return t.push(s({text:"\u65e0\u5339\u914d\u9879",additionalStyles:"jpo-dropdown-item-italic"}))},u=function(t){var n,o;return n=t.ajaxOptions,o=t.getNoMatchingValueMessage,r.extend({init:function(t){return e.extend(t,{submitInputVal:!0,showDropdownButton:!0,ajaxOptions:n}),this._super(t)},setSelection:function(e){if(!e.properties.unselectableItem)return this._super.apply(this,arguments)},handleFreeInput:function(t){var n;if(this._super.apply(this,arguments),null==t&&(t=e.trim(this.$field.val())),null==this.model.getDescriptor(t)&&this.$container.hasClass("aui-ss-editing"))return n=null!=t&&t.length>0,n?(this.options.errorMessage=o(t),this.showErrorMessage(t),this.clear(),this.model.removeFreeInputVal()):this.hideErrorMessage()}})},{bindInitializationCallback:i,createDropdownAjaxOptions:a,createInfoMessageListItem:s,addNoMatchesItemIfEmpty:o,createDropdownClass:u}}.apply(t,r))&&(e.exports=o)},,,function(e,t,n){var r;r=[n(0)],function(e){var t,n,r,o,i,a,u,s,l,c,p,f,d,m,h,g,v,j,y;return t=AJS.$,c=AJS.escapeHTML,i=".jpo-baseline-start > div > input",o=".jpo-baseline-end > div > input",r=".jpo-client-error-message-container.jpo-start",n=".jpo-client-error-message-container.jpo-end",y=void 0,j=void 0,d=function(){return t(i).change(function(e){var t;if(null!=(t=e.target.value))return y=t,u()})},f=function(){return t(o).change(function(e){var t;if(null!=(t=e.target.value))return j=t,a()})},h=function(){return y=t(i).val()},m=function(){return j=t(o).val()},l=function(e,t){var n,r;return r=new Date(e),n=new Date(t),r.getTime()>n.getTime()},a=function(){return null!=j&&null!=y&&l(y,j)?g("\u76ee\u6807\u7ed3\u675f\u65e5\u671f\u5fc5\u987b\u5728\u76ee\u6807\u5f00\u59cb\u65e5\u671f\u4e4b\u540e"):p()},u=function(){return null!=j&&null!=y&&l(y,j)?v("\u76ee\u6807\u5f00\u59cb\u65e5\u671f\u5fc5\u987b\u5728\u76ee\u6807\u7ed3\u675f\u65e5\u671f\u4e4b\u524d"):p()},g=function(e){return t(n).html("<span class='error jpo-error'>"+c(e)+"</span>")},v=function(e){return t(r).html("<span class='error jpo-error'>"+c(e)+"</span>")},p=function(){return t(n).empty(),t(r).empty()},s=function(e){return t(i,e).each(function(){return t(this.parentNode).append("<div class='jpo-client-error-message-container jpo-start'/>"),y=h(),j=m(),u()}),t(o,e).each(function(){return t(this.parentNode).append("<div class='jpo-client-error-message-container jpo-end'/>"),a()})},e.bindInitializationCallback(function(e){var t;return t=e.context,f(),d(),s(t)})}.apply(t,r)}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.ext.calendar:browse-project-tip', location = 'com/atlassian/jira/ext/calendar/resources/js/BrowseProjectTip.js' */
AJS.toInit(function(c){if(!WRM.data.claim("com.atlassian.jira.ext.calendar:tipDataProvider.tip").suppressTip){var d=function(b){if(b.length){var a=c("\x3cdiv/\x3e");AJS.messages.info(a,{body:AJS.format("This calendar shows when issues are due to be completed. This is set by the {0} field for an issue.","\u5230\u671f\u65e5"),closeable:!0});a.find(".aui-message").attr("id","browse-project-calendar-info");b.prepend(a)}};JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(b,a,e){b="project-tab"==a.attr("id")?c(".issues-calendar-container",a):
c("#project-tab .issues-calendar-container",a);d(b)});d(c("#project-tab .issues-calendar-container"));AJS.bind("messageClose",function(b,a){"browse-project-calendar-info"==a.attr("id")&&(AJS.EventQueue&&AJS.EventQueue.push({name:"browseprojectcalendarinfo.closebutton"}),c.ajax({data:{tipKey:"browseProjectCalendarTab",atl_token:atl_token()},type:"POST",url:contextPath+"/rest/calendar-plugin/1.0/suppressedTips"}))})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'probe.js' */
!function(e){"use strict";const t=[],n=()=>t;function r(e){n().unshift({addReporter:e})}function i(e){const t=n();for(;t.length;)e(t.splice(0,1)[0]);t.unshift=e,t.push=e}const o=()=>window,a=()=>o().performance;function s({key:e,entityId:t}){const r=a().now();console.debug("[BM]",e,"Probe.end",{timestamp:r}),n().push({end:{key:e,timestamp:r,entityId:t}})}const c=e=>!e||null==e||"null"===e||"undefined"===e,u=()=>o().document,l=(e,t)=>{var n=u().querySelectorAll(e);return n.length&&(c(t)||Array.prototype.every.call(n,(function(e){return!e.querySelector(t)})))};function f(){this._={}}var d=function(e){var t=e[0],n=e[1];n instanceof f?e.length>=3?Object.keys(n._).forEach((function(r){d([t,n._[r],r].concat(e.slice(2)))})):Object.keys(n._).forEach((function(e){d([t,n._[e],e])})):Array.isArray(n)&&t.apply(null,[n].concat(e.slice(2)))};f.prototype.forEach=function(e){d([e,this])},f.prototype.add=function(){for(var e=this,t=null,n=0;n<arguments.length;n++){if(t=arguments[n],n===arguments.length-1&&Array.isArray(e)){e.push(t);break}n<arguments.length-2&&!e._.hasOwnProperty(t)?e._[t]=new f:n!==arguments.length-2||e._.hasOwnProperty(t)||(e._[t]=[]),e=e._[t]}};var h=function(e,t){if(0!==e.length){var n=e.pop(),r=n[0],i=n[1];r===t?h(e,r):i._.hasOwnProperty(t)&&delete i._[t],0===Object.keys(i).length&&h(e,r)}};let y;f.prototype.remove=function(){for(var e,t=!1,n=null,r=this,i=[[n,r]],o=null,a=0;a<arguments.length;a++)if(o=arguments[a],Array.isArray(r))(e=r.indexOf(o))>-1&&(r.splice(e,1),0===r.length&&i.length>1&&h(i,n),t=!0);else{if(!r._.hasOwnProperty(o))break;a===arguments.length-1&&(delete r._[o],0===Object.keys(r).length&&i.length>1&&h(i,n),t=!0),n=o,r=r._[o],i.push([n,r])}return t},f.prototype.get=function(e){return this._.hasOwnProperty(e)?this._[e]:[]};function p(e,t){var n;e.forEach||(e=[e]),!c(t)&&Array.isArray(t)&&(t=t.join(", "));var r=new Promise((function(r,i){var a=[],s=[];e.forEach((function(e){var n;l(e,t)||(n=new Promise((function(n){const r=(()=>{if(y)return y;var e,t,n=o().MutationObserver,r=!1;return t=new f,e=new n((function(){t.forEach((function(e,n,r){l(r,n)&&(e.forEach((function(e){e()})),t.remove(r,n))}))})),y={addTarget:function(n,i,o){return r||(e.observe(u(),{attributes:!0,childList:!0,subtree:!0}),r=!0),t.add(n,i,o),()=>{t.remove(n,i,o)}}},y})().addTarget(e,t,n);s.push(r)})),a.push(n))}));var c=function(){s.forEach((function(e){e()}))};Promise.all(a).then(c).then(r,i),n=function(){c(),i()}}));return r.dismiss=n,r}var m,b="visibilitychange",v="animationend",w="browser-metrics-visibility-test",g="browser-metrics-visibility-animation",k=function(){var e=u().createElement("style"),t=["."+w+" {","-webkit-animation-duration: 0.001s;","animation-duration: 0.001s;","-webkit-animation-name: "+g+";","animation-name: "+g+";","-webkit-animation-iteration-count: 1;","animation-iteration-count: 1;","}","@keyframes "+g+" {}","@-webkit-keyframes "+g+" {","from {}","to {}","}"].join("\n");e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(u().createTextNode(t)),u().head.appendChild(e),k=function(){}};function P(){if(m)return m;var e,t,n=!1;function r(){u().body.classList.remove(w),u().removeEventListener(b,t),u().removeEventListener(v,e),m=null}return(m=new Promise((function(r,i){"visible"!==u().visibilityState?i():(t=function(){n=!0},e=function(e){e.animationName===g&&(n?i():r())},u().addEventListener(b,t),u().addEventListener(v,e),k(),u().body.classList.add(w))}))).then(r,r),m}function _(e){var t,n;return t=e,(Array.isArray(t)||"string"==typeof t)&&(e={rules:e}),e.rules=(n=e.rules,Array.isArray(n)||(n=[n]),n.map((function(e){return"string"==typeof e?{selector:e,hasNone:null}:e}))),e.requirePaint=void 0!==e.requirePaint&&e.requirePaint,e}const A=u();let E=!1;switch(A.readyState){case"interactive":case"complete":E=!0;break;default:A.addEventListener("DOMContentLoaded",(()=>{o().setTimeout((()=>E=!0))}),{once:!0})}let O;function M(){O=null}function L(e){var t;const r="isInitial"in e?e.isInitial:!1===E,i="threshold"in e?e.threshold:1e3,o="reporters"in e?e.reporters:[],c=r?0:a().now(),u=null!==(t=e.timeout)&&void 0!==t?t:6e4;console.debug("[BM]",e.key,"Probe.start",{timestamp:c}),n().push({start:{key:e.key,isInitial:r,threshold:i,timestamp:c,reporters:Array.isArray(o)?o:[o],entityId:e.entityId,waitForMarks:e.waitForMarks,timeout:u}}),O&&(O.cancel(),M()),e.ready&&(O=function(e,t){e=_(e);var n=function(){},r=new Promise((function(t,r){var i=[],o=e.rules.map((function(e){var t=new p(e.selector,e.hasNone);return i.push((function(){t.dismiss()})),t}));n=function(){i.forEach((function(e){e()})),r()},Promise.all(o).then((function(e){})).then(t,r)}));return r.cancel=n,e.requirePaint&&(r=r.then(P)),"function"==typeof t&&r.then(t),r}(e.ready),O.then((function(){console.debug("[BM]",e.key,"Probe.end invoked by ready"),s({key:e.key})})).then(M,M))}function j(e){console.debug("[BM]","Probe.subscribe",e.name),n().push({subscribe:e})}window.define&&window.define("internal/browser-metrics",(function(){return{start:L,end:s,addReporter:r,delegateTo:i,subscribe:j}})),console.debug("[BM]","Probe loaded"),e.addReporter=r,e.delegateTo=i,e.end=s,e.start=L,e.subscribe=j,Object.defineProperty(e,"__esModule",{value:!0})}(this["browser-metrics"]=this["browser-metrics"]||{});

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'browser-metrics-aa-beacon/browser-metrics-aa-beacon.js' */
!function(e){"use strict";const n=[],t=[];let r;const s=e=>{t.push(e)},a=e=>t.reduce(((n,t)=>{const r=t(e);return r.length>n.length?r:n}),""),o=e=>{n.push(e)},c=e=>{r=e},i=e=>{const t={};n.forEach((n=>{const r=n(e);"object"==typeof r&&Object.assign(t,r)}));const s={name:"browser.metrics.navigation",properties:t};(r||AJS.EventQueue).push(s),console.debug("[BM-AA] ","AJS Event pushed",s)};window.define&&window.define("internal/browser-metrics-aa-beacon",(function(){return{beacon:i,setEventQueue:c,addReportMarshaller:o,cleanUrl:a,addUrlCleaner:s}})),e.addReportMarshaller=o,e.addUrlCleaner=s,e.beacon=i,e.cleanUrl=a,e.setEventQueue=c,Object.defineProperty(e,"__esModule",{value:!0})}(this["browser-metrics-aa-beacon"]=this["browser-metrics-aa-beacon"]||{});

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'loader.js' */
!function(){"use strict";let r=window;const n=r.WRM;let i=0,l=0,t=null;function e(){i===l&&t&&(t(),t=null)}const c={install(r){i+=1,r((()=>{l+=1,e()}))}};r["browser-metrics-plugin"]=c,n.require(["wrc!browser-metrics-plugin.contrib"],(()=>{r.require(["internal/browser-metrics-plugin/collector"],(r=>{t=()=>{r.install()},e()}))}))}();

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-browser-metrics:sensors', location = 'sensors.js' */
require(["internal/browser-metrics","jira/util/events"],function(e,i){var a,o,d,t,r,l,s,n={},g={};d=i,t=e,(o=a={}).applicationMenusSensorInit=function(){var i={"bonfire_top_menu_dropdown-content":"jira.header.menu.capture","browse_link-content":"jira.header.menu.projects","find_link-content":"jira.header.menu.issues","greenhopper_menu-content":"jira.header.menu.agile","home_link-content":"jira.header.menu.dashboards","plugins-jira-webitem-main-content":"jira.header.menu.portfolio","servicedesk-section-content":"jira.header.menu.service-desk","system-admin-menu-content":"jira.header.menu.admin","system-help-menu-content":"jira.header.menu.help","user-options-content":"jira.header.menu.profile"};function a(e){return i.hasOwnProperty(e)?i[e]:null}d.bind("aui-dropdown2-show-before",function(e){e=e.target,e=a(e&&e.id);e&&t.start({key:e,isInitial:!1,threshold:250})}),d.bind("aui-dropdown2-show-after",function(e){e=e.target,e=a(e&&e.id);e&&t.end({key:e})})},a=o,n=function(e){e.safeDialogId=function(e){var i;if(a.hasOwnProperty(e))return e;for(i=0;i<o.length;i++)if(e.match(o[i].pattern))return o[i].dialogId;return null};var a=["about-dialog","add-basicuser-dialog","add-developer-dialog","add-field-configuration-dialog","add-field-configuration-scheme-dialog","add-field-dialog","add-field-screen-dialog","add-field-screen-scheme-dialog","add-incoming-mail-handler-dialog","add-issue-type-dialog","add-issue-type-field-configuration-association-dialog","add-issue-type-screen-scheme-configuration-association-dialog","add-issue-type-screen-scheme-dialog","add-new-issue-type-to-scheme-dialog","add-screen-scheme-item-dialog","add-subtask-type-dialog","add-workflow-dialog","add_workflowscheme-dialog","assign-dialog","assign-issue-types-dialog","assign-to-me-link-handler","attach-file-dialog","attach-screenshot-dialog","auditing-settings-dialog","clone-issue-dialog","comment-add-dialog","configure_wallboard_dialog","confluence-page-search-dialog","copy_classic default workflow-dialog","copy-filter-dialog","copy_jira-dialog","create-issue-dialog","create-issue-dialog.issueType","create-issue-dialog.projectId","create-request-dialog","create-service-desk-dialog","create-status-dialog","create-story-dialog","create-story-dialog.issueType","create-story-dialog.projectId","create-subtask-dialog","create-subtask-dialog.issueType","create-team-dialog","create_user-dialog","credits-dialog","delete-attachment-dialog","delete-comment-dialog","delete-dshboard","delete-filter-dialog","delete-issue-dialog","delete-issue-link-dialog","delete-log-work-dialog","delete-metric","delete-queue","delete-status-dialog","deleteuser_link-dialog","devstatus-branch-detail-dialog","devstatus-build-detail-dialog","devstatus-commit-detail-dialog","devstatus-cta-dialog","devstatus-deployment-detail-dialog","devstatus-pullrequest-detail-dialog","devstatus-review-detail-dialog","discard-draft-dialog","discard_draft_workflow-dialog","edit-attachments-dialog","edit-comment","editgroups_admin-dialog","editgroups_link-dialog","editgroups_sysadmin-dialog","edit-issue-dialog","edit-labels-dialog","edit-log-work-dialog","edit-status-dialog","edituser_link_admin-dialog","edit-workflow-dialog","gh-find-on-board-dialog-issue","gh-find-on-board-dialog-sprint","inline-issue-create-dialog","invite_user-dialog","issue-actions-dialog","issue-tab-error-dialog","jim-create-project-dialog","keyboard-shortcuts-dialog","link-issue-dialog","log-work-dialog","manage-attachment-dialog","metric-pre-save-dialog","modal-field-view","permission-helper-dialog","project-avatar-cropper","project-avatar-picker","project-config-details-project-category-dialog","project-config-project-edit-dialog","project-config-project-edit-lead-and-default-assignee-dialog","project-email-dialog","publish_draft_workflow-dialog","queue-dirty-edits","QuickCreateIssue.error","QuickCreateIssue.success","QuickCreateSubtask.error","QuickCreateSubtask.success","QuickEdit.error","QuickEdit.success","remote-jira-search-dialog","rename-filter-dialog","report-dirty-edits","save-filter-dialog","sd-add-default-value","sd-add-remove-agent-dialog","sd-remove-field-dialog","server-error-dialog","report-delete-confirm","tempo-add-hours-issue-dialog","tempo-add-internal-activity-form","tempo-core-medium-form","tempo-delete-form-dialog","tempo-grace-form","tempo-large-form","tempo-medium-form","tempo-move-form-dialog","tempo-pdf-form","tempo-small-form","tempo-split-form-dialog","tempo-user-settings-dialog","user-avatar-picker","user-defaults-edit-dialog","versionsMergeDialog","view-workflow-dialog","view-workflow-dialog-project-admin","view-workflow-dialog-workflow-schemes","wait-migrate-dialog","whereismycf-dialog","workflow-text-view"].reduce(function(e,i){return e[i]=!0,e},{}),o=[{dialogId:"component-delete-dialog",pattern:/^component-\d+-delete-dialog$/i},{dialogId:"version-delete-dialog",pattern:/^version-\d+-delete-dialog$/i},{dialogId:"workflow-transition-dialog",pattern:/^workflow-transition-\d+-dialog$/i}];return e}(n),r=i,l=e,s=n,(n=g).dialogsSensorInit=function(){r.bind("beforeShow",function(e,i){"string"!=typeof i||(i=(0,s.safeDialogId)(i))&&l.start({key:"jira.dialog.open."+i,isInitial:!1,threshold:1e3})}),r.bind("dialogContentReady",function(e,i){"string"!=typeof i.options.id||(i=(0,s.safeDialogId)(i.options.id))&&l.end({key:"jira.dialog.open."+i})})},g=g=n,(0,a.applicationMenusSensorInit)(),(0,g.dialogsSensorInit)()});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_aui.pattern.help', location = 'aui.chunk.9f7d4c86c6d4861083a1--f3a88e25cb25fb3c96a5.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.pattern.help"],{H4sa:function(i,u,n){"use strict";n.r(u);n("FStl"),n("Q0fs"),n("nqD9"),n("0FWE"),n("VtiI")}},[["H4sa","runtime","aui.splitchunk.4b52f9e2be","aui.splitchunk.056561461c","aui.splitchunk.949297951c","aui.splitchunk.d925afe2c0","aui.splitchunk.d727dd207f","aui.splitchunk.7da3927366"]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:analytics', location = 'util/analytics.js' */
define("jira-help-tips/util/analytics",["jira/analytics"],function(t){"use strict";function e(t){return t=""+(t||""),t.replace(/\./g,"-")}function i(i,n){if(n&&n.attributes.id){var r={},a=e(n.attributes.id),s="";n.attributes.eventPrefix&&(s=n.attributes.eventPrefix,"."!==s.charAt(s.length-1)&&(s+=".")),r.name=s+"helptips."+a+"."+i,r.properties={},t.send(r)}}return{clean:e,send:i}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager', location = 'js/HelpTipManager.js' */
define("jira-help-tips/feature/help-tip-manager",["require"],function(s){"use strict";var e=s("underscore"),i=s("jquery"),t=s("jira/jquery/deferred"),n=s("wrm/context-path"),r=s("wrm/data"),d=n()+"/rest/helptips/1.0/tips",u=r.claim("com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData");return{dismissedTipIds:[],sequences:[],loaded:new t,url:function(){return d},sync:function(s,e){var n=new t;return s||(s="get"),e||(e=null),"get"===s&&u&&u.dismissed?n.resolve(u.dismissed):i.ajax(this.url(),{type:s,dataType:"json",contentType:"application/json",data:e&&JSON.stringify(e),processData:!1}).done(function(s){n.resolve(s)}).fail(function(){n.reject()}),n.promise()},fetch:function(){var s=this.sync();return s.done(i.proxy(function(s){i.merge(this.dismissedTipIds,s),this.loaded.resolve()},this)),s.promise()},show:function(s){this.loaded.done(s)},dismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.push(e),this.sync("post",{id:e})):s._dismissed=!0},undismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.splice(i.inArray(e,this.dismissedTipIds),1),this.sync("delete",{id:e})):s._dismissed=!1},isDismissed:function(s){var e=s.attributes.id;return e?i.inArray(e,this.dismissedTipIds)>=0:s._dismissed},clearSequences:function(){this.sequences=[]},hideSequences:function(){e.each(this.sequences,function(s){s.view.dismiss()})},showSequences:function(){if(!this._showStarted){var s=this,t=0;this._showStarted=!0,i.when(this.loaded).done(function(){s.sequences.sort(function(s,e){return s.attributes.weight-e.attributes.weight}),s.sequences=e.filter(s.sequences,function(i){var n=-1===e.indexOf(s.dismissedTipIds,i.attributes.id);return n&&(i.attributes.position=t++),n}),s.sequences.length>0&&(e.last(s.sequences).attributes.showCloseButton=!0,s.sequences[0].show({force:!0})),s._showStarted=!1})}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'templates/HelpTip.soy' */
// This file was automatically generated from HelpTip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace AJS.Templates.HelpTip.
 */

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.Templates == 'undefined') { AJS.Templates = {}; }
if (typeof AJS.Templates.HelpTip == 'undefined') { AJS.Templates.HelpTip = {}; }


AJS.Templates.HelpTip.tipContent = function(opt_data, opt_ignored) {
  return ((opt_data.title) ? '<h2 class="helptip-title">' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + '<p class="helptip-body">' + soy.$$filterNoAutoescape(opt_data.bodyHtml) + '</p>' + ((opt_data.url) ? '<p><a class="helptip-link" href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + ((opt_data.linkText) ? soy.$$escapeHtml(opt_data.linkText) : soy.$$escapeHtml('\u4e86\u89e3\u66f4\u591a')) + '</a></p>' : '') + AJS.Templates.HelpTip.tipFooter(opt_data);
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipContent.soyTemplateName = 'AJS.Templates.HelpTip.tipContent';
}


AJS.Templates.HelpTip.tipFooter = function(opt_data, opt_ignored) {
  return '<form class="tip-footer">' + AJS.Templates.HelpTip.nextButton(opt_data) + AJS.Templates.HelpTip.closeButton(opt_data) + AJS.Templates.HelpTip.sequencePaging(opt_data) + '</form>';
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.tipFooter.soyTemplateName = 'AJS.Templates.HelpTip.tipFooter';
}


AJS.Templates.HelpTip.nextButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showNextButton) ? '<button class="aui-button helptip-next" type="button">' + ((opt_data.nextButtonText) ? soy.$$escapeHtml(opt_data.nextButtonText) : soy.$$escapeHtml('\u4e0b\u4e00\u4e2a')) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.nextButton.soyTemplateName = 'AJS.Templates.HelpTip.nextButton';
}


AJS.Templates.HelpTip.closeButton = function(opt_data, opt_ignored) {
  return '' + ((opt_data.showCloseButton) ? '<button class="aui-button ' + ((opt_data.showNextButton) ? ' aui-button-link ' : '') + ' helptip-close" type="button">' + ((opt_data.closeButtonText) ? soy.$$escapeHtml(opt_data.closeButtonText) : soy.$$escapeHtml('\u5173\u95ed')) + '</button>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.closeButton.soyTemplateName = 'AJS.Templates.HelpTip.closeButton';
}


AJS.Templates.HelpTip.sequencePaging = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isSequence && opt_data.length > 1) ? '<span class="helptip-sequence-paging">' + soy.$$escapeHtml(opt_data.position + 1) + '/' + soy.$$escapeHtml(opt_data.length) + '</span>' : '');
};
if (goog.DEBUG) {
  AJS.Templates.HelpTip.sequencePaging.soyTemplateName = 'AJS.Templates.HelpTip.sequencePaging';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'js/HelpTip.js' */
define("jira-help-tips/feature/help-tip",["require"],function(i){"use strict";function t(){return!1}function e(){return!0}function s(){return"jira-help-tip-"+p+d++}var n=i("jquery"),o=i("underscore"),h=i("jira-help-tips/feature/help-tip-manager"),l=i("jira-help-tips/util/analytics"),r=i("aui/inline-dialog"),a=i("jira/jquery/deferred"),u=AJS.Popups,c=AJS.Templates.HelpTip,d=0,p=(new Date).getTime(),f=function(i,t){this.initialize(i,t)},b=function(i){this.initialize(i)},m=function(i){var t;this.attributes=n.extend({},i),this.attributes.id||(this.attributes.id=!1),this.attributes.callbacks||(this.attributes.callbacks={}),this.attributes.isSequence&&(this.attributes.weight||(this.attributes.weight=Number.MAX_VALUE),h.sequences.push(this)),this.attributes.body&&(this.attributes.bodyHtml=this.attributes.body,delete this.attributes.body),this.cid=s(),t=this.attributes.anchor,delete this.attributes.anchor,this.view=t?new f(this,t):new b(this)};return n.extend(m.prototype,{show:function(i){i=i||{};var t=this,e=new a;if(this.attributes.callbacks.beforeShow){var s=this.attributes.callbacks.beforeShow();s&&o.isFunction(s.done)?s.done(e.resolve):e.resolve()}else e.resolve();e.done(function(){h.show(function(){t.isDismissed()||(!i.force&&u&&u.DisplayController?u.DisplayController.request({name:t.id,weight:1e3,show:function(){t.view.show()}}):t.view.show(),l.send("shown",t))})})},dismiss:function(){var i=l.clean(arguments[0]||"programmatically");this.view.dismiss(),"close-button"===i&&this.attributes.isSequence&&h.clearSequences(),this.isDismissed()||(h.dismiss(this),l.send("dismissed."+i,this))},isVisible:function(){return this.view.$el.is(":visible")},isDismissed:function(){return h.isDismissed(this)},refresh:function(){this.isDismissed()||this.view.refresh()},hide:function(){this.isDismissed()||this.view.dismiss()},showNextHelpTipInSequence:function(){this.view.clickNext()}}),n.extend(f.prototype,{initialize:function(i,e){this.model=i,this.anchorSelector=e,this.anchor=n(e),this._initDialog(e),n(document).bind("showLayer",function(e,s,o){"inlineDialog"===s&&o.id===i.cid&&(r.current=null,n(document.body).unbind("click."+i.cid+".inline-dialog-check"),o._validateClickToClose=t,o.hide=t)})},show:function(){this.beforeHide=t,this.popup.show()},refresh:function(){var i=n(this.anchorSelector);i.is(":visible")?i.get(0)!==this.anchor.get(0)?this.changeAnchor(i):this.isVisible()?this.popup.refresh():this.show():this.dismiss()},changeAnchor:function(i){var t=this.isVisible();this.dismiss(),this.$el.remove(),this.anchor=i,this._initDialog(i),t&&this.show()},dismiss:function(){this.beforeHide=e,this._popupHide()},clickNext:function(){var i=n(this.$el).find(".helptip-next");i.length>0&&i.click()},isVisible:function(){return this.$el.is(":visible")},_initDialog:function(i){var e=this,s=this.model;this.popup=new r(n(i),s.cid,o.bind(this._createDialog,this),o.extend({container:"#content",noBind:!0,preHideCallback:function(){return e.beforeHide()},calculatePositions:function(i,t,e,s){var o=r.opts.calculatePositions(i,t,e,s),h=n(this.container),l=h.offset();return"auto"!==o.popupCss.left&&(o.popupCss.left-=l.left,o.popupCss.right="auto"),o.popupCss.top-=l.top,o},addActiveClass:!1,initCallback:s.attributes.callbacks.init,hideCallback:s.attributes.callbacks.hide,persistent:!0},s.attributes.inlineDialogOpts)),this._popupHide=this.popup.hide,this.popup.hide=t,this.$el=n(this.popup[0]),this.$el.addClass("jira-help-tip aui-help")},_createDialog:function(i,t,e){var s=this,r=h.sequences,a=this.model.attributes.position,u=this.model.attributes.isSequence;i.removeClass("contents"),i.html(n(c.tipContent(o.extend({showNextButton:u&&r.length>1&&a+1<r.length,length:r.length,position:a,showCloseButton:!0},this.model.attributes)))),i.unbind("mouseover mouseout"),i.find(".helptip-link").click(function(){l.send("learn-more.clicked",s.model)}),i.find(".helptip-close").click(function(i){i.preventDefault(),s.model.dismiss("close-button")}),i.find(".helptip-next").click(function(i){i.preventDefault(),s.model.dismiss("next-button");var t=a+1;r[t]&&r[t].show({force:!0})}),e()}}),n.extend(b.prototype,{initialize:function(){this.$el=n("<div></div>"),this.$el.addClass("jira-help-tip aui-help")},show:function(){},dismiss:function(){}}),m});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:initialiser', location = 'js/initialiser.js' */
define("jira-help-tips/page/initialiser",["jira-help-tips/feature/help-tip-manager","jira/util/users/logged-in-user","underscore"],function(e,i,n){"use strict";function r(){i.isAnonymous()||e.fetch()}return{init:n.once(r)}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:common', location = 'js/legacy.js' */
!function(){"use strict";AJS.namespace("AJS.HelpTip",null,require("jira-help-tips/feature/help-tip")),AJS.namespace("AJS.HelpTip.Manager",null,require("jira-help-tips/feature/help-tip-manager")),require("jira-help-tips/page/initialiser").init()}();
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-quicksearch-plugin:split_vendors~jira-quicksearch-plugin', location = 'frontend/bundle.vendors~jira-quicksearch-plugin.js' */
(window.atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664=window.atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664||[]).push([[2],{1:function(e,t,n){var r="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a=n(11),s={},o=r&&(document.head||document.getElementsByTagName("head")[0]),i=null,d=0,u=!1,f=function(){},l="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e){for(var t=0;t<e.length;t++){var n=e[t],r=s[n.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](n.parts[a]);for(;a<n.parts.length;a++)r.parts.push(h(n.parts[a]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var o=[];for(a=0;a<n.parts.length;a++)o.push(h(n.parts[a]));s[n.id]={id:n.id,refs:1,parts:o}}}}function c(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function h(e){var t,n,r=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(r){if(u)return f;r.parentNode.removeChild(r)}if(l){var a=d++;r=i||(i=c()),t=g.bind(null,r,a,!1),n=g.bind(null,r,a,!0)}else r=c(),t=m.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}e.exports=function(e,t,n){u=n;var r=a(e,t);return p(r),function(t){for(var n=[],o=0;o<r.length;o++){var i=r[o];(d=s[i.id]).refs--,n.push(d)}t?p(r=a(e,t)):r=[];for(o=0;o<n.length;o++){var d;if(0===(d=n[o]).refs){for(var u=0;u<d.parts.length;u++)d.parts[u]();delete s[d.id]}}}};var v,b=(v=[],function(e,t){return v[e]=t,v.filter(Boolean).join("\n")});function g(e,t,n,r){var a=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=b(t,a);else{var s=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function m(e,t){var n=t.css,r=t.media,a=t.sourceMap;if(r&&e.setAttribute("media",r),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},11:function(e,t){e.exports=function(e,t){for(var n=[],r={},a=0;a<t.length;a++){var s=t[a],o=s[0],i={id:e+":"+a,css:s[1],media:s[2],sourceMap:s[3]};r[o]?r[o].parts.push(i):n.push(r[o]={id:o,parts:[i]})}return n}}}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-quicksearch-plugin:entrypoint-jira-quicksearch-plugin', location = 'frontend/bundle.jira-quicksearch-plugin.js' */
!function(e){function t(t){for(var n,o,a=t[0],s=t[1],l=t[2],f=0,_=[];f<a.length;f++)o=a[f],Object.prototype.hasOwnProperty.call(u,o)&&u[o]&&_.push(u[o][0]),u[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(c&&c(t);_.length;)_.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,a=1;a<r.length;a++){var s=r[a];0!==u[s]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},u={1:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[];return 0===u[e]?Promise.resolve():u[e]?u[e][2]:(t.push(new Promise((function(t,r){u[e]=[t,r]})),new Promise((function(t,r){WRM.require("wrc!com.atlassian.jira.plugins.jira-quicksearch-plugin:"+e).then(t,r)}))),u[e][2]=Promise.all(t))},o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o.oe=function(e){throw console.error(e),e},"undefined"!=typeof AJS&&(o.p=AJS.contextPath()+"/s/f19c299b-977b-4940-9c33-a3db139f1d23/_/download/resources/com.atlassian.jira.plugins.jira-quicksearch-plugin:assets-f19c299b-977b-4940-9c33-a3db139f1d23/");var a=window.atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664=window.atlassianWebpackJsonpe5ed4b01bb42b7893d8aef5bda9bf664||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var c=s;i.push([7,2]),r()}([function(e,t){e.exports=require("jquery")},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QUICK_SEARCH_RESULTS_EMPTY_STATE=t.QUICK_SEARCH_PARENT_LOADING_CLASS=t.QUICK_SEARCH_SPINNER_LOCATOR_CLASS=t.QUICK_SEARCH_SPINNER_CLASS=t.QUICK_SEARCH_INPUT_LOCATOR=t.QUICK_SEARCH_INPUT_ID=t.QUICK_SEARCH_FEATURE_FLAG=void 0;var n=u(r(6));function u(e){return e&&e.__esModule?e:{default:e}}var i=u(r(3)).default,o=(t.QUICK_SEARCH_FEATURE_FLAG="jira.quick.search",t.QUICK_SEARCH_INPUT_ID="quickSearchInput"),a=t.QUICK_SEARCH_INPUT_LOCATOR="#"+o,s=t.QUICK_SEARCH_SPINNER_CLASS="quick-search-spinner";t.QUICK_SEARCH_SPINNER_LOCATOR_CLASS=a+" ~ ."+s,t.QUICK_SEARCH_PARENT_LOADING_CLASS="quicksearch-loading",t.QUICK_SEARCH_RESULTS_EMPTY_STATE=Object.freeze([{id:"quick-search-issues",items:[],name:"\u95ee\u9898",url:(0,n.default)()+"/issues/?jql=order+by+lastViewed+DESC",viewAllTitle:"\u663e\u793a\u6240\u6709\u95ee\u9898"},{id:"quick-search-projects",items:[],name:"ultimate.search.group.projects.name",url:(0,n.default)()+"/projects?selectedCategory=all&selectedProjectType=all&contains=",viewAllTitle:"\u67e5\u770b\u6240\u6709\u9879\u76ee"}])},function(e,t){e.exports=require("jira/util/formatter")},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("jira/analytics")},function(e,t){e.exports=require("wrm/context-path")},function(e,t,r){"use strict";var n=s(r(0)),u=s(r(4)),i=s(r(5)),o=s(r(8));r(9);var a=r(2);function s(e){return e&&e.__esModule?e:{default:e}}o.default.isFeatureEnabled(a.QUICK_SEARCH_FEATURE_FLAG)&&((0,n.default)((function(){var e=(0,n.default)(a.QUICK_SEARCH_INPUT_LOCATOR);e.after('<div class="'+a.QUICK_SEARCH_SPINNER_CLASS+'"></div>'),e.on("beforeBlurInput",(function(e){e.preventDefault()}));var t=u.default.once((function(){r.e(0).then(r.t.bind(null,12,7)).then((function(e){return(0,e.spinStart)()})),Promise.all([r.e(4),r.e(0),r.e(3)]).then(r.t.bind(null,13,7))}));e.focus(t),e.is(":focus")&&t()})),(0,n.default)(window).load((function(){r.e(5).then(r.t.bind(null,14,7)).then((function(e){return(0,e.showOnboardingTip)()})),i.default.send({name:"quicksearch.enabled"})})))},function(e,t){e.exports=require("jira/featureflags/feature-manager")},function(e,t,r){var n=r(10);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r(1)("391be713",n,!0)},function(e,t,r){"use strict";r.r(t)}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_aui.pattern.label', location = 'aui.chunk.93f016bafc59ae6f671f--c946813afe778dbb7677.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.pattern.label"],{Y5aH:function(i,u,n){"use strict";n.r(u);n("FStl"),n("Q0fs"),n("nqD9")}},[["Y5aH","runtime","aui.splitchunk.4b52f9e2be","aui.splitchunk.056561461c","aui.splitchunk.949297951c"]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_aui.splitchunk.16f099a0da', location = 'aui.chunk.43d397beaf6de989b5ee--0d2dd2c51dad060bb02a.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.splitchunk.16f099a0da"],{jJ4L:function(i,n,o){"use strict";o.r(n);o("FStl"),o("Q0fs"),o("oTK+"),o("S3ao"),o("HNID"),o("YQ7q")}}]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_aui.pattern.table', location = 'aui.chunk.824c3ea7209f29cb8252--d311aba81c1221bf6155.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.pattern.table"],[],[["jJ4L","runtime","aui.splitchunk.4b52f9e2be","aui.splitchunk.056561461c","aui.splitchunk.949297951c","aui.splitchunk.d7c46c2734","aui.splitchunk.fb15cffa72","aui.splitchunk.862f26d10a","aui.splitchunk.b2ecdd4179","aui.splitchunk.16f099a0da"]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.auiplugin:split_aui.component.dropdown2', location = 'aui.chunk.430814140c24d774b8e1--8cc87bbfd9b76ea520c7.js' */
(window.__auiJsonp=window.__auiJsonp||[]).push([["aui.component.dropdown2"],[],[["XHZH","runtime","aui.splitchunk.vendors--894c8113d9","aui.splitchunk.vendors--95c789edf5","aui.splitchunk.vendors--9c48cc20a9","aui.splitchunk.vendors--105edd7c71","aui.splitchunk.vendors--d2297af84a","aui.splitchunk.71c59684a5","aui.splitchunk.4b52f9e2be","aui.splitchunk.444efc83be","aui.splitchunk.739b9ec8cc","aui.splitchunk.dd803a46b4","aui.splitchunk.994e478d48","aui.splitchunk.e54c7c7304","aui.splitchunk.fb15cffa72","aui.splitchunk.56dfb54d0c","aui.splitchunk.f1e06f97a4","aui.splitchunk.479fe6ee76","aui.splitchunk.f673ef53ac","aui.splitchunk.8659b532c1","aui.splitchunk.9c48cc20a9","aui.splitchunk.5f851f97df","aui.splitchunk.d0110a864f","aui.splitchunk.afa5039e04","aui.splitchunk.bff3715233","aui.splitchunk.c750721820","aui.splitchunk.6d6f245ed3","aui.splitchunk.ed86a19e01","aui.splitchunk.084821f40b","aui.splitchunk.2e16019fb9","aui.splitchunk.5b8c290363","aui.splitchunk.baa83dbaf9","aui.splitchunk.e5af17b48e","aui.splitchunk.f154095da3","aui.splitchunk.36cd9d521c","aui.splitchunk.4248e12b20","aui.splitchunk.b548966f06"]]]);
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  return '' + ((true) ? navlinks.templates.appswitcher_old.switcher(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
var APPSWITCHER_TRIGGER_CLICK="appswitcher.trigger.click",APPSWITCHER_DROPDOWN_SHOW="appswitcher.dropdown.show",APPSWITCHER_DROPDOWN_DISPLAY_ERROR="appswitcher.dropdown.display.error",APPSWITCHER_APP_LINK_CLICK="appswitcher.app.link.click",APPSWITCHER_CONFIGURE_LINK_CLICK="appswitcher.configure.link.click";
(function(a,c){c.AppSwitcher=function(e){var c=AJS.contextPath()+"/plugins/servlet/customize-application-navigator",b=this;this.$dropdown=null;e=a.extend({dropdownContents:null},e);this.getLinks=function(){return a.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:!1,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){this.$dropdown||(this.$dropdown=a(e.dropdownContents),this.isUserAdmin=this.$dropdown.data("is-user-admin"));return this.$dropdown};
this.updateDropdown=function(d){a(function(){b.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:d,showAdminLink:b.isUserAdmin,adminLink:c}));b.bindAnalyticsHandlers()})};this.bindAnalyticsHandlers=function(){a(".app-switcher-trigger").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_TRIGGER_CLICK})});a("#app-switcher").on("aui-dropdown2-show",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_DROPDOWN_SHOW})});a("#app-switcher .nav-link").on("click",
function(){var d="custom",b=a(this).find("a").attr("href"),c=window.location.hostname;b&&-1<b.indexOf("bitbucket.org")?d="bitbucket-cloud":-1<b.indexOf(c+"/wiki")?d="confluence":-1<b.indexOf(c+"/build")?d="bamboo":-1<b.indexOf(c)&&(d="jira");AJS.trigger("analyticsEvent",{name:APPSWITCHER_APP_LINK_CLICK,data:{product:d}})});a(".nav-link-edit-wrapper").on("click",function(){AJS.trigger("analyticsEvent",{name:APPSWITCHER_CONFIGURE_LINK_CLICK})})};this.showError=function(){a(function(){AJS.trigger("analyticsEvent",
{name:APPSWITCHER_DROPDOWN_DISPLAY_ERROR});b.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",a.proxy(b.retryLoading,b))})};this.retryLoading=function(a){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();a&&a.stopPropagation()};this.getLinks()};a(function(){!0===a("#app-switcher").data("is-switcher")&&new c.AppSwitcher({dropdownContents:"#app-switcher"})})})(jQuery,window.NL=window.NL||
{});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher_old.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher_old.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applications.soyTemplateName = 'navlinks.templates.appswitcher_old.applications';
}


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param19 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      param19 += navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentMap(linkData27, {showDescription: opt_data.showDescription}));
    }
    param19 += '</ul>';
    output += aui.dropdown2.section({content: param19});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsSection';
}


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsItem';
}


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape('\u914d\u7f6e...') + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.adminSection.soyTemplateName = 'navlinks.templates.appswitcher_old.adminSection';
}


navlinks.templates.appswitcher_old.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\x3cspan class\x3d\x22app-switcher-retry\x22\x3e\u518d\u8bd5\u4e00\u6b21\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.error.soyTemplateName = 'navlinks.templates.appswitcher_old.error';
}


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape('\u6b63\u5728\u8fd0\u884c\x26hellip;') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.loading.soyTemplateName = 'navlinks.templates.appswitcher_old.loading';
}


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('\u5df2\u94fe\u63a5\u7a0b\u5e8f') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.trigger.soyTemplateName = 'navlinks.templates.appswitcher_old.trigger';
}


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_ignored) {
  var output = '';
  var loadingContent__soy79 = '' + navlinks.templates.appswitcher_old.loading(null);
  var triggerContent__soy81 = '' + navlinks.templates.appswitcher_old.trigger(null);
  output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy79, extraClasses: 'aui-style-default', extraAttributes: {'data-is-user-admin': false, 'data-is-switcher': 'true'}}, trigger: {tagName: 'button', showIcon: false, content: triggerContent__soy81, extraClasses: 'app-switcher-trigger aui-dropdown2-trigger-arrowless', extraAttributes: {href: '#app-switcher'}}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.switcher.soyTemplateName = 'navlinks.templates.appswitcher_old.switcher';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-header-plugin:header-templates', location = 'soy/headerDropdown.soy' */
// This file was automatically generated from headerDropdown.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Menu.Dropdowns.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Menu == 'undefined') { JIRA.Templates.Menu = {}; }
if (typeof JIRA.Templates.Menu.Dropdowns == 'undefined') { JIRA.Templates.Menu.Dropdowns = {}; }


JIRA.Templates.Menu.Dropdowns.dropdown2Fragment = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList3 = opt_data.sections;
  var sectionListLen3 = sectionList3.length;
  for (var sectionIndex3 = 0; sectionIndex3 < sectionListLen3; sectionIndex3++) {
    var sectionData3 = sectionList3[sectionIndex3];
    output += JIRA.Templates.Menu.Dropdowns.dropdown2Section(sectionData3);
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Fragment.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Fragment';
}


JIRA.Templates.Menu.Dropdowns.dropdown2Section = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var hasItems__soy7 = opt_data.items && opt_data.items.length > 0;
  if (hasItems__soy7) {
    output += '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dropdown2-section' + ((opt_data.style) ? soy.$$escapeHtml(opt_data.style) : '') + '" >' + ((opt_data.label) ? '<strong>' + soy.$$escapeHtml(opt_data.label) + '</strong>' : '') + '<ul class="aui-list-truncate">';
    var itemList27 = opt_data.items;
    var itemListLen27 = itemList27.length;
    for (var itemIndex27 = 0; itemIndex27 < itemListLen27; itemIndex27++) {
      var itemData27 = itemList27[itemIndex27];
      output += '<li' + ((itemData27.id) ? ' id="' + soy.$$escapeHtml(itemData27.id) + '"' : '') + ((itemData27.style) ? ' class="' + soy.$$escapeHtml(itemData27.style) + '"' : '') + '>' + JIRA.Templates.Menu.Dropdowns.dropdown2Item(itemData27) + '</li>';
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Section.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Section';
}


JIRA.Templates.Menu.Dropdowns.dropdown2Item = function(opt_data, opt_ignored) {
  var output = '<a href="' + soy.$$escapeHtml(opt_data.url) + '"' + ((opt_data.parameters && opt_data.parameters.trackClick) ? ' data-track-click="' + soy.$$escapeHtml(opt_data.parameters.trackClick) + '"' : '') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '_lnk"' : '') + ' class="' + ((opt_data.iconUrl) ? 'aui-icon-container' : '') + ((opt_data.parameters && opt_data.parameters['class']) ? ' ' + soy.$$escapeHtml(opt_data.parameters['class']) : '') + '"';
  if (opt_data.parameters) {
    var keyList69 = soy.$$getMapKeys(opt_data.parameters);
    var keyListLen69 = keyList69.length;
    for (var keyIndex69 = 0; keyIndex69 < keyListLen69; keyIndex69++) {
      var keyData69 = keyList69[keyIndex69];
      output += (keyData69 != 'class' && keyData69 != 'iconurl') ? ' ' + soy.$$escapeHtml(keyData69) + '="' + soy.$$escapeHtml(opt_data.parameters[keyData69]) + '"' : '';
    }
  }
  output += '>' + ((opt_data.iconUrl) ? '<img class="icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" alt="" />' : '') + soy.$$escapeHtml(opt_data.label) + '</a>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Menu.Dropdowns.dropdown2Item.soyTemplateName = 'JIRA.Templates.Menu.Dropdowns.dropdown2Item';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-header-plugin:analytics-header', location = 'js/header-analytics.js' */
define("jira/header/init-header-analytics",["jira/analytics","jira/util/logger","jquery"],function(n,t,e){"use strict";function i(n,t){var e=void 0;return n.forEach(function(n){n.id===t&&(e=n.analyticEventKey)}),e}function o(o){var m=e(o);m.on("click","#logo",function(){n.send({name:a+"home"}),t.trace(r)}),m.on("aui-dropdown2-show",l,function(){var n=e(this).attr("id");c(u,n)&&d(n,u,".open")}),m.on("aui-dropdown2-hide",l,function(){var n=e(this).attr("id");c(u,n)&&d(n,u,".close")}),m.on("aui-dropdown2-show",s,function(){var n=e(this);n.trigger("aui-dropdown2-show-before"),n.trigger("aui-dropdown2-show-after")}),m.on("click",y,function(){var n=this.getAttribute("aria-controls");c(u,n)&&d(n,u,".click")}),m.on("click",".aui-dropdown2 .aui-dropdown2-section a",function(o){var c=e(o.target).closest(l).first();if(null!==c){var d=c.find("a").index(o.target),s=c.attr("id"),y=i(u,s);n.send({name:a+y+".item.click",itemIndex:d}),t.trace(r)}})}var a="jira.navigation.header.",r="jira.header.analytics.event",c=function(n,t){return n.some(function(n){return n.id===t})},d=function(e,o,c){var d=i(o,e),u=a+d+c;n.send({name:u}),t.trace(r)},u=[{id:"home_link-content",analyticEventKey:"dashboards"},{id:"browse_link-content",analyticEventKey:"projects"},{id:"find_link-content",analyticEventKey:"issues"},{id:"tempo_menu-content",analyticEventKey:"tempo"},{id:"bonfire_top_menu_dropdown-content",analyticEventKey:"capture"},{id:"greenhopper_menu-content",analyticEventKey:"boards"},{id:"plugins-jira-webitem-main-content",analyticEventKey:"portfolio"},{id:"system-help-menu-content",analyticEventKey:"help"},{id:"system-admin-menu-content",analyticEventKey:"admin"}],s="#system-help-menu-content, #user-options-content, #system-admin-menu-content",l=u.map(function(n){return"#"+n.id}).join(", "),y=u.reduce(function(n,t){return n+"a.aui-dropdown2-trigger[aria-owns="+t.id+"]"},"");return{init:o}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header-assets', location = 'js/init-dropdown2.js' */
define("jira/header/dropdown/element",["jira/ajs/ajax/smart-ajax","jira/jquery/deferred","jira/skate","jira/util/data/meta","wrm/context-path","jquery"],function(e,a,t,n,o,r){"use strict";var d=0;return t("jira-dropdown2-ajax",{type:t.type.CLASSNAME,attached:function(t){function i(){document.activeElement===f.get(0)&&w.get(0).focusItem(0),s()&&u()}function u(){window.scrollTo(0,0)}function s(){return w.parents("#header").length>0}function c(){f.data("kbd-interacted",!1)}var w=r(document.getElementById(t.getAttribute("aria-controls"))),f=r(t),m=w.data("aui-dropdown2-ajax-key");d+=1;var p=".aui-dropdown2-ajax"+d;t.jiraInitDropdown2EventNamespace=p;f.on("keydown"+p,function(){f.data("kbd-interacted",!0),setTimeout(c,4)}),w.on("aui-dropdown2-show-after"+p,c),c(),w.on("aui-dropdown2-show"+p,function(){if(w.trigger("aui-dropdown2-show-before"),m){var t=new a,d=new a;setTimeout(function(){t.resolve(f.data("kbd-interacted"))},0),w.empty(),w.addClass("aui-dropdown2-loading"),f.attr("aria-busy","true"),e.makeRequest({url:o()+"/rest/api/1.0/menus/"+m,data:{inAdminMode:n.getBoolean("in-admin-mode")},dataType:"json",cache:!1,success:function(e){d.resolve(e)},error:d.reject}),r.when(t,d).done(function(e,a){w.html(JIRA.Templates.Menu.Dropdowns.dropdown2Fragment(a));var t=f.hasClass("aui-dropdown2-sub-trigger");e&&t?setTimeout(i,0):setTimeout(function(){w.focus(),u()},0)}).always(function(){f.attr("aria-busy","false"),w.removeClass("aui-dropdown2-loading"),w.trigger("aui-dropdown2-show-after")})}else w.trigger("aui-dropdown2-show-after")}),function(){f.addClass("aui-dropdown2-ajax--interactive")}()},detached:function(e){var a=r(document.getElementById(e.getAttribute("aria-controls"))),t=r(e),n=e.jiraInitDropdown2EventNamespace;n&&(a.off(n),t.off(n))}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header-assets', location = 'js/app-switcher-analytics.js' */
define("jira/header/init-app-switcher-analytics",["jira/analytics","jquery"],function(i,n){"use strict";function a(a){var e=n(a);e.on("aui-dropdown2-show-before","#app-switcher",function(){i.send({name:"navigation.header.appswitcher.open"})}),e.on("click","#app-switcher a, #app-switcher button",function(a){var e,t=n(a.target),o=t.closest("li").index();t.is(".nav-link-edit")?e="configure":t.is(".app-discovery-link")?e=this.id?this.id:"unknown.app.discovery":t.is(".app-discovery-cancel-button")?(e="dont.show",o=0):e="application",i.send({name:"navigation.header.appswitcher.click",data:{position:o,linkType:e}})}),e.on("aui-dropdown2-hide","#app-switcher",function(){i.send({name:"navigation.header.appswitcher.close"})})}return{init:a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'js/init-header.js' */
require(["jira/header/dropdown/element","jira/header/init-header-analytics","jira/header/init-app-switcher-analytics"],function(e,i,t){"use strict";i.init(document),t.init(document)});
}catch(e){WRMCB(e)};